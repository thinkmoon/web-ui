<!DOCTYPE html>
<html  data-head-attrs="">

<head >
  <title>uni-app对微信小程序云函数的适配 | 指尖魔法屋-醉月思的博客</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><script async src="/ads.js" crossorigin="anonymous"></script><meta name="keywords" content="微信小程序,uni-app,云函数"><meta name="description" content="web前端开发工程师、面向高保真编程、总结与记录是两个极其优秀的学习习惯、对知识和技术保持敬畏之心！"><meta name="head:count" content="5"><link rel="modulepreload" href="/_nuxt/entry-4033bfcf.mjs" as="script" crossorigin><link rel="preload" href="/_nuxt/entry.7e762317.css" as="style"><link rel="modulepreload" href="/_nuxt/default-ab4b1d95.mjs" as="script" crossorigin><link rel="preload" href="/_nuxt/default.8dc03fb7.css" as="style"><link rel="modulepreload" href="/_nuxt/Footer-39451558.mjs" as="script" crossorigin><link rel="modulepreload" href="/_nuxt/_cid_-40efc3b3.mjs" as="script" crossorigin><link rel="modulepreload" href="/_nuxt/asyncData-b0244fb3.mjs" as="script" crossorigin><link rel="prefetch" href="/_nuxt/background.36a7be78.jpg"><link rel="prefetch" as="script" href="/_nuxt/404-0c215052.mjs"><link rel="prefetch" as="script" href="/_nuxt/editor-3321b87d.mjs"><link rel="prefetch" as="script" href="/_nuxt/index-b882dfe7.mjs"><link rel="prefetch" as="script" href="/_nuxt/post-list-93b150a9.mjs"><link rel="prefetch" as="script" href="/_nuxt/admin-f89c7533.mjs"><link rel="prefetch" as="script" href="/_nuxt/_pageIndex_-08429fca.mjs"><link rel="prefetch" as="script" href="/_nuxt/PostList-693c3f84.mjs"><link rel="prefetch" as="script" href="/_nuxt/index-dbca3f00.mjs"><link rel="prefetch" as="script" href="/_nuxt/index-dc59a107.mjs"><link rel="prefetch" as="script" href="/_nuxt/login-d8f7e58b.mjs"><link rel="prefetch" as="script" href="/_nuxt/_pageIndex_-4617af3f.mjs"><link rel="prefetch" as="script" href="/_nuxt/_pageIndex_-38aaa266.mjs"><link rel="prefetch" as="script" href="/_nuxt/TagApi-b908df3a.mjs"><link rel="prefetch" as="script" href="/_nuxt/index-12cec95d.mjs"><link rel="prefetch" as="script" href="/_nuxt/auth-f948a8cb.mjs"><link rel="prefetch" as="script" href="/_nuxt/admin-1ee1b85d.mjs"><link rel="stylesheet" href="/_nuxt/entry.7e762317.css"><link rel="stylesheet" href="/_nuxt/default.8dc03fb7.css">
</head>

<body  data-head-attrs="">
  <div id="__nuxt"><!--[--><div><div class="top-menu" data-v-2d323d18><ul role="menubar" style="--el-menu-text-color:;--el-menu-hover-text-color:;--el-menu-bg-color:;--el-menu-hover-bg-color:;--el-menu-active-color:;" class="el-menu el-menu--horizontal" data-v-2d323d18><li class="el-menu-item" role="menuitem" tabindex="-1" style="" data-v-2d323d18><!--[--><!--[--> 指尖魔法屋 <!--]--><!--[--><!--]--><!--]--></li><li class="el-menu-item" role="menuitem" tabindex="-1" style="" data-v-2d323d18><!--[--><!--[--><a href="/category" class="" data-v-2d323d18> 分类 </a><!--]--><!--[--><!--]--><!--]--></li><li class="el-menu-item" role="menuitem" tabindex="-1" style="" data-v-2d323d18><!--[--><!--[--><a href="/tag" class="" data-v-2d323d18> 标签 </a><!--]--><!--[--><!--]--><!--]--></li></ul><div class="right" data-v-2d323d18><a class="el-link el-link--default" href="/login" data-v-2d323d18><!--v-if--><span class="el-link__inner"><!--[--><i class="el-icon pointer" style="font-size:26px;" data-v-2d323d18><!--[--><svg viewbox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" data-v-2d323d18><path fill="currentColor" d="M512 512a192 192 0 1 0 0-384 192 192 0 0 0 0 384zm0 64a256 256 0 1 1 0-512 256 256 0 0 1 0 512zm320 320v-96a96 96 0 0 0-96-96H288a96 96 0 0 0-96 96v96a32 32 0 1 1-64 0v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 1 1-64 0z"></path></svg><!--]--></i><!--]--></span><!--v-if--></a></div></div><div class="app-container"><!--[--><div class="app-container" data-v-14f20b86><!----><div class="article-content" data-v-14f20b86><div class="v-md-editor-preview" style="tab-size:2;" data-v-14f20b86><div class="github-markdown-body"><h1 data-v-md-heading="uni-app对微信小程序云函数的适配" data-v-md-line="1">uni-app对微信小程序云函数的适配</h1>
<h2 data-v-md-heading="引言" data-v-md-line="2">引言</h2>
<p data-v-md-line="4">熟悉uni-app的人应该都知道，uni-app并未对微信小程序云函数（本文统称云函数）进行相应的适配。但是，如果我们在某些业务场景的下需要使用云函数呢？我们知道，云函数可以复制到微信开发者工具，这样的话我们不得不每次编译一次就手动复制一次，不得不说麻烦至极。本文就问题做出以下解决方案。</p>
<h3 data-v-md-heading="本文环境" data-v-md-line="6">本文环境</h3>
<ol data-v-md-line="7">
<li>Hbuilder X</li>
</ol>
<p data-v-md-line="9"><img src="https://blog.cdn.thinkmoon.cn/blog/typecho/2019-10-22T01:28:39.png" alt="Hbuilder X版本"></p>
<ol start="2" data-v-md-line="11">
<li>微信开发者工具</li>
</ol>
<p data-v-md-line="13"><img src="https://blog.cdn.thinkmoon.cn/blog/typecho/2019-10-22T01:32:01.png" alt="微信开发者工具版本"></p>
<h2 data-v-md-heading="创建云函数目录" data-v-md-line="15">创建云函数目录</h2>
<p data-v-md-line="17">首先，我们需要在uni-app项目文件夹下，创建一个云函数目录，路径随意，我这里是<code>functions</code>。然后先随便在里面放一些文件，这里以<code>new_file.css</code>为例。</p>
<h2 data-v-md-heading="修改-manifest-json" data-v-md-line="19">修改<code>manifest.json</code></h2>
<p data-v-md-line="21">在uni-app根目录下，修改<code>manifest.json</code>中的微信小程序项，结构如下</p>
<div data-v-md-line="22"><div class="v-md-pre-wrapper v-md-pre-wrapper-json extra-class"><pre class="v-md-hljs-json"><code>&quot;mp-weixin&quot; : {
        /* 小程序特有相关 */
        &quot;appid&quot; : &quot;wxd7de467f6e6cf741&quot;,
        &quot;cloudfunctionRoot&quot;: &quot;./functions/&quot;, // 这一行就是标记云函数目录的字段
        &quot;setting&quot; : {
            &quot;urlCheck&quot; : false
        },
        &quot;usingComponents&quot; : true
    }
</code></pre>
</div></div><h2 data-v-md-heading="编写-vue-config-js" data-v-md-line="34">编写<code>vue.config.js</code></h2>
<ol data-v-md-line="36">
<li>我们在项目根目录创建<code>vue.config.js</code>文件</li>
<li>写入以下内容（如路径不一样请做相应适配）</li>
</ol>
<div data-v-md-line="39"><div class="v-md-pre-wrapper v-md-pre-wrapper-javascript extra-class"><pre class="v-md-hljs-javascript"><code><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>)
<span class="hljs-keyword">const</span> CopyWebpackPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;copy-webpack-plugin&#x27;</span>)

<span class="hljs-built_in">module</span>.exports = {
	<span class="hljs-attr">configureWebpack</span>: {
		<span class="hljs-attr">plugins</span>: [
			<span class="hljs-keyword">new</span> CopyWebpackPlugin([{
				<span class="hljs-attr">from</span>: path.join(__dirname, <span class="hljs-string">&#x27;cloudFunctions&#x27;</span>),
				<span class="hljs-attr">to</span>: path.join(__dirname, <span class="hljs-string">&#x27;unpackage/dist&#x27;</span>, process.env.NODE_ENV === <span class="hljs-string">&#x27;production&#x27;</span> ? <span class="hljs-string">&#x27;build&#x27;</span> : <span class="hljs-string">&#x27;dev&#x27;</span>, process.env
					.UNI_PLATFORM, <span class="hljs-string">&#x27;cloudFunctions&#x27;</span>)
			}])
		]
	}
}

</code></pre>
</div></div><ol start="3" data-v-md-line="56">
<li>编译运行</li>
</ol>
<p data-v-md-line="58">发现提示如下内容</p>
<p data-v-md-line="60"><img src="https://blog.cdn.thinkmoon.cn/blog/typecho/2019-10-22T01:18:43.png" alt="提示内容"></p>
<p data-v-md-line="62">说明未安装<code>copy-webpack-plugin</code>插件，我们手动安装一下。</p>
<div data-v-md-line="63"><div class="v-md-pre-wrapper v-md-pre-wrapper-shell extra-class"><pre class="v-md-hljs-shell"><code>npm install -save copy-webpack-plugin
</code></pre>
</div></div><blockquote data-v-md-line="66">
<p data-v-md-line="66">TIPS: 截至2020.6.4， uni-app暂不支持copy-webpack-plugin 6.0版，请安装5.0版</p>
</blockquote>
<p data-v-md-line="68"><img src="https://blog.cdn.thinkmoon.cn/blog/typecho/2019-10-22T01:34:09.png" alt="安装copy-webpack-plugin"></p>
<p data-v-md-line="70">然后编译运行，发现微信开发者工具里面出现以下内容。</p>
<p data-v-md-line="72"><img src="https://blog.cdn.thinkmoon.cn/blog/typecho/2019-10-22T01:35:15.png" alt="微信开发者工具里面的内容"></p>
<hr data-v-md-line="74">
<p data-v-md-line="76">截止目前，已打通Hbuilder X到微信开发者工具的自动复制，即已解决本文的核心内容。以下为进一步测试。</p>
<h2 data-v-md-heading="创建云函数" data-v-md-line="78">创建云函数</h2>
<blockquote data-v-md-line="80">
<p data-v-md-line="80">我们在云函数根目录上右键，在右键菜单中，可以选择创建一个新的 Node.js 云函数，我们将该云函数命名为check。开发者工具在本地创建出云函数目录和入口 index.js 文件，同时在线上环境中创建出对应的云函数。创建成功后，工具会提示是否立即本地安装依赖，确定后工具会自动安装 wx-server-sdk。我们会看到以下内容。</p>
</blockquote>
<p data-v-md-line="82">创建好后将其同步复制到uni-app项目，即可为以后自动同步行方便，又可避免在输出文件夹中云函数的意外丢失。至此，相关文件编写工作转至<code>Hbuilder X</code>，云函数上传部署依旧在微信开发者工具。</p>
<p data-v-md-line="84"><img src="https://blog.cdn.thinkmoon.cn/blog/typecho/2019-10-22T01:45:21.png" alt="云函数模板内容"></p>
<h2 data-v-md-heading="编写云函数" data-v-md-line="86">编写云函数</h2>
<p data-v-md-line="88">默认的云函数只是一个返回用户基本数据的内容，我们将其修改至满足我们的业务需求，以内容安全云调用为例。</p>
<p data-v-md-line="90">在云函数文件中写入以下内容</p>
<div data-v-md-line="92"><div class="v-md-pre-wrapper v-md-pre-wrapper-javascript extra-class"><pre class="v-md-hljs-javascript"><code><span class="hljs-comment">// 云函数入口文件</span>
<span class="hljs-keyword">const</span> cloud = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;wx-server-sdk&#x27;</span>)

cloud.init()

<span class="hljs-comment">// 云函数入口函数</span>
<span class="hljs-built_in">exports</span>.main = <span class="hljs-keyword">async</span>(event, context) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;待检测文本:&#x27;</span> + event.content);
    <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">await</span> cloud.openapi.security.msgSecCheck({
      <span class="hljs-attr">content</span>: event.content
    })
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;result:&#x27;</span> + <span class="hljs-built_in">JSON</span>.stringify(result));

    <span class="hljs-keyword">if</span> (result &amp;&amp; result.errCode.toString() === <span class="hljs-string">&#x27;87014&#x27;</span>) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">code</span>: <span class="hljs-number">300</span>,
        <span class="hljs-attr">msg</span>: <span class="hljs-string">&#x27;内容含有违法违规内容&#x27;</span>,
        <span class="hljs-attr">data</span>: result
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">code</span>: <span class="hljs-number">200</span>,
        <span class="hljs-attr">msg</span>: <span class="hljs-string">&#x27;ok&#x27;</span>,
        <span class="hljs-attr">data</span>: result
      }
    }

  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-keyword">if</span> (err.errCode.toString() === <span class="hljs-string">&#x27;87014&#x27;</span>) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">code</span>: <span class="hljs-number">300</span>,
        <span class="hljs-attr">msg</span>: <span class="hljs-string">&#x27;内容含有违法违规内容&#x27;</span>,
        <span class="hljs-attr">data</span>: err
      }
    }
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">code</span>: <span class="hljs-number">400</span>,
      <span class="hljs-attr">msg</span>: <span class="hljs-string">&#x27;调用security接口异常&#x27;</span>,
      <span class="hljs-attr">data</span>: err
    }
  }
}
</code></pre>
</div></div><h2 data-v-md-heading="权限申明" data-v-md-line="138">权限申明</h2>
<p data-v-md-line="140"><img src="https://blog.cdn.thinkmoon.cn/blog/typecho/2019-12-10T06:54:47.png" alt="云函数config权限声明"></p>
<p data-v-md-line="142">如上图，在函数目录下，创建一个<code>config.json</code>,文档说会自动创建，但是我实际操作时未自动创建。<code>config.json</code>内容如下。</p>
<div data-v-md-line="144"><div class="v-md-pre-wrapper v-md-pre-wrapper-json extra-class"><pre class="v-md-hljs-json"><code>{
	<span class="hljs-attr">&quot;permissions&quot;</span>: {
		<span class="hljs-attr">&quot;openapi&quot;</span>: [
			<span class="hljs-string">&quot;security.msgSecCheck&quot;</span>
		]
	}
}

</code></pre>
</div></div><p data-v-md-line="155">然后在函数目录右键，上传并部署。</p>
<h2 data-v-md-heading="小程序调用云函数" data-v-md-line="157">小程序调用云函数</h2>
<h3 data-v-md-heading="app-vue" data-v-md-line="159">App.vue</h3>
<div data-v-md-line="161"><div class="v-md-pre-wrapper v-md-pre-wrapper-javascript extra-class"><pre class="v-md-hljs-javascript"><code>&lt;script&gt;
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    <span class="hljs-function"><span class="hljs-title">onLaunch</span>(<span class="hljs-params"></span>)</span> {
      wx.cloud.init();
    }
  }
&lt;/script&gt;
</code></pre>
</div></div><h3 data-v-md-heading="index-vue" data-v-md-line="170">index.vue</h3>
<div data-v-md-line="172"><div class="v-md-pre-wrapper v-md-pre-wrapper-javascript extra-class"><pre class="v-md-hljs-javascript"><code><span class="hljs-keyword">let</span> res = <span class="hljs-keyword">await</span> wx.cloud.callFunction({
          <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;checkText&#x27;</span>,
          <span class="hljs-attr">data</span>: {
            <span class="hljs-string">&quot;content&quot;</span>: <span class="hljs-built_in">this</span>.displayString
          }
        })
        <span class="hljs-keyword">if</span> (res.result.code != <span class="hljs-number">200</span>) {
          uni.showModal({
            <span class="hljs-attr">title</span>: <span class="hljs-string">&quot;温馨提示&quot;</span>,
            <span class="hljs-attr">content</span>: <span class="hljs-string">&quot;你所输入的内容可能含有违法违规内容，不支持进行下一步操作&quot;</span>
          })
          <span class="hljs-keyword">return</span>
        }
</code></pre>
</div></div><h2 data-v-md-heading="效果展示" data-v-md-line="188">效果展示</h2>
<p data-v-md-line="190"><img src="https://blog.cdn.thinkmoon.cn/blog/typecho/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20191022110949.png" alt="微信图片_20191022110949.png"></p>
<blockquote data-v-md-line="201">
<p data-v-md-line="201">版权声明: 本文首发于<a href="https://www.thinkmoon.cn/post/466" class="custom-internal-link" target="_blank">指尖魔法屋-uni-app对微信小程序云函数的适配</a>,转载或引用必须申明原指尖魔法屋来源及源地址！</p>
</blockquote>
</div></div></div></div><!--]--></div><span></span></div><div class="footer" data-v-68ae0dac><span data-v-68ae0dac>Copyright © 2017-2022 指尖魔法屋. All rights reserved</span><span data-v-68ae0dac>POWERED BY thinkBlog · v0.1.5 · build-20220508-0211</span><span data-v-68ae0dac>网站持续搭建中，感谢关注</span><span data-v-68ae0dac>本站已顽强运行：蛮久了~</span><div data-v-68ae0dac><a class="el-link el-link--primary is-underline" href="http://beian.miit.gov.cn/" data-v-68ae0dac><!--v-if--><span class="el-link__inner"><!--[--> 粤ICP备17055617号 <!--]--></span><!--v-if--></a></div></div><!--]--></div><script>window.__NUXT__=(function(a){return {data:{pinia:{},article:{cid:466,title:"uni-app对微信小程序云函数的适配",created:1571716380,modified:1621142849,text:"## 引言\r\n\r\n熟悉uni-app的人应该都知道，uni-app并未对微信小程序云函数（本文统称云函数）进行相应的适配。但是，如果我们在某些业务场景的下需要使用云函数呢？我们知道，云函数可以复制到微信开发者工具，这样的话我们不得不每次编译一次就手动复制一次，不得不说麻烦至极。本文就问题做出以下解决方案。\r\n\r\n### 本文环境\r\n1. Hbuilder X\r\n\r\n![Hbuilder X版本][1]\r\n\r\n2. 微信开发者工具\r\n\r\n![微信开发者工具版本][2]\r\n\r\n## 创建云函数目录\r\n\r\n首先，我们需要在uni-app项目文件夹下，创建一个云函数目录，路径随意，我这里是`functions`。然后先随便在里面放一些文件，这里以`new_file.css`为例。\r\n\r\n## 修改`manifest.json`\r\n\r\n在uni-app根目录下，修改`manifest.json`中的微信小程序项，结构如下\r\n```json\r\n\"mp-weixin\" : {\r\n        \u002F* 小程序特有相关 *\u002F\r\n        \"appid\" : \"wxd7de467f6e6cf741\",\r\n        \"cloudfunctionRoot\": \".\u002Ffunctions\u002F\", \u002F\u002F 这一行就是标记云函数目录的字段\r\n        \"setting\" : {\r\n            \"urlCheck\" : false\r\n        },\r\n        \"usingComponents\" : true\r\n    }\r\n```\r\n\r\n## 编写`vue.config.js`\r\n\r\n1. 我们在项目根目录创建`vue.config.js`文件\r\n2. 写入以下内容（如路径不一样请做相应适配）\r\n\r\n```javascript\r\nconst path = require('path')\r\nconst CopyWebpackPlugin = require('copy-webpack-plugin')\r\n\r\nmodule.exports = {\r\n\tconfigureWebpack: {\r\n\t\tplugins: [\r\n\t\t\tnew CopyWebpackPlugin([{\r\n\t\t\t\tfrom: path.join(__dirname, 'cloudFunctions'),\r\n\t\t\t\tto: path.join(__dirname, 'unpackage\u002Fdist', process.env.NODE_ENV === 'production' ? 'build' : 'dev', process.env\r\n\t\t\t\t\t.UNI_PLATFORM, 'cloudFunctions')\r\n\t\t\t}])\r\n\t\t]\r\n\t}\r\n}\r\n\r\n```\r\n3. 编译运行\r\n\r\n发现提示如下内容\r\n\r\n![提示内容][3]\r\n\r\n说明未安装`copy-webpack-plugin`插件，我们手动安装一下。\r\n```shell\r\nnpm install -save copy-webpack-plugin\r\n```\r\n\u003E TIPS: 截至2020.6.4， uni-app暂不支持copy-webpack-plugin 6.0版，请安装5.0版\r\n\r\n![安装copy-webpack-plugin][4]\r\n\r\n然后编译运行，发现微信开发者工具里面出现以下内容。\r\n\r\n![微信开发者工具里面的内容][5]\r\n\r\n---\r\n\r\n截止目前，已打通Hbuilder X到微信开发者工具的自动复制，即已解决本文的核心内容。以下为进一步测试。\r\n\r\n## 创建云函数\r\n\r\n\u003E 我们在云函数根目录上右键，在右键菜单中，可以选择创建一个新的 Node.js 云函数，我们将该云函数命名为check。开发者工具在本地创建出云函数目录和入口 index.js 文件，同时在线上环境中创建出对应的云函数。创建成功后，工具会提示是否立即本地安装依赖，确定后工具会自动安装 wx-server-sdk。我们会看到以下内容。\r\n\r\n创建好后将其同步复制到uni-app项目，即可为以后自动同步行方便，又可避免在输出文件夹中云函数的意外丢失。至此，相关文件编写工作转至`Hbuilder X`，云函数上传部署依旧在微信开发者工具。\r\n\r\n![云函数模板内容][6]\r\n\r\n## 编写云函数\r\n\r\n默认的云函数只是一个返回用户基本数据的内容，我们将其修改至满足我们的业务需求，以内容安全云调用为例。\r\n\r\n在云函数文件中写入以下内容\r\n\r\n```javascript\r\n\u002F\u002F 云函数入口文件\r\nconst cloud = require('wx-server-sdk')\r\n\r\ncloud.init()\r\n\r\n\u002F\u002F 云函数入口函数\r\nexports.main = async(event, context) =\u003E {\r\n  try {\r\n    console.log('待检测文本:' + event.content);\r\n    let result = await cloud.openapi.security.msgSecCheck({\r\n      content: event.content\r\n    })\r\n    console.log('result:' + JSON.stringify(result));\r\n\r\n    if (result && result.errCode.toString() === '87014') {\r\n      return {\r\n        code: 300,\r\n        msg: '内容含有违法违规内容',\r\n        data: result\r\n      }\r\n    } else {\r\n      return {\r\n        code: 200,\r\n        msg: 'ok',\r\n        data: result\r\n      }\r\n    }\r\n\r\n  } catch (err) {\r\n    if (err.errCode.toString() === '87014') {\r\n      return {\r\n        code: 300,\r\n        msg: '内容含有违法违规内容',\r\n        data: err\r\n      }\r\n    }\r\n    return {\r\n      code: 400,\r\n      msg: '调用security接口异常',\r\n      data: err\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n## 权限申明\r\n\r\n![云函数config权限声明][7]\r\n\r\n如上图，在函数目录下，创建一个`config.json`,文档说会自动创建，但是我实际操作时未自动创建。`config.json`内容如下。\r\n\r\n```json\r\n{\r\n\t\"permissions\": {\r\n\t\t\"openapi\": [\r\n\t\t\t\"security.msgSecCheck\"\r\n\t\t]\r\n\t}\r\n}\r\n\r\n```\r\n\r\n然后在函数目录右键，上传并部署。\r\n\r\n## 小程序调用云函数\r\n\r\n### App.vue\r\n\r\n```javascript\r\n\u003Cscript\u003E\r\n  export default {\r\n    onLaunch() {\r\n      wx.cloud.init();\r\n    }\r\n  }\r\n\u003C\u002Fscript\u003E\r\n```\r\n### index.vue\r\n\r\n```javascript\r\nlet res = await wx.cloud.callFunction({\r\n          name: 'checkText',\r\n          data: {\r\n            \"content\": this.displayString\r\n          }\r\n        })\r\n        if (res.result.code != 200) {\r\n          uni.showModal({\r\n            title: \"温馨提示\",\r\n            content: \"你所输入的内容可能含有违法违规内容，不支持进行下一步操作\"\r\n          })\r\n          return\r\n        }\r\n```\r\n\r\n## 效果展示\r\n\r\n![微信图片_20191022110949.png][8]\r\n\r\n\r\n  [1]: https:\u002F\u002Fblog.cdn.thinkmoon.cn\u002Fblog\u002Ftypecho\u002F2019-10-22T01:28:39.png\r\n  [2]: https:\u002F\u002Fblog.cdn.thinkmoon.cn\u002Fblog\u002Ftypecho\u002F2019-10-22T01:32:01.png\r\n  [3]: https:\u002F\u002Fblog.cdn.thinkmoon.cn\u002Fblog\u002Ftypecho\u002F2019-10-22T01:18:43.png\r\n  [4]: https:\u002F\u002Fblog.cdn.thinkmoon.cn\u002Fblog\u002Ftypecho\u002F2019-10-22T01:34:09.png\r\n  [5]: https:\u002F\u002Fblog.cdn.thinkmoon.cn\u002Fblog\u002Ftypecho\u002F2019-10-22T01:35:15.png\r\n  [6]: https:\u002F\u002Fblog.cdn.thinkmoon.cn\u002Fblog\u002Ftypecho\u002F2019-10-22T01:45:21.png\r\n  [7]: https:\u002F\u002Fblog.cdn.thinkmoon.cn\u002Fblog\u002Ftypecho\u002F2019-12-10T06:54:47.png\r\n  [8]: https:\u002F\u002Fblog.cdn.thinkmoon.cn\u002Fblog\u002Ftypecho\u002F%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20191022110949.png",authorId:a,comments:10,views:1807,likes:6,tag:[{tid:18,name:"微信小程序",order:a,count:a},{tid:35,name:"uni-app",order:a,count:a},{tid:54,name:"云函数",order:a,count:a}],category:"教程分享",category_id:14,fields:{thumb:"https:\u002F\u002Fblog.cdn.thinkmoon.cn\u002Fblog\u002Ftypecho\u002F2019-10-22T01:28:39.png"}}},state:{error:null},_errors:{},serverRendered:true,config:{public:{TITLE:"指尖魔法屋-醉月思的博客",VERSION:"0.1.5 · build-20220508-0211",KEYWORDS:["thinkmoon","指尖魔法屋","醉月思的博客"],DESCRIPTION:"web前端开发工程师、面向高保真编程、总结与记录是两个极其优秀的学习习惯、对知识和技术保持敬畏之心！",baseUrl:"https:\u002F\u002Fservice.thinkmoon.cn\u002Fapi"},app:{baseURL:"\u002F",buildAssetsDir:"\u002F_nuxt\u002F",cdnURL:""}}}}(0))</script><script type="module" src="/_nuxt/entry-4033bfcf.mjs" crossorigin></script><script type="module" src="/_nuxt/default-ab4b1d95.mjs" crossorigin></script><script type="module" src="/_nuxt/_cid_-40efc3b3.mjs" crossorigin></script>
</body>

</html>