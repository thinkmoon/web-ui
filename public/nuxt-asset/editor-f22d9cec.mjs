var D=Object.defineProperty,A=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var v=(e,t,a)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,y=(e,t)=>{for(var a in t||(t={}))F.call(t,a)&&v(e,a,t[a]);if(g)for(var a of g(t))S.call(t,a)&&v(e,a,t[a]);return e},f=(e,t)=>A(e,L(t));import{_ as w,d as C,P as V,C as x,a as E,b as I,u as P,r,o as u,c as p,e as s,f as l,F as b,g as U,w as d,h as Y,i as j,j as q,t as N}from"./entry-33d20d1c.mjs";const H=C({data(){return{article:{title:"",text:"",category_id:""},categoryList:[]}},activated(){this.$route.query.cid?V.getDetail({cid:this.$route.query.cid}).then(e=>{this.article=e}):this.data={},this.getCategory()},methods:{getCategory(){x.getCategory().then(e=>{this.categoryList=e})},saveArticle(){const e=this.$route.query.cid?"update":"add";if(!this.article.category_id)return this.$message.error("\u8BF7\u9009\u62E9\u6587\u7AE0\u5206\u7C7B");V[e](this.article).then(()=>{this.$message.success("\u4FDD\u5B58\u6210\u529F"),location.href="/admin/post-list"}).catch(t=>{this.$message.error("\u4FDD\u5B58\u5931\u8D25"),console.error(t)})},handleUploadImage(e,t,a){console.log(arguments),E.getUploadToken().then(n=>{const m=I().format("YYYY-MM-DD/HH-mm-ss");P(a[0],m,n).subscribe(null,null,i=>{console.log(i),t({url:`https://blog.cdn.thinkmoon.cn/${i.key}`})})})}}}),M=C(f(y({},H),{name:"editor",setup(e,{expose:t}){t();const n={customList:[{name:"thumb",value:""},{name:"desc",value:""}]};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}})),O={class:"editor-wrapper"},T=s("div",{class:"flex-1"},null,-1),z={class:"editor-container"},G={class:"custom-options"},J={class:"flex-2 right"},K=s("span",{class:"title"},"\u6587\u7AE0\u5206\u7C7B",-1),Q={class:"content"};function R(e,t,a,n,m,$){const i=r("el-input"),k=r("v-md-editor"),_=r("el-select"),h=Y,B=r("el-option");return u(),p("div",O,[T,s("div",z,[l(i,{modelValue:e.article.title,"onUpdate:modelValue":t[0]||(t[0]=o=>e.article.title=o),class:"title-input"},null,8,["modelValue"]),l(k,{modelValue:e.article.text,"onUpdate:modelValue":t[1]||(t[1]=o=>e.article.text=o),mode:"edit",height:"560px","disabled-menus":[],onSave:e.saveArticle,onUploadImage:e.handleUploadImage},null,8,["modelValue","onSave","onUploadImage"]),s("div",G,[(u(),p(b,null,U(n.customList,o=>l(i,{modelValue:o.value,"onUpdate:modelValue":c=>o.value=c,class:"input-with-select",placeholder:"Please input"},{prepend:d(()=>[l(h,null,{default:d(()=>[l(_,{modelValue:o.name,"onUpdate:modelValue":c=>o.name=c,disabled:"",placeholder:"Select",style:{width:"115px"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])),64))])]),s("div",J,[s("section",null,[K,s("div",Q,[l(h,null,{default:d(()=>[l(_,{key:"category",modelValue:e.article.category_id,"onUpdate:modelValue":t[2]||(t[2]=o=>e.article.category_id=o)},{default:d(()=>[(u(!0),p(b,null,U(e.categoryList,o=>(u(),j(B,{key:o.mid,label:o.name,value:o.mid},{default:d(()=>[q(N(o.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})])])])])}var Z=w(M,[["render",R]]);export{Z as default};
