var O=Object.defineProperty,S=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var v=(e,t,a)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,r=(e,t)=>{for(var a in t||(t={}))E.call(t,a)&&v(e,a,t[a]);if(g)for(var a of g(t))I.call(t,a)&&v(e,a,t[a]);return e},y=(e,t)=>S(e,w(t));import{_ as L,d as C,P as f,C as P,a as Y,b as j,u as q,r as u,o as l,c as d,e as s,f as n,F as c,g as V,w as p,h as N,t as b,i as H,j as M}from"./entry-5a8e0a3e.mjs";const $=[{name:"thumb",value:""},{name:"desc",value:""}],T=C({data(){return{article:{title:"",text:"",category_id:"",customOptions:$},categoryList:[]}},activated(){this.$route.query.cid?f.getDetail({cid:this.$route.query.cid}).then(e=>{this.article=r(r({},this.article),e)}):this.data={},this.getCategory()},methods:{getCategory(){P.getCategory().then(e=>{this.categoryList=e})},saveArticle(){const e=this.$route.query.cid?"update":"add";if(!this.article.category_id)return this.$message.error("\u8BF7\u9009\u62E9\u6587\u7AE0\u5206\u7C7B");f[e](this.article).then(()=>{this.$message.success("\u4FDD\u5B58\u6210\u529F"),location.href="/admin/post-list"}).catch(t=>{this.$message.error("\u4FDD\u5B58\u5931\u8D25"),console.error(t)})},handleUploadImage(e,t,a){console.log(arguments),Y.getUploadToken().then(m=>{const _=j().format("YYYY-MM-DD/HH-mm-ss");q(a[0],_,m).subscribe(null,null,i=>{t({url:`https://blog.cdn.thinkmoon.cn/${i.key}`})})})}}}),x=C(y(r({},T),{__name:"editor",setup(e,{expose:t}){t();const a={customOptions:$};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}})),z={class:"editor-wrapper"},G=s("div",{class:"flex-1"},null,-1),J={class:"editor-container"},K={class:"custom-options"},Q={class:"flex-2 right"},R=s("span",{class:"title"},"\u6587\u7AE0\u5206\u7C7B",-1),W={class:"content"};function X(e,t,a,m,_,k){const i=u("el-input"),U=u("v-md-editor"),B=u("el-option"),D=u("el-select"),A=N;return l(),d("div",z,[G,s("div",J,[n(i,{modelValue:e.article.title,"onUpdate:modelValue":t[0]||(t[0]=o=>e.article.title=o),class:"title-input"},null,8,["modelValue"]),n(U,{modelValue:e.article.text,"onUpdate:modelValue":t[1]||(t[1]=o=>e.article.text=o),mode:"edit",height:"560px","disabled-menus":[],onSave:e.saveArticle,onUploadImage:e.handleUploadImage},null,8,["modelValue","onSave","onUploadImage"]),s("div",K,[(l(!0),d(c,null,V(e.article.customOptions,(o,h)=>(l(),d(c,{key:o.name},[s("span",null,b(o.name),1),n(i,{modelValue:e.article.customOptions[h].value,"onUpdate:modelValue":F=>e.article.customOptions[h].value=F,type:"textarea",class:"input-with-select",placeholder:"Please input"},null,8,["modelValue","onUpdate:modelValue"])],64))),128))])]),s("div",Q,[s("section",null,[R,s("div",W,[n(A,null,{default:p(()=>[n(D,{key:"category",modelValue:e.article.category_id,"onUpdate:modelValue":t[2]||(t[2]=o=>e.article.category_id=o)},{default:p(()=>[(l(!0),d(c,null,V(e.categoryList,o=>(l(),H(B,{key:o.mid,label:o.name,value:o.mid},{default:p(()=>[M(b(o.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})])])])])}var te=L(x,[["render",X]]);export{te as default};
