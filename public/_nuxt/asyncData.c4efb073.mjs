import{G as x,H as k,I as w,J as O,s as g,K as z,L as B,u as I}from"./entry.04a0bf06.mjs";const M=()=>null;function E(...o){var y,p,h,v,m,D,_;const l=typeof o[o.length-1]=="string"?o.pop():void 0;typeof o[0]!="string"&&o.unshift(l);let[t,f,e={}]=o;if(typeof t!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof f!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");e.server=(y=e.server)!=null?y:!0,e.default=(p=e.default)!=null?p:M,e.defer&&console.warn("[useAsyncData] `defer` has been renamed to `lazy`. Support for `defer` will be removed in RC."),e.lazy=(v=(h=e.lazy)!=null?h:e.defer)!=null?v:!1,e.initialCache=(m=e.initialCache)!=null?m:!0;const a=x(),i=B();if(i&&!i._nuxtOnBeforeMountCbs){const s=i._nuxtOnBeforeMountCbs=[];i&&(k(()=>{s.forEach(r=>{r()}),s.splice(0,s.length)}),w(()=>s.splice(0,s.length)))}const u=()=>e.initialCache&&a.payload.data[t]!==void 0,n={data:O((D=a.payload.data[t])!=null?D:e.default()),pending:g(!u()),error:g((_=a.payload._errors[t])!=null?_:null)};n.refresh=(s={})=>a._asyncDataPromises[t]?a._asyncDataPromises[t]:s._initial&&u()?a.payload.data[t]:(n.pending.value=!0,a._asyncDataPromises[t]=new Promise((r,C)=>{try{r(f(a))}catch(P){C(P)}}).then(r=>{e.transform&&(r=e.transform(r)),e.pick&&(r=R(r,e.pick)),n.data.value=r,n.error.value=null}).catch(r=>{n.error.value=r,n.data.value=I(e.default())}).finally(()=>{n.pending.value=!1,a.payload.data[t]=n.data.value,n.error.value&&(a.payload._errors[t]=!0),delete a._asyncDataPromises[t]}),a._asyncDataPromises[t]);const c=()=>n.refresh({_initial:!0}),b=e.server!==!1&&a.payload.serverRendered;{b&&a.isHydrating&&t in a.payload.data?n.pending.value=!1:i&&a.payload.serverRendered&&(a.isHydrating||e.lazy)?i._nuxtOnBeforeMountCbs.push(c):c(),e.watch&&z(e.watch,()=>n.refresh());const s=a.hook("app:data:refresh",r=>{if(!r||r.includes(t))return n.refresh()});i&&w(s)}const d=Promise.resolve(a._asyncDataPromises[t]).then(()=>n);return Object.assign(d,n),d}function R(o,l){const t={};for(const f of l)t[f]=o[f];return t}export{E as u};
