var A=Object.defineProperty,L=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var h=(e,t,a)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,g=(e,t)=>{for(var a in t||(t={}))S.call(t,a)&&h(e,a,t[a]);if(_)for(var a of _(t))w.call(t,a)&&h(e,a,t[a]);return e},y=(e,t)=>L(e,F(t));import{_ as x,d as b,P as v,C as E,a as I,b as P,u as Y,r as u,o as i,c as d,e as l,f as r,F as c,g as f,w as p,h as j,t as V,i as q,j as N}from"./entry-cd04a22c.mjs";const H=b({data(){return{article:{title:"",text:"",category_id:""},categoryList:[]}},activated(){this.$route.query.cid?v.getDetail({cid:this.$route.query.cid}).then(e=>{this.article=e}):this.data={},this.getCategory()},methods:{getCategory(){E.getCategory().then(e=>{this.categoryList=e})},saveArticle(){const e=this.$route.query.cid?"update":"add";if(!this.article.category_id)return this.$message.error("\u8BF7\u9009\u62E9\u6587\u7AE0\u5206\u7C7B");v[e](this.article).then(()=>{this.$message.success("\u4FDD\u5B58\u6210\u529F"),location.href="/admin/post-list"}).catch(t=>{this.$message.error("\u4FDD\u5B58\u5931\u8D25"),console.error(t)})},handleUploadImage(e,t,a){console.log(arguments),I.getUploadToken().then(s=>{const m=P().format("YYYY-MM-DD/HH-mm-ss");Y(a[0],m,s).subscribe(null,null,n=>{console.log(n),t({url:`https://blog.cdn.thinkmoon.cn/${n.key}`})})})}}}),M=b(y(g({},H),{__name:"editor",setup(e,{expose:t}){t();const s={customList:[{name:"thumb",value:""},{name:"desc",value:""}]};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}})),O={class:"editor-wrapper"},T=l("div",{class:"flex-1"},null,-1),z={class:"editor-container"},G={class:"custom-options"},J={class:"flex-2 right"},K=l("span",{class:"title"},"\u6587\u7AE0\u5206\u7C7B",-1),Q={class:"content"};function R(e,t,a,s,m,k){const n=u("el-input"),C=u("v-md-editor"),U=u("el-option"),$=u("el-select"),B=j;return i(),d("div",O,[T,l("div",z,[r(n,{modelValue:e.article.title,"onUpdate:modelValue":t[0]||(t[0]=o=>e.article.title=o),class:"title-input"},null,8,["modelValue"]),r(C,{modelValue:e.article.text,"onUpdate:modelValue":t[1]||(t[1]=o=>e.article.text=o),mode:"edit",height:"560px","disabled-menus":[],onSave:e.saveArticle,onUploadImage:e.handleUploadImage},null,8,["modelValue","onSave","onUploadImage"]),l("div",G,[(i(),d(c,null,f(s.customList,o=>(i(),d(c,{key:o.key},[l("span",null,V(o.name),1),r(n,{modelValue:o.value,"onUpdate:modelValue":D=>o.value=D,type:"textarea",class:"input-with-select",placeholder:"Please input"},null,8,["modelValue","onUpdate:modelValue"])],64))),64))])]),l("div",J,[l("section",null,[K,l("div",Q,[r(B,null,{default:p(()=>[r($,{key:"category",modelValue:e.article.category_id,"onUpdate:modelValue":t[2]||(t[2]=o=>e.article.category_id=o)},{default:p(()=>[(i(!0),d(c,null,f(e.categoryList,o=>(i(),q(U,{key:o.mid,label:o.name,value:o.mid},{default:p(()=>[N(V(o.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})])])])])}var Z=x(M,[["render",R]]);export{Z as default};
