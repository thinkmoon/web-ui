var F=Object.defineProperty,S=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var k=(e,t,l)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,u=(e,t)=>{for(var l in t||(t={}))I.call(t,l)&&k(e,l,t[l]);if(b)for(var l of b(t))P.call(t,l)&&k(e,l,t[l]);return e},C=(e,t)=>S(e,w(t));import{_ as Y,d as B,P as T,T as j,C as q,a as N,b as H,u as M,r as c,o,c as r,e as s,f as n,F as p,g as m,w as i,h as O,t as g,i as U,j as $}from"./entry-c2d227f6.mjs";const A=[{name:"thumb",value:""},{name:"desc",value:""}],z=B({data(){return{article:{title:"",text:"",category_id:"",tag:[],selectedTag:[],fields:A},categoryList:[],tagList:[]}},activated(){this.$route.query.cid?T.getDetail({cid:this.$route.query.cid}).then(e=>{this.article=u(u({},this.article),e),this.article.selectedTag=this.article.tag.map(t=>t.tid)}):this.data={},this.getCategory(),this.getTag()},methods:{getTag(){j.getTag().then(e=>{this.tagList=e})},getCategory(){q.getCategory().then(e=>{this.categoryList=e})},saveArticle(){const e=this.$route.query.cid?"update":"add";if(!this.article.category_id)return this.$message.error("\u8BF7\u9009\u62E9\u6587\u7AE0\u5206\u7C7B");T[e](this.article).then(()=>{this.$message.success("\u4FDD\u5B58\u6210\u529F"),location.href="/admin/post-list"}).catch(t=>{this.$message.error("\u4FDD\u5B58\u5931\u8D25"),console.error(t)})},handleUploadImage(e,t,l){console.log(arguments),N.getUploadToken().then(_=>{const h=H().format("YYYY-MM-DD/HH-mm-ss");M(l[0],h,_).subscribe(null,null,d=>{t({url:`https://blog.cdn.thinkmoon.cn/${d.key}`})})})}}}),G=B(C(u({},z),{__name:"editor",setup(e,{expose:t}){t();const l={fields:A};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}})),J={class:"editor-wrapper"},K=s("div",{class:"flex-1"},null,-1),Q={class:"editor-container"},R={class:"custom-options"},W={class:"flex-2 right"},X=s("span",{class:"title"},"\u6587\u7AE0\u5206\u7C7B",-1),Z={class:"content"},x=s("span",{class:"title"},"\u6587\u7AE0\u6807\u7B7E",-1),ee={class:"content"};function te(e,t,l,_,h,D){const d=c("el-input"),L=c("v-md-editor"),f=c("el-option"),v=c("el-select"),y=O;return o(),r("div",J,[K,s("div",Q,[n(d,{modelValue:e.article.title,"onUpdate:modelValue":t[0]||(t[0]=a=>e.article.title=a),class:"title-input"},null,8,["modelValue"]),n(L,{modelValue:e.article.text,"onUpdate:modelValue":t[1]||(t[1]=a=>e.article.text=a),mode:"edit",height:"560px","disabled-menus":[],onSave:e.saveArticle,onUploadImage:e.handleUploadImage},null,8,["modelValue","onSave","onUploadImage"]),s("div",R,[(o(!0),r(p,null,m(e.article.fields,(a,V)=>(o(),r(p,{key:a.name},[s("span",null,g(a.name),1),n(d,{modelValue:e.article.fields[V].value,"onUpdate:modelValue":E=>e.article.fields[V].value=E,type:"textarea",class:"input-with-select",placeholder:"Please input"},null,8,["modelValue","onUpdate:modelValue"])],64))),128))])]),s("div",W,[s("section",null,[X,s("div",Z,[n(y,null,{default:i(()=>[n(v,{key:"category",modelValue:e.article.category_id,"onUpdate:modelValue":t[2]||(t[2]=a=>e.article.category_id=a)},{default:i(()=>[(o(!0),r(p,null,m(e.categoryList,a=>(o(),U(f,{key:a.mid,label:a.name,value:a.mid},{default:i(()=>[$(g(a.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})])]),s("section",null,[x,s("div",ee,[n(y,null,{default:i(()=>[n(v,{key:"category",modelValue:e.article.selectedTag,"onUpdate:modelValue":t[3]||(t[3]=a=>e.article.selectedTag=a),filterable:"",multiple:""},{default:i(()=>[(o(!0),r(p,null,m(e.tagList,a=>(o(),U(f,{key:a.tid,label:a.name,value:a.tid},{default:i(()=>[$(g(a.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})])])])])}var se=Y(G,[["render",te]]);export{se as default};
