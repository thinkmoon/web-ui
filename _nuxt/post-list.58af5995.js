import"./index.dc12899f.js";import{a as Y,bG as B,M as D,K as T,A as y,o as f,b as _,f as t,w as o,F as A,h as M,c as P,m as g,t as s,e as m,u as h}from"./entry.f3822895.js";import{f as b}from"./TimeUtils.ff456ed1.js";import{l as r}from"./index.09d2fd4b.js";const $=Y({__name:"post-list",setup(H){const w=B(),d=D([]),a=T({total:0,index:0,size:10});c();function c(){y.getList({current:a.index,size:a.size}).then(l=>{d.value=l.records,d.value.forEach(i=>{if(i.fields instanceof Array){const n={};i.fields.forEach(u=>{n[u.name]=u.value}),i.fields=n}}),a.index=l.current,a.total=l.total})}function x(l){a.size=l,c()}function E(l){a.index=l,c()}function C(l,i){w.push(`/admin/editor?cid=${i.cid}`)}return(l,i)=>{const n=r.ElTableColumn,u=r.ElImage,F=r.ElTag,z=r.ElLink,v=r.ElTable,k=r.ElPagination;return f(),_("div",null,[t(v,{data:d.value,height:"960",stripe:""},{default:o(()=>[t(n,{prop:"cid",label:"\u5E8F\u53F7",width:"80",align:"center"}),t(n,{label:"\u7F29\u7565\u56FE",prop:"title",width:"100"},{default:o(e=>[t(u,{src:e.row.fields.thumb,fit:"cover",style:{width:"180px",height:"60px"}},null,8,["src"])]),_:1}),t(n,{label:"\u6807\u7B7E",prop:"title",width:"160"},{default:o(e=>[(f(!0),_(A,null,M(e.row.tag,p=>(f(),P(F,{key:p.tid,class:"margin-xs"},{default:o(()=>[g(s(p.name),1)]),_:2},1024))),128))]),_:1}),t(n,{prop:"title",label:"\u6807\u9898",width:"320"},{default:o(e=>[t(z,{onClick:p=>C(e.$index,e.row)},{default:o(()=>[m("strong",null,s(e.row.title),1)]),_:2},1032,["onClick"])]),_:1}),t(n,{prop:"desc",label:"\u6458\u8981",width:"600"},{default:o(e=>[g(s(e.row.fields.desc),1)]),_:1}),t(n,{prop:"created",label:"\u521B\u5EFA\u65F6\u95F4",width:"110"},{default:o(e=>[m("span",null,s(h(b)(e.row.created*1e3,"YYYY/MM/DD HH:mm:ss")),1)]),_:1}),t(n,{prop:"modified",label:"\u66F4\u65B0\u65F6\u95F4",width:"110"},{default:o(e=>[m("span",null,s(h(b)(e.row.modified*1e3,"YYYY/MM/DD HH:mm:ss")),1)]),_:1})]),_:1},8,["data"]),t(k,{currentPage:a.index,"onUpdate:currentPage":i[0]||(i[0]=e=>a.index=e),"page-sizes":[10,20,30,40],"page-size":a.size,layout:"total, sizes, prev, pager, next, jumper",total:a.total,onSizeChange:x,onCurrentChange:E},null,8,["currentPage","page-size","total"])])}}});export{$ as default};
