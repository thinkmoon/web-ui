import{A as Y}from"./ArticleApi.4c94f825.js";import{f as g}from"./TimeUtils.01f2e14c.js";import{a as B,bA as D,f as A,r as y,b as h,j as t,w as o,u as f,p as r,o as m,F as H,k as M,c as N,t as x,x as s,i as _}from"./entry.49b52dd6.js";import"./RequestAdapter.4aba6fdd.js";import"./cookie.adc3aa34.js";import"./config.cd635be5.js";const R=B({__name:"post-list",setup(P){const w=D(),d=A([]),a=y({total:0,index:0,size:10});c();function c(){Y.getList({current:a.index,size:a.size}).then(l=>{d.value=l.records,d.value.forEach(i=>{if(i.fields instanceof Array){const n={};i.fields.forEach(u=>{n[u.name]=u.value}),i.fields=n}}),a.index=l.current,a.total=l.total})}function b(l){a.size=l,c()}function F(l){a.index=l,c()}function z(l,i){w.push(`/admin/article-editor?cid=${i.cid}`)}return(l,i)=>{const n=r("el-table-column"),u=r("el-image"),C=r("el-tag"),k=r("el-link"),v=r("el-table"),E=r("el-pagination");return m(),h("div",null,[t(v,{data:f(d),height:"640",stripe:""},{default:o(()=>[t(n,{prop:"cid",label:"\u5E8F\u53F7",width:"80",align:"center"}),t(n,{label:"\u7F29\u7565\u56FE",prop:"title",width:"100"},{default:o(e=>[t(u,{src:e.row.fields.thumb,fit:"cover",style:{width:"180px",height:"60px"}},null,8,["src"])]),_:1}),t(n,{label:"\u6807\u7B7E",prop:"title",width:"160"},{default:o(e=>[(m(!0),h(H,null,M(e.row.tag,p=>(m(),N(C,{key:p.tid,class:"margin-xs"},{default:o(()=>[x(s(p.name),1)]),_:2},1024))),128))]),_:1}),t(n,{prop:"title",label:"\u6807\u9898",width:"320"},{default:o(e=>[t(k,{onClick:p=>z(e.$index,e.row)},{default:o(()=>[_("strong",null,s(e.row.title),1)]),_:2},1032,["onClick"])]),_:1}),t(n,{prop:"desc",label:"\u6458\u8981"},{default:o(e=>[x(s(e.row.fields.desc),1)]),_:1}),t(n,{prop:"created",label:"\u521B\u5EFA\u65F6\u95F4",width:"110"},{default:o(e=>[_("span",null,s(f(g)(e.row.created*1e3,"YYYY/MM/DD HH:mm:ss")),1)]),_:1}),t(n,{prop:"modified",label:"\u66F4\u65B0\u65F6\u95F4",width:"110"},{default:o(e=>[_("span",null,s(f(g)(e.row.modified*1e3,"YYYY/MM/DD HH:mm:ss")),1)]),_:1})]),_:1},8,["data"]),t(E,{currentPage:a.index,"onUpdate:currentPage":i[0]||(i[0]=e=>a.index=e),"page-sizes":[10,20,30,40],"page-size":a.size,layout:"total, sizes, prev, pager, next, jumper",total:a.total,onSizeChange:b,onCurrentChange:F},null,8,["currentPage","page-size","total"])])}}});export{R as default};
