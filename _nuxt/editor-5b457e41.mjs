var C=Object.defineProperty,k=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var p=(e,t,o)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,m=(e,t)=>{for(var o in t||(t={}))D.call(t,o)&&p(e,o,t[o]);if(c)for(var o of c(t))U.call(t,o)&&p(e,o,t[o]);return e},_=(e,t)=>k(e,B(t));import{_ as A,d as v,P as g,C as F,a as S,b as E,u as I,r,o as n,c as h,e as s,f as i,w as y,F as L,g as Y,h as q,i as w,t as N}from"./entry-0297ab24.mjs";const P=v({data(){return{article:{title:"",text:"",category_id:""},categoryList:[]}},activated(){this.$route.query.cid?g.getDetail({cid:this.$route.query.cid}).then(e=>{this.article=e}):this.data={},this.getCategory()},methods:{getCategory(){F.getCategory().then(e=>{this.categoryList=e})},saveArticle(){let e=this.$route.query.cid?"update":"add";if(!this.article.category_id)return this.$message.error("\u8BF7\u9009\u62E9\u6587\u7AE0\u5206\u7C7B");g[e](this.article).then(()=>{this.$message.success("\u4FDD\u5B58\u6210\u529F"),location.href="/admin/post-list"}).catch(t=>{this.$message.error("\u4FDD\u5B58\u5931\u8D25"),console.error(t)})},handleUploadImage(e,t,o){console.log(arguments),S.getUploadToken().then(d=>{let u=E().format("YYYY-MM-DD/HH-mm-ss");I(o[0],u,d).subscribe(null,null,l=>{console.log(l),t({url:`https://blog.cdn.thinkmoon.cn/${l.key}`})})})}}}),j=v(_(m({},P),{setup(e,{expose:t}){t();const o={};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}})),x={class:"editor-wrapper"},H=s("div",{class:"flex-1"},null,-1),M={class:"editor-container"},T={class:"flex-2 right"},O=s("span",{class:"title"},"\u6587\u7AE0\u5206\u7C7B",-1),z={class:"content"};function G(e,t,o,d,u,f){const l=r("el-input"),b=r("v-md-editor"),V=r("el-option"),$=r("el-select");return n(),h("div",x,[H,s("div",M,[i(l,{class:"title-input",modelValue:e.article.title,"onUpdate:modelValue":t[0]||(t[0]=a=>e.article.title=a)},null,8,["modelValue"]),i(b,{modelValue:e.article.text,"onUpdate:modelValue":t[1]||(t[1]=a=>e.article.text=a),mode:"edit",height:"560px",onSave:e.saveArticle,"disabled-menus":[],onUploadImage:e.handleUploadImage},null,8,["modelValue","onSave","onUploadImage"])]),s("div",T,[s("section",null,[O,s("div",z,[i($,{modelValue:e.article.category_id,"onUpdate:modelValue":t[2]||(t[2]=a=>e.article.category_id=a),key:"category"},{default:y(()=>[(n(!0),h(L,null,Y(e.categoryList,a=>(n(),q(V,{value:a.mid,key:a.mid,label:a.name},{default:y(()=>[w(N(a.name),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])])])])])}var Q=A(j,[["render",G]]);export{Q as default};
