import{_ as Mn}from"./client-only.271ca260.js";import{e as In,r as Ln,a as ae,f as qt,h as Pn,b as _t,i as ht,j as ft,w as pt,F as zt,k as te,u as ct,l as Ce,v as Ee,m as Dn,p as Ct,q as kn,s as Rn,o as yt,c as Te,t as we,x as ee,y as Bn,z as Fn,A as Un,B as zn}from"./entry.ed554bfa.js";import{C as Hn}from"./CategoryApi.651f7d43.js";import{T as Wn}from"./TagApi.d0366aff.js";import{A as Oe}from"./ArticleApi.0c9d1603.js";import{d as Gn}from"./RequestAdapter.d4e558db.js";import{r as Vn,H as Pe,j as $n,g as Nn}from"./javascript.092a0508.js";import"./cookie.e3230707.js";import"./config.768af165.js";const De=In("article",()=>{const c=Ln({category_id:"",selectedTag:[],fields:[{name:"thumb",value:"",rows:2},{name:"desc",value:"",rows:6}]});function l(i){console.log(i),this.article.fields.length&&(c.fields=i.fields),c.category_id=i.category_id,c.selectedTag=i.selectedTag}return{article:c,setArticle:l}}),ke=c=>(kn("data-v-d3d83a7c"),c=c(),Rn(),c),Kn=ke(()=>ht("span",{class:"title"},"\u6587\u7AE0\u5206\u7C7B",-1)),Xn={class:"content"},Yn=ke(()=>ht("span",{class:"title"},"\u6587\u7AE0\u6807\u7B7E",-1)),Jn={class:"content"},Zn={class:"custom-options"},Qn=ae({__name:"EditorRight",setup(c){const l=De(),i=qt(!1),s=qt([]),e=qt([]);async function t(){s.value=await Wn.getTag()}async function o(){e.value=await Hn.getCategory()}return Pn(()=>{o(),t()}),(u,r)=>{const a=Ct("el-option"),n=Ct("el-select"),b=Mn,C=Ct("el-input"),_=Ct("icon-arrow-left"),A=Ct("el-icon"),M=Ct("icon-arrow-right");return yt(),_t("div",{class:"right",style:Dn({right:ct(i)?"-220px":"-20px"})},[ht("section",null,[Kn,ht("div",Xn,[ft(b,null,{default:pt(()=>[ft(n,{key:"category",modelValue:ct(l).article.category_id,"onUpdate:modelValue":r[0]||(r[0]=m=>ct(l).article.category_id=m)},{default:pt(()=>[(yt(!0),_t(zt,null,te(ct(e),m=>(yt(),Te(a,{key:m.mid,label:m.name,value:m.mid},{default:pt(()=>[we(ee(m.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})])]),ht("section",null,[Yn,ht("div",Jn,[ft(b,null,{default:pt(()=>[ft(n,{key:"category",modelValue:ct(l).article.selectedTag,"onUpdate:modelValue":r[1]||(r[1]=m=>ct(l).article.selectedTag=m),filterable:"",multiple:""},{default:pt(()=>[(yt(!0),_t(zt,null,te(ct(s),m=>(yt(),Te(a,{key:m.tid,label:m.name,value:m.tid},{default:pt(()=>[we(ee(m.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})])]),ht("div",Zn,[(yt(!0),_t(zt,null,te(ct(l).article.fields,(m,y)=>(yt(),_t(zt,{key:m.name},[ht("span",null,ee(m.name),1),ft(C,{modelValue:ct(l).article.fields[y].value,"onUpdate:modelValue":h=>ct(l).article.fields[y].value=h,type:"textarea",rows:"6",class:"input-with-select",placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue","onUpdate:modelValue"])],64))),128))]),ht("div",{class:"operate-bar",onClick:r[2]||(r[2]=m=>i.value=!ct(i))},[Ce(ft(A,null,{default:pt(()=>[ft(_)]),_:1},512),[[Ee,ct(i)]]),Ce(ft(A,null,{default:pt(()=>[ft(M)]),_:1},512),[[Ee,!ct(i)]])])],4)}}});const qn=Bn(Qn,[["__scopeId","data-v-d3d83a7c"]]);class tr{static getUploadToken(){return Gn({method:"get",url:"/attachment/upload_code"})}}var Re={exports:{}};(function(c,l){(function(s,e){c.exports=e(Vn)})(typeof self<"u"?self:Fn,function(i){return function(s){var e={};function t(o){if(e[o])return e[o].exports;var u=e[o]={i:o,l:!1,exports:{}};return s[o].call(u.exports,u,u.exports,t),u.l=!0,u.exports}return t.m=s,t.c=e,t.d=function(o,u,r){t.o(o,u)||Object.defineProperty(o,u,{enumerable:!0,get:r})},t.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},t.t=function(o,u){if(u&1&&(o=t(o)),u&8||u&4&&typeof o=="object"&&o&&o.__esModule)return o;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:o}),u&2&&typeof o!="string")for(var a in o)t.d(r,a,function(n){return o[n]}.bind(null,a));return r},t.n=function(o){var u=o&&o.__esModule?function(){return o.default}:function(){return o};return t.d(u,"a",u),u},t.o=function(o,u){return Object.prototype.hasOwnProperty.call(o,u)},t.p="",t(t.s=108)}([function(s,e){s.exports=i},function(s,e,t){t.d(e,"a",function(){return o}),t.d(e,"b",function(){return u}),t.d(e,"c",function(){return r}),t.d(e,"d",function(){return a}),t.d(e,"e",function(){return n}),t.d(e,"f",function(){return b}),t.d(e,"g",function(){return C}),t.d(e,"h",function(){return _}),t.d(e,"i",function(){return A}),t.d(e,"j",function(){return M}),t.d(e,"k",function(){return m}),t.d(e,"l",function(){return y}),t.d(e,"m",function(){return h}),t.d(e,"n",function(){return d}),t.d(e,"o",function(){return f}),t.d(e,"p",function(){return g}),t.d(e,"q",function(){return p}),t.d(e,"r",function(){return F}),t.d(e,"s",function(){return z}),t.d(e,"t",function(){return H}),t.d(e,"u",function(){return N}),t.d(e,"v",function(){return G});var o="bold",u="clear",r="code",a="fullscreen",n="h1",b="h2",C="h3",_="h4",A="h5",M="h6",m="hr",y="image",h="italic",d="link",f="ol",g="quote",p="redo",F="strikethrough",z="sync-scroll",H="table",N="ul",G="undo"},function(s,e,t){t.d(e,"f",function(){return u}),t.d(e,"a",function(){return a}),t.d(e,"c",function(){return n}),t.d(e,"d",function(){return b}),t.d(e,"e",function(){return C}),t.d(e,"b",function(){return _});var o=Object.prototype.toString,u=function(M){return o.call(M)==="[object Object]"};function r(A,M){return Object.keys(M).forEach(function(m){A[m]=M[m]}),A}function a(A){for(var M={},m=0;m<A.length;m++)A[m]&&r(M,A[m]);return M}function n(A,M){M.keys().forEach(function(m){A[m]=M(m)})}var b=typeof window<"u";function C(A){var M=/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi;return M.test(A)}function _(A){var M=A.selected,m=A.InsertGetter,y=A.selectedGetter,h=y===void 0?function(F){return F}:y,d=A.ignoreEmptyLine,f=d===void 0?!0:d,g,p;return M?(p=h(M),g=m(M,1),M.indexOf(`
`)!==-1&&(g=M.split(`
`).map(function(F,z){var H=!F;return f&&H?"":m(F,z+1).replace(h(null),"")}).join(`
`),p=g)):(g=m(null,1),p=h(M)),{insertContent:g,newSelected:p}}},function(s,e,t){t.d(e,"c",function(){return o}),t.d(e,"b",function(){return u}),t.d(e,"a",function(){return r});var o="data-v-md-line",u="data-v-md-heading",r="data-v-md-anchor"},function(s,e,t){e.a={PREVIEW:"preview",EDITABLE:"editable",EDIT:"edit"}},function(s,e,t){t.d(e,"a",function(){return o});function o(){return o=Object.assign||function(u){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(u[n]=a[n])}return u},o.apply(this,arguments)}},function(s,e,t){t.d(e,"a",function(){return o}),t.d(e,"b",function(){return u});function o(r){var a=0;return r===window?a=r.pageYOffset:r&&(a=r.scrollTop),a}function u(r,a){r===window?window.scrollTo(window.pageYOffset,a):r&&(r.scrollTop=a)}},function(s,e,t){var o=t(5),u=t(11),r=t.n(u),a={svg:[],altGlyph:[],altGlyphDef:[],altGlyphItem:[],animate:[],animateColor:[],animateMotion:[],animateTransform:[],circle:[],clipPath:[],"color-profile":[],cursor:[],"definition-src":[],defs:[],desc:[],ellipse:[],feBlend:[],feColorMatrix:[],feComponentTransfer:[],feComposite:[],feConvolveMatrix:[],feDiffuseLighting:[],feDisplacementMap:[],feDistantLight:[],feFlood:[],feFuncA:[],feFuncB:[],feFuncG:[],feFuncR:[],feGaussianBlur:[],feImage:[],feMerge:[],feMergeNode:[],feMorphology:[],feOffset:[],fePointLight:[],feSpecularLighting:[],feSpotLight:[],feTile:[],feTurbulence:[],filter:[],font:[],foreignObject:[],g:[],glyph:[],glyphRef:[],hkern:[],image:[],line:[],linearGradient:[],marker:[],mask:[],metadata:[],"missing-glyph":[],mpath:[],path:[],pattern:[],polygon:[],polyline:[],radialGradient:[],rect:[],set:[],stop:[],style:[],switch:[],symbol:[],text:[],textPath:[],title:[],tref:[],tspan:[],use:[],view:[],vkern:[]},n={math:[],annotation:[],semantics:[],mtext:[],mn:[],mo:[],mi:[],mspace:[],mover:[],munder:[],munderover:[],msup:[],msub:[],msubsup:[],mfrac:[],mroot:[],msqrt:[],mtable:[],mtr:[],mtd:[],mlabeledtr:[],mrow:[],menclose:[],mstyle:[],mpadded:[],mphantom:[],mglyph:[]},b=["style","align","class","id"],C=["data-"],_={input:["type"],ol:["reversed","start","type"],button:["type"],summary:[]},A=Object(o.a)({},_,n,a),M={whiteList:Object(o.a)({},r.a.getDefaultWhiteList(),A),onIgnoreTagAttr:function(h,d,f){if(a[h]||n[h]||b.find(function(g){return g===d})||C.find(function(g){return d.startsWith(g)}))return d+'="'+r.a.escapeAttrValue(f)+'"'}},m=new r.a.FilterXSS(M);m.extend=function(y){var h=m.options;Object.keys(y).forEach(function(d){if(d==="whiteList")Object.keys(y.whiteList).forEach(function(g){var p=y.whiteList[g],F=h.whiteList;F[g]?F[g]=[].concat(F[g],p):F[g]=p});else if(d==="onIgnoreTagAttr"){var f=h.onIgnoreTagAttr;h.onIgnoreTagAttr=function(){for(var g,p=arguments.length,F=new Array(p),z=0;z<p;z++)F[z]=arguments[z];var H=f.call.apply(f,[this].concat(F)),N=(g=y.onIgnoreTagAttr).call.apply(g,[this].concat(F));return H||N}}else h[d]=y[d]})},e.a=m},function(s,e,t){t.d(e,"b",function(){return u}),t.d(e,"a",function(){return r});var o=t(6);function u(a){var n=a.currentScrollTop,b=a.scrollToTop,C=a.scrollFn,_=a.percent,A=_===void 0?10:_,M=a.onScrollEnd,m=b>n?"down":"up",y=(b-n)*(A/100),h,d=function f(){n+=y,m==="down"&&n>=b||m==="up"&&n<=b?(C(b),window.cancelAnimationFrame(h),M&&window.requestAnimationFrame(M)):(C(n),window.requestAnimationFrame(f))};window.requestAnimationFrame(d)}function r(a){var n=a.scrollTarget,b=a.scrollToTop,C=a.percent,_=C===void 0?10:C,A=a.onScrollEnd,M=Object(o.a)(n);u({currentScrollTop:M,scrollToTop:b,scrollFn:function(y){return Object(o.b)(n,y)},percent:_,onScrollEnd:A})}},function(s,e,t){t.r(e);var o=t(0);function u(h,d,f,g,p,F){return Object(o.openBlock)(),Object(o.createBlock)("div",{class:"v-md-editor-preview",style:{tabSize:h.tabSize,"-moz-tab-size":h.tabSize,"-o-tab-size":h.tabSize},onClick:d[1]||(d[1]=function(){return h.handlePreviewClick.apply(h,arguments)})},[Object(o.createVNode)("div",{class:[h.previewClass],innerHTML:h.html},null,10,["innerHTML"])],4)}var r=t(7),a=t(13),n=function(){function h(){this.lang=new a.a}var d=h.prototype;return d.defaultMarkdownLoader=function(g){return g},d.use=function(g,p){return typeof g=="function"?g(this,p):g.install(this,p),this},d.theme=function(g){this.themeConfig=g},d.extendMarkdown=function(g){if(!this.themeConfig)return console.error("Please use theme before using plugins");var p=this.themeConfig.markdownParser;g(p)},d.parse=function(g){var p,F=this.themeConfig.markdownParser,z=(F==null||(p=F.render)==null?void 0:p.bind(F))||this.defaultMarkdownLoader;return(typeof z!="function"||z===this.defaultMarkdownLoader)&&console.error("Please configure your markdown parser"),z(g)},h}(),b=t(16),C={name:"v-md-preview",mixins:[b.a],props:{text:{type:String,default:""},theme:Object,beforeChange:Function},emits:["change"],data:function(){return{html:""}},watch:{text:function(){this.handleTextChange()},langConfig:function(){this.handleTextChange()}},computed:{vMdParser:function(){return this.$options.vMdParser},previewClass:function(){return this.vMdParser.themeConfig.previewClass},langConfig:function(){return this.vMdParser.lang.langConfig}},created:function(){this.handleTextChange()},methods:{handleTextChange:function(){var d=this,f=function(p){d.html=r.a.process(d.$options.vMdParser.parse(p)),d.$emit("change",p,d.html)};this.beforeChange?this.beforeChange(this.text,f):f(this.text)}}},_=new n;_.lang.config=Object(o.reactive)(_.lang.config),C.vMdParser=new n;var A=C;A.render=u;var M=A;t(18);var m="2.3.15",y=function(d){d.component(M.name,M)};M.version=m,M.install=y,M.xss=r.a,M.use=function(h,d){return typeof h=="function"?h(M,d):h.install(M,d),M},e.default=M},function(s,e,t){s.exports=t(37)},function(s,e,t){var o=t(19),u=t(22),r=t(26);function a(C,_){var A=new r(_);return A.process(C)}e=s.exports=a,e.filterXSS=a,e.FilterXSS=r;for(var n in o)e[n]=o[n];for(var n in u)e[n]=u[n];typeof window<"u"&&(window.filterXSS=s.exports);function b(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}b()&&(self.filterXSS=s.exports)},function(s,e,t){t.d(e,"a",function(){return o}),t.d(e,"b",function(){return u});function o(r,a){var n=a.accept,b=Object.keys(r).filter(function(C){var _=r[C],A=_.type,M=_.name,m=M.indexOf(".")>-1?"."+M.split(".").pop():"",y=A.replace(/\/.*$/,"");return n.split(",").map(function(h){return h.trim()}).filter(function(h){return h}).some(function(h){return/\..+$/.test(h)?m===h:/\/\*$/.test(h)?y===h.replace(/\/\*$/,""):/^[^\/]+\/[^\/]+$/.test(h)?A===h:!1})});return b.map(function(C){return r[C]})}function u(r){var a=[];return Object.keys(r.items).forEach(function(n){var b=r.items[n];if(b.kind==="file"){var C=b.getAsFile();C&&a.push(C)}}),a}},function(s,e,t){t.d(e,"a",function(){return n});var o=t(2),u=Object.prototype.hasOwnProperty;function r(b,C,_){var A=C[_];A!=null&&(!u.call(b,_)||!Object(o.f)(A)?b[_]=A:b[_]=a(Object(b[_]),C[_]))}function a(b,C){return Object.keys(C).forEach(function(_){r(b,C,_)}),b}var n=function(){function b(_){_===void 0&&(_={}),this.config={lang:"zh-CN",langConfig:{"zh-CN":{}}},this.options=_}var C=b.prototype;return C.use=function(A,M){var m;this.config.lang=A,this.add((m={},m[A]=M,m)),this.options.afterUse&&this.options.afterUse(A,M)},C.add=function(A){A===void 0&&(A={}),a(this.config.langConfig,A)},b}()},function(s,e,t){var o=t(20),u=t(24);function r(n,b){var C=new u(b);return C.process(n)}e=s.exports=r,e.FilterCSS=u;for(var a in o)e[a]=o[a];typeof window<"u"&&(window.filterCSS=s.exports)},function(s,e){s.exports={indexOf:function(t,o){var u,r;if(Array.prototype.indexOf)return t.indexOf(o);for(u=0,r=t.length;u<r;u++)if(t[u]===o)return u;return-1},forEach:function(t,o,u){var r,a;if(Array.prototype.forEach)return t.forEach(o,u);for(r=0,a=t.length;r<a;r++)o.call(u,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var o=/\s|\n|\t/,u=o.exec(t);return u?u.index:-1}}},function(s,e,t){var o=t(6),u=t(8),r=t(3);e.a={props:{tabSize:{type:Number,default:2},scrollContainer:{type:Function,default:function(){return window}},top:{type:Number,default:0}},emits:["image-click"],methods:{handlePreviewClick:function(n){var b=n.target;if(b.tagName==="IMG"){var C=b.getAttribute("src");if(!C)return;var _=Array.from(this.$el.querySelectorAll("img")),A=_.map(function(h){return h.getAttribute("src")}).filter(function(h){return h}),M=_.indexOf(b);this.$emit("image-click",A,M);return}var m=b.getAttribute(r.a),y=this.$el.querySelector("["+r.b+'="'+m+'"]');y&&this.scrollToTarget({target:y})},getOffsetTop:function(n,b){var C=n.getBoundingClientRect();return b===window||b===document.documentElement?C.top:C.top-b.getBoundingClientRect().top},scrollToTarget:function(n){var b=n.target,C=n.scrollContainer,_=C===void 0?this.scrollContainer():C,A=n.top,M=A===void 0?this.top:A,m=n.onScrollEnd,y=this.getOffsetTop(b,_),h=Object(o.a)(_)+y-M;Object(u.a)({scrollTarget:_,scrollToTop:h,onScrollEnd:m})},scrollToLine:function(n){var b=n.lineIndex,C=n.onScrollEnd;if(b){var _=this.$el.querySelector("["+r.c+'="'+b+'"]');_&&this.scrollToTarget({target:_,onScrollEnd:C})}}}}},function(s,e,t){t.d(e,"a",function(){return u});function o(r,a,n,b,C,_,A){try{var M=r[_](A),m=M.value}catch(y){n(y);return}M.done?a(m):Promise.resolve(m).then(b,C)}function u(r){return function(){var a=this,n=arguments;return new Promise(function(b,C){var _=r.apply(a,n);function A(m){o(_,b,C,A,M,"next",m)}function M(m){o(_,b,C,A,M,"throw",m)}A(void 0)})}}},function(s,e,t){},function(s,e,t){var o=t(14).FilterCSS,u=t(14).getDefaultWhiteList,r=t(15);function a(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var n=new o;function b(E,O,S){}function C(E,O,S){}function _(E,O,S){}function A(E,O,S){}function M(E){return E.replace(y,"&lt;").replace(h,"&gt;")}function m(E,O,S,R){if(S=j(S),O==="href"||O==="src"){if(S=r.trim(S),S==="#")return"#";if(!(S.substr(0,7)==="http://"||S.substr(0,8)==="https://"||S.substr(0,7)==="mailto:"||S.substr(0,4)==="tel:"||S.substr(0,11)==="data:image/"||S.substr(0,6)==="ftp://"||S.substr(0,2)==="./"||S.substr(0,3)==="../"||S[0]==="#"||S[0]==="/"))return""}else if(O==="background"){if(z.lastIndex=0,z.test(S))return""}else if(O==="style"){if(H.lastIndex=0,H.test(S)||(N.lastIndex=0,N.test(S)&&(z.lastIndex=0,z.test(S))))return"";R!==!1&&(R=R||n,S=R.process(S))}return S=W(S),S}var y=/</g,h=/>/g,d=/"/g,f=/&quot;/g,g=/&#([a-zA-Z0-9]*);?/gim,p=/&colon;?/gim,F=/&newline;?/gim,z=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,H=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,N=/u\s*r\s*l\s*\(.*/gi;function G(E){return E.replace(d,"&quot;")}function it(E){return E.replace(f,'"')}function J(E){return E.replace(g,function(S,R){return R[0]==="x"||R[0]==="X"?String.fromCharCode(parseInt(R.substr(1),16)):String.fromCharCode(parseInt(R,10))})}function at(E){return E.replace(p,":").replace(F," ")}function I(E){for(var O="",S=0,R=E.length;S<R;S++)O+=E.charCodeAt(S)<32?" ":E.charAt(S);return r.trim(O)}function j(E){return E=it(E),E=J(E),E=at(E),E=I(E),E}function W(E){return E=G(E),E=M(E),E}function K(){return""}function X(E,O){typeof O!="function"&&(O=function(){});var S=!Array.isArray(E);function R(Y){return S?!0:r.indexOf(E,Y)!==-1}var U=[],$=!1;return{onIgnoreTag:function(Y,Z,tt){if(R(Y))if(tt.isClosing){var nt="[/removed]",vt=tt.position+nt.length;return U.push([$!==!1?$:tt.position,vt]),$=!1,nt}else return $||($=tt.position),"[removed]";else return O(Y,Z,tt)},remove:function(Y){var Z="",tt=0;return r.forEach(U,function(nt){Z+=Y.slice(tt,nt[0]),tt=nt[1]}),Z+=Y.slice(tt),Z}}}function x(E){return E.replace(P,"")}var P=/<!--[\s\S]*?-->/g;function k(E){var O=E.split("");return O=O.filter(function(S){var R=S.charCodeAt(0);return R===127?!1:R<=31?R===10||R===13:!0}),O.join("")}e.whiteList=a(),e.getDefaultWhiteList=a,e.onTag=b,e.onIgnoreTag=C,e.onTagAttr=_,e.onIgnoreTagAttr=A,e.safeAttrValue=m,e.escapeHtml=M,e.escapeQuote=G,e.unescapeQuote=it,e.escapeHtmlEntities=J,e.escapeDangerHtml5Entities=at,e.clearNonPrintableCharacter=I,e.friendlyAttrValue=j,e.escapeAttrValue=W,e.onIgnoreTagStripAll=K,e.StripTagBody=X,e.stripCommentTag=x,e.stripBlankChar=k,e.cssFilter=n,e.getDefaultCSSWhiteList=u},function(s,e){function t(){var n={};return n["align-content"]=!1,n["align-items"]=!1,n["align-self"]=!1,n["alignment-adjust"]=!1,n["alignment-baseline"]=!1,n.all=!1,n["anchor-point"]=!1,n.animation=!1,n["animation-delay"]=!1,n["animation-direction"]=!1,n["animation-duration"]=!1,n["animation-fill-mode"]=!1,n["animation-iteration-count"]=!1,n["animation-name"]=!1,n["animation-play-state"]=!1,n["animation-timing-function"]=!1,n.azimuth=!1,n["backface-visibility"]=!1,n.background=!0,n["background-attachment"]=!0,n["background-clip"]=!0,n["background-color"]=!0,n["background-image"]=!0,n["background-origin"]=!0,n["background-position"]=!0,n["background-repeat"]=!0,n["background-size"]=!0,n["baseline-shift"]=!1,n.binding=!1,n.bleed=!1,n["bookmark-label"]=!1,n["bookmark-level"]=!1,n["bookmark-state"]=!1,n.border=!0,n["border-bottom"]=!0,n["border-bottom-color"]=!0,n["border-bottom-left-radius"]=!0,n["border-bottom-right-radius"]=!0,n["border-bottom-style"]=!0,n["border-bottom-width"]=!0,n["border-collapse"]=!0,n["border-color"]=!0,n["border-image"]=!0,n["border-image-outset"]=!0,n["border-image-repeat"]=!0,n["border-image-slice"]=!0,n["border-image-source"]=!0,n["border-image-width"]=!0,n["border-left"]=!0,n["border-left-color"]=!0,n["border-left-style"]=!0,n["border-left-width"]=!0,n["border-radius"]=!0,n["border-right"]=!0,n["border-right-color"]=!0,n["border-right-style"]=!0,n["border-right-width"]=!0,n["border-spacing"]=!0,n["border-style"]=!0,n["border-top"]=!0,n["border-top-color"]=!0,n["border-top-left-radius"]=!0,n["border-top-right-radius"]=!0,n["border-top-style"]=!0,n["border-top-width"]=!0,n["border-width"]=!0,n.bottom=!1,n["box-decoration-break"]=!0,n["box-shadow"]=!0,n["box-sizing"]=!0,n["box-snap"]=!0,n["box-suppress"]=!0,n["break-after"]=!0,n["break-before"]=!0,n["break-inside"]=!0,n["caption-side"]=!1,n.chains=!1,n.clear=!0,n.clip=!1,n["clip-path"]=!1,n["clip-rule"]=!1,n.color=!0,n["color-interpolation-filters"]=!0,n["column-count"]=!1,n["column-fill"]=!1,n["column-gap"]=!1,n["column-rule"]=!1,n["column-rule-color"]=!1,n["column-rule-style"]=!1,n["column-rule-width"]=!1,n["column-span"]=!1,n["column-width"]=!1,n.columns=!1,n.contain=!1,n.content=!1,n["counter-increment"]=!1,n["counter-reset"]=!1,n["counter-set"]=!1,n.crop=!1,n.cue=!1,n["cue-after"]=!1,n["cue-before"]=!1,n.cursor=!1,n.direction=!1,n.display=!0,n["display-inside"]=!0,n["display-list"]=!0,n["display-outside"]=!0,n["dominant-baseline"]=!1,n.elevation=!1,n["empty-cells"]=!1,n.filter=!1,n.flex=!1,n["flex-basis"]=!1,n["flex-direction"]=!1,n["flex-flow"]=!1,n["flex-grow"]=!1,n["flex-shrink"]=!1,n["flex-wrap"]=!1,n.float=!1,n["float-offset"]=!1,n["flood-color"]=!1,n["flood-opacity"]=!1,n["flow-from"]=!1,n["flow-into"]=!1,n.font=!0,n["font-family"]=!0,n["font-feature-settings"]=!0,n["font-kerning"]=!0,n["font-language-override"]=!0,n["font-size"]=!0,n["font-size-adjust"]=!0,n["font-stretch"]=!0,n["font-style"]=!0,n["font-synthesis"]=!0,n["font-variant"]=!0,n["font-variant-alternates"]=!0,n["font-variant-caps"]=!0,n["font-variant-east-asian"]=!0,n["font-variant-ligatures"]=!0,n["font-variant-numeric"]=!0,n["font-variant-position"]=!0,n["font-weight"]=!0,n.grid=!1,n["grid-area"]=!1,n["grid-auto-columns"]=!1,n["grid-auto-flow"]=!1,n["grid-auto-rows"]=!1,n["grid-column"]=!1,n["grid-column-end"]=!1,n["grid-column-start"]=!1,n["grid-row"]=!1,n["grid-row-end"]=!1,n["grid-row-start"]=!1,n["grid-template"]=!1,n["grid-template-areas"]=!1,n["grid-template-columns"]=!1,n["grid-template-rows"]=!1,n["hanging-punctuation"]=!1,n.height=!0,n.hyphens=!1,n.icon=!1,n["image-orientation"]=!1,n["image-resolution"]=!1,n["ime-mode"]=!1,n["initial-letters"]=!1,n["inline-box-align"]=!1,n["justify-content"]=!1,n["justify-items"]=!1,n["justify-self"]=!1,n.left=!1,n["letter-spacing"]=!0,n["lighting-color"]=!0,n["line-box-contain"]=!1,n["line-break"]=!1,n["line-grid"]=!1,n["line-height"]=!1,n["line-snap"]=!1,n["line-stacking"]=!1,n["line-stacking-ruby"]=!1,n["line-stacking-shift"]=!1,n["line-stacking-strategy"]=!1,n["list-style"]=!0,n["list-style-image"]=!0,n["list-style-position"]=!0,n["list-style-type"]=!0,n.margin=!0,n["margin-bottom"]=!0,n["margin-left"]=!0,n["margin-right"]=!0,n["margin-top"]=!0,n["marker-offset"]=!1,n["marker-side"]=!1,n.marks=!1,n.mask=!1,n["mask-box"]=!1,n["mask-box-outset"]=!1,n["mask-box-repeat"]=!1,n["mask-box-slice"]=!1,n["mask-box-source"]=!1,n["mask-box-width"]=!1,n["mask-clip"]=!1,n["mask-image"]=!1,n["mask-origin"]=!1,n["mask-position"]=!1,n["mask-repeat"]=!1,n["mask-size"]=!1,n["mask-source-type"]=!1,n["mask-type"]=!1,n["max-height"]=!0,n["max-lines"]=!1,n["max-width"]=!0,n["min-height"]=!0,n["min-width"]=!0,n["move-to"]=!1,n["nav-down"]=!1,n["nav-index"]=!1,n["nav-left"]=!1,n["nav-right"]=!1,n["nav-up"]=!1,n["object-fit"]=!1,n["object-position"]=!1,n.opacity=!1,n.order=!1,n.orphans=!1,n.outline=!1,n["outline-color"]=!1,n["outline-offset"]=!1,n["outline-style"]=!1,n["outline-width"]=!1,n.overflow=!1,n["overflow-wrap"]=!1,n["overflow-x"]=!1,n["overflow-y"]=!1,n.padding=!0,n["padding-bottom"]=!0,n["padding-left"]=!0,n["padding-right"]=!0,n["padding-top"]=!0,n.page=!1,n["page-break-after"]=!1,n["page-break-before"]=!1,n["page-break-inside"]=!1,n["page-policy"]=!1,n.pause=!1,n["pause-after"]=!1,n["pause-before"]=!1,n.perspective=!1,n["perspective-origin"]=!1,n.pitch=!1,n["pitch-range"]=!1,n["play-during"]=!1,n.position=!1,n["presentation-level"]=!1,n.quotes=!1,n["region-fragment"]=!1,n.resize=!1,n.rest=!1,n["rest-after"]=!1,n["rest-before"]=!1,n.richness=!1,n.right=!1,n.rotation=!1,n["rotation-point"]=!1,n["ruby-align"]=!1,n["ruby-merge"]=!1,n["ruby-position"]=!1,n["shape-image-threshold"]=!1,n["shape-outside"]=!1,n["shape-margin"]=!1,n.size=!1,n.speak=!1,n["speak-as"]=!1,n["speak-header"]=!1,n["speak-numeral"]=!1,n["speak-punctuation"]=!1,n["speech-rate"]=!1,n.stress=!1,n["string-set"]=!1,n["tab-size"]=!1,n["table-layout"]=!1,n["text-align"]=!0,n["text-align-last"]=!0,n["text-combine-upright"]=!0,n["text-decoration"]=!0,n["text-decoration-color"]=!0,n["text-decoration-line"]=!0,n["text-decoration-skip"]=!0,n["text-decoration-style"]=!0,n["text-emphasis"]=!0,n["text-emphasis-color"]=!0,n["text-emphasis-position"]=!0,n["text-emphasis-style"]=!0,n["text-height"]=!0,n["text-indent"]=!0,n["text-justify"]=!0,n["text-orientation"]=!0,n["text-overflow"]=!0,n["text-shadow"]=!0,n["text-space-collapse"]=!0,n["text-transform"]=!0,n["text-underline-position"]=!0,n["text-wrap"]=!0,n.top=!1,n.transform=!1,n["transform-origin"]=!1,n["transform-style"]=!1,n.transition=!1,n["transition-delay"]=!1,n["transition-duration"]=!1,n["transition-property"]=!1,n["transition-timing-function"]=!1,n["unicode-bidi"]=!1,n["vertical-align"]=!1,n.visibility=!1,n["voice-balance"]=!1,n["voice-duration"]=!1,n["voice-family"]=!1,n["voice-pitch"]=!1,n["voice-range"]=!1,n["voice-rate"]=!1,n["voice-stress"]=!1,n["voice-volume"]=!1,n.volume=!1,n["white-space"]=!1,n.widows=!1,n.width=!0,n["will-change"]=!1,n["word-break"]=!0,n["word-spacing"]=!0,n["word-wrap"]=!0,n["wrap-flow"]=!1,n["wrap-through"]=!1,n["writing-mode"]=!1,n["z-index"]=!1,n}function o(n,b,C){}function u(n,b,C){}var r=/javascript\s*\:/img;function a(n,b){return r.test(b)?"":b}e.whiteList=t(),e.getDefaultWhiteList=t,e.onAttr=o,e.onIgnoreAttr=u,e.safeAttrValue=a},function(s,e){s.exports={indexOf:function(t,o){var u,r;if(Array.prototype.indexOf)return t.indexOf(o);for(u=0,r=t.length;u<r;u++)if(t[u]===o)return u;return-1},forEach:function(t,o,u){var r,a;if(Array.prototype.forEach)return t.forEach(o,u);for(r=0,a=t.length;r<a;r++)o.call(u,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}}},function(s,e,t){var o=t(15);function u(m){var y=o.spaceIndex(m);if(y===-1)var h=m.slice(1,-1);else var h=m.slice(1,y+1);return h=o.trim(h).toLowerCase(),h.slice(0,1)==="/"&&(h=h.slice(1)),h.slice(-1)==="/"&&(h=h.slice(0,-1)),h}function r(m){return m.slice(0,2)==="</"}function a(m,y,h){var d="",f=0,g=!1,p=!1,F=0,z=m.length,H="",N="";t:for(F=0;F<z;F++){var G=m.charAt(F);if(g===!1){if(G==="<"){g=F;continue}}else if(p===!1){if(G==="<"){d+=h(m.slice(f,F)),g=F,f=F;continue}if(G===">"){d+=h(m.slice(f,g)),N=m.slice(g,F+1),H=u(N),d+=y(g,d.length,H,N,r(N)),f=F+1,g=!1;continue}if(G==='"'||G==="'")for(var it=1,J=m.charAt(F-it);J.trim()===""||J==="=";){if(J==="="){p=G;continue t}J=m.charAt(F-++it)}}else if(G===p){p=!1;continue}}return f<m.length&&(d+=h(m.substr(f))),d}var n=/[^a-zA-Z0-9_:\.\-]/gim;function b(m,y){var h=0,d=[],f=!1,g=m.length;function p(G,it){if(G=o.trim(G),G=G.replace(n,"").toLowerCase(),!(G.length<1)){var J=y(G,it||"");J&&d.push(J)}}for(var F=0;F<g;F++){var z=m.charAt(F),H,N;if(f===!1&&z==="="){f=m.slice(h,F),h=F+1;continue}if(f!==!1&&F===h&&(z==='"'||z==="'")&&m.charAt(F-1)==="="){if(N=m.indexOf(z,F+1),N===-1)break;H=o.trim(m.slice(h+1,N)),p(f,H),f=!1,F=N,h=F+1;continue}if(/\s|\n|\t/.test(z))if(m=m.replace(/\s|\n|\t/g," "),f===!1)if(N=C(m,F),N===-1){H=o.trim(m.slice(h,F)),p(H),f=!1,h=F+1;continue}else{F=N-1;continue}else if(N=_(m,F-1),N===-1){H=o.trim(m.slice(h,F)),H=M(H),p(f,H),f=!1,h=F+1;continue}else continue}return h<m.length&&(f===!1?p(m.slice(h)):p(f,M(o.trim(m.slice(h))))),o.trim(d.join(" "))}function C(m,y){for(;y<m.length;y++){var h=m[y];if(h!==" ")return h==="="?y:-1}}function _(m,y){for(;y>0;y--){var h=m[y];if(h!==" ")return h==="="?y:-1}}function A(m){return m[0]==='"'&&m[m.length-1]==='"'||m[0]==="'"&&m[m.length-1]==="'"}function M(m){return A(m)?m.substr(1,m.length-2):m}e.parseTag=a,e.parseAttr=b},function(s,e,t){t.r(e);var o=t(10),u=t.n(o),r=t(17),a=t(1),n=t(12);e.default={name:a.l,icon:"v-md-icon-img",title:function(C){return C.langConfig.image.toolbar},menus:[{name:"image-link",text:function(C){return C.langConfig.imageLink.toolbar},action:function(C,_){_!=null&&_.insertWithSize?C.execCommand(a.l,{width:"auto",height:"auto"}):C.execCommand(a.l)}},{name:"upload-image",text:function(C){return C.langConfig.uploadImage.toolbar},action:function(C){C.uploadConfig=C.uploadImgConfig,C.$nextTick(Object(r.a)(u.a.mark(function _(){var A,M;return u.a.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,C.$refs.uploadFile.upload();case 2:A=y.sent,M=Object(n.a)(A.target.files,C.uploadImgConfig),C.emitUploadImage(A,M);case 5:case"end":return y.stop()}},_)})))}}]}},function(s,e,t){var o=t(20),u=t(25);t(21);function r(b){return b==null}function a(b){var C={};for(var _ in b)C[_]=b[_];return C}function n(b){b=a(b||{}),b.whiteList=b.whiteList||o.whiteList,b.onAttr=b.onAttr||o.onAttr,b.onIgnoreAttr=b.onIgnoreAttr||o.onIgnoreAttr,b.safeAttrValue=b.safeAttrValue||o.safeAttrValue,this.options=b}n.prototype.process=function(b){if(b=b||"",b=b.toString(),!b)return"";var C=this,_=C.options,A=_.whiteList,M=_.onAttr,m=_.onIgnoreAttr,y=_.safeAttrValue,h=u(b,function(d,f,g,p,F){var z=A[g],H=!1;if(z===!0?H=z:typeof z=="function"?H=z(p):z instanceof RegExp&&(H=z.test(p)),H!==!0&&(H=!1),p=y(g,p),!!p){var N={position:f,sourcePosition:d,source:F,isWhite:H};if(H){var G=M(g,p,N);return r(G)?g+":"+p:G}else{var G=m(g,p,N);if(!r(G))return G}}});return h},s.exports=n},function(s,e,t){var o=t(21);function u(r,a){r=o.trimRight(r),r[r.length-1]!==";"&&(r+=";");var n=r.length,b=!1,C=0,_=0,A="";function M(){if(!b){var h=o.trim(r.slice(C,_)),d=h.indexOf(":");if(d!==-1){var f=o.trim(h.slice(0,d)),g=o.trim(h.slice(d+1));if(f){var p=a(C,A.length,f,g,h);p&&(A+=p+"; ")}}}C=_+1}for(;_<n;_++){var m=r[_];if(m==="/"&&r[_+1]==="*"){var y=r.indexOf("*/",_+2);if(y===-1)break;_=y+1,C=_+1,b=!1}else m==="("?b=!0:m===")"?b=!1:m===";"?b||M():m===`
`&&M()}return o.trim(A)}s.exports=u},function(s,e,t){var o=t(14).FilterCSS,u=t(19),r=t(22),a=r.parseTag,n=r.parseAttr,b=t(15);function C(m){return m==null}function _(m){var y=b.spaceIndex(m);if(y===-1)return{html:"",closing:m[m.length-2]==="/"};m=b.trim(m.slice(y+1,-1));var h=m[m.length-1]==="/";return h&&(m=b.trim(m.slice(0,-1))),{html:m,closing:h}}function A(m){var y={};for(var h in m)y[h]=m[h];return y}function M(m){m=A(m||{}),m.stripIgnoreTag&&(m.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),m.onIgnoreTag=u.onIgnoreTagStripAll),m.whiteList=m.whiteList||u.whiteList,m.onTag=m.onTag||u.onTag,m.onTagAttr=m.onTagAttr||u.onTagAttr,m.onIgnoreTag=m.onIgnoreTag||u.onIgnoreTag,m.onIgnoreTagAttr=m.onIgnoreTagAttr||u.onIgnoreTagAttr,m.safeAttrValue=m.safeAttrValue||u.safeAttrValue,m.escapeHtml=m.escapeHtml||u.escapeHtml,this.options=m,m.css===!1?this.cssFilter=!1:(m.css=m.css||{},this.cssFilter=new o(m.css))}M.prototype.process=function(m){if(m=m||"",m=m.toString(),!m)return"";var y=this,h=y.options,d=h.whiteList,f=h.onTag,g=h.onIgnoreTag,p=h.onTagAttr,F=h.onIgnoreTagAttr,z=h.safeAttrValue,H=h.escapeHtml,N=y.cssFilter;h.stripBlankChar&&(m=u.stripBlankChar(m)),h.allowCommentTag||(m=u.stripCommentTag(m));var G=!1;if(h.stripIgnoreTagBody){var G=u.StripTagBody(h.stripIgnoreTagBody,g);g=G.onIgnoreTag}var it=a(m,function(J,at,I,j,W){var K={sourcePosition:J,position:at,isClosing:W,isWhite:d.hasOwnProperty(I)},X=f(I,j,K);if(!C(X))return X;if(K.isWhite){if(K.isClosing)return"</"+I+">";var x=_(j),P=d[I],k=n(x.html,function(O,S){var R=b.indexOf(P,O)!==-1,U=p(I,O,S,R);if(!C(U))return U;if(R)return S=z(I,O,S,N),S?O+'="'+S+'"':O;var U=F(I,O,S,R);return C(U)?void 0:U}),j="<"+I;return k&&(j+=" "+k),x.closing&&(j+=" /"),j+=">",j}else{var X=g(I,j,K);return C(X)?H(j):X}},H);return G&&(it=G.remove(it)),it},s.exports=M},function(s,e,t){},function(s,e,t){},function(s,e,t){},function(s,e,t){},function(s,e,t){},function(s,e,t){},function(s,e,t){},function(s,e,t){(function(o){var u=function(){if(typeof Map<"u")return Map;function x(P,k){var E=-1;return P.some(function(O,S){return O[0]===k?(E=S,!0):!1}),E}return function(){function P(){this.__entries__=[]}return Object.defineProperty(P.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),P.prototype.get=function(k){var E=x(this.__entries__,k),O=this.__entries__[E];return O&&O[1]},P.prototype.set=function(k,E){var O=x(this.__entries__,k);~O?this.__entries__[O][1]=E:this.__entries__.push([k,E])},P.prototype.delete=function(k){var E=this.__entries__,O=x(E,k);~O&&E.splice(O,1)},P.prototype.has=function(k){return!!~x(this.__entries__,k)},P.prototype.clear=function(){this.__entries__.splice(0)},P.prototype.forEach=function(k,E){E===void 0&&(E=null);for(var O=0,S=this.__entries__;O<S.length;O++){var R=S[O];k.call(E,R[1],R[0])}},P}()}(),r=typeof window<"u"&&typeof document<"u"&&window.document===document,a=function(){return typeof o<"u"&&o.Math===Math?o:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),n=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(a):function(x){return setTimeout(function(){return x(Date.now())},1e3/60)}}(),b=2;function C(x,P){var k=!1,E=!1,O=0;function S(){k&&(k=!1,x()),E&&U()}function R(){n(S)}function U(){var $=Date.now();if(k){if($-O<b)return;E=!0}else k=!0,E=!1,setTimeout(R,P);O=$}return U}var _=20,A=["top","right","bottom","left","width","height","size","weight"],M=typeof MutationObserver<"u",m=function(){function x(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=C(this.refresh.bind(this),_)}return x.prototype.addObserver=function(P){~this.observers_.indexOf(P)||this.observers_.push(P),this.connected_||this.connect_()},x.prototype.removeObserver=function(P){var k=this.observers_,E=k.indexOf(P);~E&&k.splice(E,1),!k.length&&this.connected_&&this.disconnect_()},x.prototype.refresh=function(){var P=this.updateObservers_();P&&this.refresh()},x.prototype.updateObservers_=function(){var P=this.observers_.filter(function(k){return k.gatherActive(),k.hasActive()});return P.forEach(function(k){return k.broadcastActive()}),P.length>0},x.prototype.connect_=function(){!r||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),M?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},x.prototype.disconnect_=function(){!r||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},x.prototype.onTransitionEnd_=function(P){var k=P.propertyName,E=k===void 0?"":k,O=A.some(function(S){return!!~E.indexOf(S)});O&&this.refresh()},x.getInstance=function(){return this.instance_||(this.instance_=new x),this.instance_},x.instance_=null,x}(),y=function(x,P){for(var k=0,E=Object.keys(P);k<E.length;k++){var O=E[k];Object.defineProperty(x,O,{value:P[O],enumerable:!1,writable:!1,configurable:!0})}return x},h=function(x){var P=x&&x.ownerDocument&&x.ownerDocument.defaultView;return P||a},d=J(0,0,0,0);function f(x){return parseFloat(x)||0}function g(x){for(var P=[],k=1;k<arguments.length;k++)P[k-1]=arguments[k];return P.reduce(function(E,O){var S=x["border-"+O+"-width"];return E+f(S)},0)}function p(x){for(var P=["top","right","bottom","left"],k={},E=0,O=P;E<O.length;E++){var S=O[E],R=x["padding-"+S];k[S]=f(R)}return k}function F(x){var P=x.getBBox();return J(0,0,P.width,P.height)}function z(x){var P=x.clientWidth,k=x.clientHeight;if(!P&&!k)return d;var E=h(x).getComputedStyle(x),O=p(E),S=O.left+O.right,R=O.top+O.bottom,U=f(E.width),$=f(E.height);if(E.boxSizing==="border-box"&&(Math.round(U+S)!==P&&(U-=g(E,"left","right")+S),Math.round($+R)!==k&&($-=g(E,"top","bottom")+R)),!N(x)){var Y=Math.round(U+S)-P,Z=Math.round($+R)-k;Math.abs(Y)!==1&&(U-=Y),Math.abs(Z)!==1&&($-=Z)}return J(O.left,O.top,U,$)}var H=function(){return typeof SVGGraphicsElement<"u"?function(x){return x instanceof h(x).SVGGraphicsElement}:function(x){return x instanceof h(x).SVGElement&&typeof x.getBBox=="function"}}();function N(x){return x===h(x).document.documentElement}function G(x){return r?H(x)?F(x):z(x):d}function it(x){var P=x.x,k=x.y,E=x.width,O=x.height,S=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,R=Object.create(S.prototype);return y(R,{x:P,y:k,width:E,height:O,top:k,right:P+E,bottom:O+k,left:P}),R}function J(x,P,k,E){return{x,y:P,width:k,height:E}}var at=function(){function x(P){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=J(0,0,0,0),this.target=P}return x.prototype.isActive=function(){var P=G(this.target);return this.contentRect_=P,P.width!==this.broadcastWidth||P.height!==this.broadcastHeight},x.prototype.broadcastRect=function(){var P=this.contentRect_;return this.broadcastWidth=P.width,this.broadcastHeight=P.height,P},x}(),I=function(){function x(P,k){var E=it(k);y(this,{target:P,contentRect:E})}return x}(),j=function(){function x(P,k,E){if(this.activeObservations_=[],this.observations_=new u,typeof P!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=P,this.controller_=k,this.callbackCtx_=E}return x.prototype.observe=function(P){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(P instanceof h(P).Element))throw new TypeError('parameter 1 is not of type "Element".');var k=this.observations_;k.has(P)||(k.set(P,new at(P)),this.controller_.addObserver(this),this.controller_.refresh())}},x.prototype.unobserve=function(P){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(P instanceof h(P).Element))throw new TypeError('parameter 1 is not of type "Element".');var k=this.observations_;!k.has(P)||(k.delete(P),k.size||this.controller_.removeObserver(this))}},x.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},x.prototype.gatherActive=function(){var P=this;this.clearActive(),this.observations_.forEach(function(k){k.isActive()&&P.activeObservations_.push(k)})},x.prototype.broadcastActive=function(){if(!!this.hasActive()){var P=this.callbackCtx_,k=this.activeObservations_.map(function(E){return new I(E.target,E.broadcastRect())});this.callback_.call(P,k,P),this.clearActive()}},x.prototype.clearActive=function(){this.activeObservations_.splice(0)},x.prototype.hasActive=function(){return this.activeObservations_.length>0},x}(),W=typeof WeakMap<"u"?new WeakMap:new u,K=function(){function x(P){if(!(this instanceof x))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var k=m.getInstance(),E=new j(P,k,this);W.set(this,E)}return x}();["observe","unobserve","disconnect"].forEach(function(x){K.prototype[x]=function(){var P;return(P=W.get(this))[x].apply(P,arguments)}});var X=function(){return typeof a.ResizeObserver<"u"?a.ResizeObserver:K}();e.a=X}).call(this,t(86))},function(s,e,t){t.d(e,"a",function(){return xn});var o=t(13),u={undo:{toolbar:"\u64A4\u9500"},redo:{toolbar:"\u91CD\u505A"},clear:{toolbar:"\u6E05\u7A7A"},h:{toolbar:"\u6807\u9898"},h1:{toolbar:"\u4E00\u7EA7\u6807\u9898",placeholder:"\u4E00\u7EA7\u6807\u9898"},h2:{toolbar:"\u4E8C\u7EA7\u6807\u9898",placeholder:"\u4E8C\u7EA7\u6807\u9898"},h3:{toolbar:"\u4E09\u7EA7\u6807\u9898",placeholder:"\u4E09\u7EA7\u6807\u9898"},h4:{toolbar:"\u56DB\u7EA7\u6807\u9898",placeholder:"\u56DB\u7EA7\u6807\u9898"},h5:{toolbar:"\u4E94\u7EA7\u6807\u9898",placeholder:"\u4E94\u7EA7\u6807\u9898"},h6:{toolbar:"\u516D\u7EA7\u6807\u9898",placeholder:"\u516D\u7EA7\u6807\u9898"},bold:{toolbar:"\u7C97\u4F53",placeholder:"\u7C97\u4F53"},italic:{toolbar:"\u659C\u4F53",placeholder:"\u659C\u4F53"},strikethrough:{toolbar:"\u5220\u9664\u7EBF",placeholder:"\u5220\u9664\u7EBF"},quote:{toolbar:"\u63D2\u5165\u5F15\u7528",placeholder:"\u5F15\u7528"},ul:{toolbar:"\u65E0\u5E8F\u5217\u8868",placeholder:"\u65E0\u5E8F\u5217\u8868"},ol:{toolbar:"\u6709\u5E8F\u5217\u8868",placeholder:"\u6709\u5E8F\u5217\u8868"},table:{toolbar:"\u8868\u683C"},hr:{toolbar:"\u63D2\u5165\u5206\u5272\u7EBF"},link:{toolbar:"\u63D2\u5165\u94FE\u63A5",descPlaceholder:"\u94FE\u63A5"},image:{toolbar:"\u63D2\u5165\u56FE\u7247"},imageLink:{toolbar:"\u6DFB\u52A0\u56FE\u7247\u94FE\u63A5"},uploadImage:{toolbar:"\u4E0A\u4F20\u672C\u5730\u56FE\u7247"},code:{toolbar:"\u63D2\u5165\u4EE3\u7801\u5757"},save:{toolbar:"\u4FDD\u5B58"},preview:{enabled:"\u5F00\u542F\u9884\u89C8",disabled:"\u5173\u95ED\u9884\u89C8"},toc:{title:"\u76EE\u5F55\u5BFC\u822A",enabled:"\u5F00\u542F\u76EE\u5F55\u5BFC\u822A",disabled:"\u5173\u95ED\u76EE\u5F55\u5BFC\u822A"},syncScroll:{enabled:"\u5F00\u542F\u540C\u6B65\u6EDA\u52A8",disabled:"\u5173\u95ED\u540C\u6B65\u6EDA\u52A8"},fullscreen:{enabled:"\u5168\u5C4F\uFF08\u6309ESC\u8FD8\u539F\uFF09",disabled:"\u9000\u51FA\u5168\u5C4F"}},r=t(0),a=t(2),n={};Object(a.c)(n,t(38));function b(T,v,w){v?T[v]?console.error("The command name is already in use: "+v):T[v]=w:console.error("Command name is required")}function C(T){T.commands={},T.command=function(v,w){b(T.commands,v,w)},Object.keys(n).forEach(function(v){var w=n[v],L=w.name,D=w.default;T.command(L,D)})}var _=t(5),A={};Object(a.c)(A,t(61));function M(T,v,w){v?T[v]=Object(_.a)({},w):console.error("Toolbar name is required")}function m(T){T.toolbars={},T.toolbar=function(v,w){M(T.toolbars,v,w)},Object.keys(A).forEach(function(v){var w=A[v],L=w.default;T.toolbar(L.name,L)})}t(81);var y=t(9),h={class:"v-md-editor__left-area-body"},d={class:"v-md-editor__right-area"},f={class:"v-md-editor__toolbar",ref:"toolbarWrapper"},g={class:"v-md-editor__main"},p={class:"v-md-editor__preview-wrapper",ref:"previewWrapper"};function F(T,v,w,L,D,B){var V=Object(r.resolveComponent)("editor-toolbar");return Object(r.openBlock)(),Object(r.createBlock)("div",{class:["v-md-editor",["v-md-editor--"+w.mode,{"v-md-editor--fullscreen":w.fullscreen,"v-md-editor--left-area-reverse":w.leftAreaReverse}]],style:{height:B.heightGetter}},[Object(r.withDirectives)(Object(r.createVNode)("div",{class:"v-md-editor__left-area",style:{width:w.leftAreaVisible?w.leftAreaWidth:0,borderWidth:w.leftAreaVisible?"1px":0}},[Object(r.createVNode)("div",{class:"v-md-editor__left-area-title",style:{height:D.toolbarHeight+"px",lineHeight:D.toolbarHeight+"px"}},Object(r.toDisplayString)(w.leftAreaTitle),5),Object(r.createVNode)("div",h,[Object(r.renderSlot)(T.$slots,"left-area")])],4),[[r.vShow,!B.isPreviewMode]]),Object(r.createVNode)("div",d,[Object(r.withDirectives)(Object(r.createVNode)("div",f,[Object(r.createVNode)(V,{class:"v-md-editor__toolbar-left",groups:B.leftToolbarGroup,toolbars:w.toolbars,"disabled-menus":w.disabledMenus,onItemClick:B.handleToolbarItemClick,onToolbarMenuClick:B.handleToolbarMenuClick},null,8,["groups","toolbars","disabled-menus","onItemClick","onToolbarMenuClick"]),Object(r.createVNode)(V,{class:"v-md-editor__toolbar-right",groups:B.rightToolbarGroup,toolbars:w.toolbars,"disabled-mens":w.disabledMenus,onItemClick:B.handleToolbarItemClick,onToolbarMenuClick:B.handleToolbarMenuClick},null,8,["groups","toolbars","disabled-mens","onItemClick","onToolbarMenuClick"])],512),[[r.vShow,!B.isPreviewMode]]),Object(r.createVNode)("div",g,[Object(r.withDirectives)(Object(r.createVNode)("div",{ref:"editorWrapper",class:"v-md-editor__editor-wrapper",onClick:v[1]||(v[1]=function(){return B.handleEditorWrapperClick.apply(B,arguments)})},[Object(r.renderSlot)(T.$slots,"editor")],512),[[r.vShow,!B.isPreviewMode]]),Object(r.withDirectives)(Object(r.createVNode)("div",p,[Object(r.renderSlot)(T.$slots,"preview")],512),[[r.vShow,!B.isEditMode]]),Object(r.renderSlot)(T.$slots,"default")])])],6)}var z={key:0},H={key:0,class:"v-md-editor__toolbar-divider"};function N(T,v,w,L,D,B){var V=Object(r.resolveComponent)("toolbar-item");return w.groups.length?(Object(r.openBlock)(),Object(r.createBlock)("ul",z,[(Object(r.openBlock)(!0),Object(r.createBlock)(r.Fragment,null,Object(r.renderList)(w.groups,function(Q,et){return Object(r.openBlock)(),Object(r.createBlock)(r.Fragment,null,[(Object(r.openBlock)(!0),Object(r.createBlock)(r.Fragment,null,Object(r.renderList)(Q,function(q){return Object(r.openBlock)(),Object(r.createBlock)(V,{key:q,name:q,title:B.getConfig(q,"title"),icon:B.getConfig(q,"icon"),text:B.getConfig(q,"text"),active:B.getConfig(q,"active"),menus:B.getConfig(q,"menus"),"disabled-menus":w.disabledMenus,onClick:function(lt){return T.$emit("item-click",w.toolbars[q])},onMenuClick:v[1]||(v[1]=function(st){return T.$emit("toolbar-menu-click",st)})},null,8,["name","title","icon","text","active","menus","disabled-menus","onClick"])}),128)),et!==w.groups.length-1?(Object(r.openBlock)(),Object(r.createBlock)("li",H)):Object(r.createCommentVNode)("v-if",!0)],64)}),256))])):Object(r.createCommentVNode)("v-if",!0)}var G={key:1,class:"v-md-icon-arrow-down v-md-editor__menu-ctrl",ref:"menuCtrl"};function it(T,v,w,L,D,B){var V=Object(r.resolveComponent)("v-md-tooltip"),Q=Object(r.resolveComponent)("v-md-menu"),et=Object(r.resolveDirective)("clickoutside");return Object(r.withDirectives)((Object(r.openBlock)(),Object(r.createBlock)("li",{class:["v-md-editor__toolbar-item",[w.icon,"v-md-editor__toolbar-item-"+w.name,{"v-md-editor__toolbar-item--active":w.active||D.menuActive},{"v-md-editor__toolbar-item--menu":B.hasMenu}]],onMousedown:v[3]||(v[3]=Object(r.withModifiers)(function(){},["prevent"])),onMouseleave:v[4]||(v[4]=function(){return B.handleHideTooltip.apply(B,arguments)}),onMousemove:v[5]||(v[5]=function(){return B.showTooltip.apply(B,arguments)}),onClick:v[6]||(v[6]=Object(r.withModifiers)(function(){return B.handleClick.apply(B,arguments)},["stop"]))},[Object(r.createTextVNode)(Object(r.toDisplayString)(w.text)+" ",1),Object(r.createVNode)(V,{ref:"tooltip",text:w.title},null,8,["text"]),B.hasMenu?(Object(r.openBlock)(),Object(r.createBlock)(Q,{key:0,ref:"menu",mode:B.menuMode,menus:B.menuItems,"item-width":w.menus.itemWidth,"row-num":w.menus.rowNum,visible:D.menuActive,"onUpdate:visible":v[1]||(v[1]=function(q){return D.menuActive=q}),onItemClick:v[2]||(v[2]=function(q){return T.$emit("menu-click",q)})},null,8,["mode","menus","item-width","row-num","visible"])):Object(r.createCommentVNode)("v-if",!0),B.hasMenu?(Object(r.openBlock)(),Object(r.createBlock)("i",G,null,512)):Object(r.createCommentVNode)("v-if",!0)],34)),[[et,B.hideMenu,"hideMenu"]])}function J(T,v,w,L,D,B){return Object(r.openBlock)(),Object(r.createBlock)(r.Transition,{name:"v-md-fade-in"},{default:Object(r.withCtx)(function(){return[Object(r.withDirectives)(Object(r.createVNode)("div",{style:{left:D.position.x+"px",top:D.position.y+"px"},class:"v-md-editor__tooltip"},Object(r.toDisplayString)(w.text),5),[[r.vShow,D.visible]])]}),_:1})}var at={name:"v-md-tooltip",props:{text:String},data:function(){return{position:{x:0,y:0},visible:!1}},methods:{show:function(v){this.position={x:v.x,y:v.y},this.visible=!0,this.$nextTick(this.calculateLayout)},hide:function(){this.visible=!1},calculateLayout:function(){var v=this.$el.getBoundingClientRect(),w=v.right,L=document.documentElement.clientWidth;L-w<0&&(this.position.x-=w-L)}}};t(82),at.render=J;var I=at,j={key:1},W={class:"v-md-editor__menu-row"};function K(T,v,w,L,D,B){var V=Object(r.resolveComponent)("v-md-render");return Object(r.openBlock)(),Object(r.createBlock)(r.Transition,{name:"v-md-zoom-in-top"},{default:Object(r.withCtx)(function(){return[Object(r.withDirectives)(Object(r.createVNode)("ul",{class:["v-md-editor__menu",["v-md-editor__menu--"+w.mode]],style:D.style,onMousemove:v[1]||(v[1]=Object(r.withModifiers)(function(){},["stop"])),onClick:v[2]||(v[2]=Object(r.withModifiers)(function(){},["stop"]))},[B.isListMode?(Object(r.openBlock)(!0),Object(r.createBlock)(r.Fragment,{key:0},Object(r.renderList)(w.menus,function(Q){return Object(r.openBlock)(),Object(r.createBlock)("li",{key:Q.name,class:["v-md-editor__menu-item",["v-md-editor__menu-item-"+Q.name,Q.class]],onClick:Object(r.withModifiers)(function(et){return B.handleClick(Q)},["stop"])},[Q.render?(Object(r.openBlock)(),Object(r.createBlock)(V,{key:0,render:Q.render,editor:T.$self},null,8,["render","editor"])):(Object(r.openBlock)(),Object(r.createBlock)(r.Fragment,{key:1},[Object(r.createTextVNode)(Object(r.toDisplayString)(B.getText(Q.text)),1)],64))],10,["onClick"])}),128)):(Object(r.openBlock)(),Object(r.createBlock)("li",j,[(Object(r.openBlock)(!0),Object(r.createBlock)(r.Fragment,null,Object(r.renderList)(B.rowCount,function(Q){return Object(r.openBlock)(),Object(r.createBlock)("div",W,[(Object(r.openBlock)(!0),Object(r.createBlock)(r.Fragment,null,Object(r.renderList)(B.getRowMenus(Q),function(et){return Object(r.openBlock)(),Object(r.createBlock)("span",{key:et.name,style:{width:w.itemWidth},class:["v-md-editor__menu-item",["v-md-editor__menu-item-"+et.name,et.class]],onClick:Object(r.withModifiers)(function(q){return B.handleClick(et)},["stop"])},Object(r.toDisplayString)(et.text),15,["onClick"])}),128))])}),256))]))],38),[[r.vShow,w.visible]])]}),_:1})}var X=function(v,w){var L=w.data;return v.render.apply(v,L.$attrs)};X.props=["render"];var x=X,P={LIST:"list",PANEL:"panel"},k={name:"v-md-menu",components:{VMdRender:x},inject:["markdownEditor"],props:{mode:{type:String,default:P.PANEL},menus:Array,itemWidth:{type:String,default:"30px"},rowNum:{type:Number,default:10},visible:Boolean},emits:["update:visible","item-click"],data:function(){return{style:{left:0}}},computed:{rowCount:function(){return Math.ceil(this.menus.length/this.rowNum)},isListMode:function(){return this.mode===P.LIST}},watch:{visible:function(){this.visible&&this.$nextTick(this.calculateLayout)}},methods:{calculateLayout:function(){var v=this.$el.getBoundingClientRect(),w=v.right,L=document.documentElement.clientWidth;L-w<0&&(this.style={right:0})},getRowMenus:function(v){var w=v*this.rowNum,L=w-this.rowNum;return this.menus.slice(L,w)},getText:function(v){return typeof v=="function"?v(this.markdownEditor):v},hide:function(){this.$emit("update:visible",!1)},handleClick:function(v){this.$emit("item-click",v),this.hide()}}};t(83),k.render=K;var E=k,O=[],S="@@clickoutsideContext",R,U=0;a.d&&(document.addEventListener("mousedown",function(T){R=T}),document.addEventListener("mouseup",function(T){O.forEach(function(v){return v[S].documentHandler(T,R)})}));function $(T,v,w){return function(L,D){L===void 0&&(L={}),D===void 0&&(D={}),!(!w||!v||!v.instance||!L.target||!D.target||T.contains(L.target)||T.contains(D.target)||T===L.target)&&(v.arg&&T[S].methodName&&v.instance[T[S].methodName]?v.instance[T[S].methodName]():T[S].bindingFn&&T[S].bindingFn())}}var Y={beforeMount:function(v,w,L){O.push(v);var D=U++;v[S]={id:D,documentHandler:$(v,w,L),methodName:w.arg,bindingFn:w.value}},updated:function(v,w,L){v[S].documentHandler=$(v,w,L),v[S].methodName=w.arg,v[S].bindingFn=w.value},unmounted:function(v){for(var w=O.length,L=0;L<w;L++)if(O[L][S].id===v[S].id){O.splice(L,1);break}delete v[S]}},Z,tt={name:"toolbar-item",directives:{Clickoutside:Y},components:(Z={},Z[I.name]=I,Z[E.name]=E,Z),props:{name:String,title:String,active:Boolean,text:String,icon:String,menus:[Array,Object],disabledMenus:Array},emits:["click","menu-click"],data:function(){return{menuActive:!1}},computed:{hasMenu:function(){var v;return(v=this.menuItems)==null?void 0:v.length},menuItems:function(){var v=this,w=Object(a.f)(this.menus)?this.menus.items:this.menus;return w==null?void 0:w.filter(function(L){var D,B=L.name;return!((D=v.disabledMenus)!=null&&D.includes(v.name+"/"+B))})},menuMode:function(){return Object(a.f)(this.menus)?this.menus.mode:P.LIST}},methods:{hideMenu:function(){this.hasMenu&&(this.menuActive=!1)},showMenu:function(){this.hasMenu&&(this.menuActive=!0)},handleClick:function(v){this.$emit("click"),this.menuActive?this.hideMenu():this.showMenu(),this.hasMenu?this.handleHideTooltip():this.showTooltip(v)},showTooltip:function(v){var w=this,L=this.$el,D=v.target,B=this.$refs.menuCtrl;if(D!==L&&D!==B||this.menuActive){this.handleHideTooltip();return}this.timmer&&clearTimeout(this.timmer);var V=L.getBoundingClientRect(),Q=v.clientX-V.left,et=v.clientY-V.top;this.timmer=setTimeout(function(){var q;(q=w.$refs.tooltip)==null||q.show({x:Q-2,y:et+20})},100)},handleHideTooltip:function(){this.timmer&&clearTimeout(this.timmer),this.$refs.tooltip.hide()}}};t(84),tt.render=it;var nt=tt,vt,mt={name:"editor-toolbar",components:(vt={},vt[nt.name]=nt,vt),inject:["markdownEditor"],props:{groups:Array,toolbars:Object,disabledMenus:Array},emits:["item-click","toolbar-menu-click"],methods:{getConfig:function(v,w){var L=this.toolbars[v],D=L[w];return typeof D=="function"?D(this.markdownEditor):D}}};t(85),mt.render=N;var dt=mt,Ne=t(34),Ke=typeof window>"u",Xe=function(v){v.forEach(function(w){var L=w.target.__resizeListeners__||[];L.length&&L.forEach(function(D){D()})})},$t=function(v,w){Ke||(v.__resizeListeners__||(v.__resizeListeners__=[],v.__ro__=new Ne.a(Xe),v.__ro__.observe(v)),v.__resizeListeners__.push(w))},Nt=function(v,w){!v||!v.__resizeListeners__||(v.__resizeListeners__.splice(v.__resizeListeners__.indexOf(w),1),v.__resizeListeners__.length||v.__ro__.disconnect())},bt=t(4),Kt,ue={name:"v-md-container",components:(Kt={},Kt[dt.name]=dt,Kt),props:{leftToolbar:String,rightToolbar:String,toolbars:Object,fullscreen:Boolean,height:String,noresize:Boolean,disabledMenus:Array,leftAreaVisible:Boolean,leftAreaTitle:String,leftAreaReverse:Boolean,leftAreaWidth:{type:String,default:"200px"},mode:{type:String,default:bt.a.EDITABLE}},emits:["resize","editor-wrapper-click","toolbar-item-click","toolbar-menu-click"],data:function(){return{toolbarHeight:0}},computed:{heightGetter:function(){return this.fullscreen?"auto":this.height},leftToolbarGroup:function(){return this.getToolbarConfig(this.leftToolbar)},rightToolbarGroup:function(){return this.getToolbarConfig(this.rightToolbar)},isPreviewMode:function(){return this.mode===bt.a.PREVIEW},isEditMode:function(){return this.mode===bt.a.EDIT}},mounted:function(){this.noresize||($t(this.$refs.editorWrapper,this.handleResize),$t(this.$refs.toolbarWrapper,this.handleToolbarWrapperResize))},beforeUnmount:function(){this.noresize||(Nt(this.$refs.editorWrapper,this.handleResize),Nt(this.$refs.toolbarWrapper,this.handleToolbarWrapperResize))},methods:{handleResize:function(){this.$emit("resize")},handleToolbarWrapperResize:function(){var v=this.$refs.toolbarWrapper;v&&(this.toolbarHeight=v.offsetHeight)},getToolbarConfig:function(v){var w=this;return v.split("|").map(function(L){return L.split(" ").filter(function(D){return D&&w.toolbars[D]})})},handleEditorWrapperClick:function(v){this.$emit("editor-wrapper-click",v)},handleToolbarItemClick:function(v){this.$emit("toolbar-item-click",v)},handleToolbarMenuClick:function(v){this.$emit("toolbar-menu-click",v)}}};t(87),ue.render=F;var ce=ue,Ft,Ye=typeof window>"u",Je=function(){if(Ye)return 0;if(Ft!==void 0)return Ft;var T=document.createElement("div");T.className="scrollbar__wrap",T.style.visibility="hidden",T.style.width="100px",T.style.position="absolute",T.style.top="-9999px",document.body.appendChild(T);var v=T.offsetWidth;T.style.overflow="scroll";var w=document.createElement("div");w.style.width="100%",T.appendChild(w);var L=w.offsetWidth;return T.parentNode.removeChild(T),Ft=v-L,Ft},Ze={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}};function Qe(T){var v=T.move,w=T.size,L=T.bar,D={},B="translate"+L.axis+"("+v+"%)";return D[L.size]=w,D.transform=B,D.msTransform=B,D.webkitTransform=B,D}var Xt={name:"Bar",props:{vertical:Boolean,size:String,move:Number},computed:{bar:function(){return Ze[this.vertical?"vertical":"horizontal"]},wrap:function(){return this.$parent.wrap}},render:function(){var v=this.size,w=this.move,L=this.bar;return Object(r.createVNode)("div",{class:["scrollbar__bar","is-"+L.key],onMousedown:this.clickTrackHandler,onClick:function(B){return B.stopPropagation()}},[Object(r.createVNode)("div",{ref:"thumb",class:"scrollbar__thumb",onMousedown:this.clickThumbHandler,style:Qe({size:v,move:w,bar:L})},null)])},methods:{clickThumbHandler:function(v){v.ctrlKey||v.button===2||(this.startDrag(v),this[this.bar.axis]=v.currentTarget[this.bar.offset]-(v[this.bar.client]-v.currentTarget.getBoundingClientRect()[this.bar.direction]))},clickTrackHandler:function(v){var w=Math.abs(v.target.getBoundingClientRect()[this.bar.direction]-v[this.bar.client]),L=this.$refs.thumb[this.bar.offset]/2,D=(w-L)*100/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=D*this.wrap[this.bar.scrollSize]/100},startDrag:function(v){v.stopImmediatePropagation(),this.cursorDown=!0,document.addEventListener("mousemove",this.mouseMoveDocumentHandler,!1),document.addEventListener("mouseup",this.mouseUpDocumentHandler,!1),document.onselectstart=function(){return!1}},mouseMoveDocumentHandler:function(v){if(this.cursorDown!==!1){var w=this[this.bar.axis];if(!!w){var L=(this.$el.getBoundingClientRect()[this.bar.direction]-v[this.bar.client])*-1,D=this.$refs.thumb[this.bar.offset]-w,B=(L-D)*100/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=B*this.wrap[this.bar.scrollSize]/100}}},mouseUpDocumentHandler:function(){this.cursorDown=!1,this[this.bar.axis]=0,document.removeEventListener("mousemove",this.mouseMoveDocumentHandler,!1),document.onselectstart=null}},unmounted:function(){document.removeEventListener("mouseup",this.mouseUpDocumentHandler,!1)}},qe=t(8),tn={name:"scrollbar",components:{Bar:Xt},props:{native:Boolean,disabled:Boolean,wrapStyle:null,wrapClass:null,viewClass:null,viewStyle:null,noresize:Boolean,tag:{type:String,default:"div"}},emits:["scroll"],data:function(){return{sizeWidth:"0",sizeHeight:"0",moveX:0,moveY:0}},computed:{wrap:function(){return this.$refs.wrap}},mounted:function(){this.native||this.disabled||(this.$nextTick(this.update),!this.noresize&&$t(this.$refs.resize,this.update))},beforeUnmount:function(){this.native||this.disabled||!this.noresize&&Nt(this.$refs.resize,this.update)},methods:{getScrollInfo:function(){var v=this.wrap;return{left:v.scrollLeft,top:v.scrollTop,width:v.scrollWidth,height:v.scrollHeight,clientWidth:v.clientWidth,clientHeight:v.clientHeight}},scrollTo:function(v){Object(qe.a)({scrollTarget:this.wrap,scrollToTop:v})},handleScroll:function(){var v=this.wrap;this.moveY=v.scrollTop*100/v.clientHeight,this.moveX=v.scrollLeft*100/v.clientWidth,this.$emit("scroll")},update:function(){var v=this.wrap;if(!!v){var w=v.clientHeight*100/v.scrollHeight,L=v.clientWidth*100/v.scrollWidth;this.sizeHeight=w<100?w+"%":"",this.sizeWidth=L<100?L+"%":""}}},render:function(){if(this.disabled)return this.$slots.default();var v=Je(),w=this.wrapStyle;if(v){var L=this.$refs.resize,D=this.$refs.wrap,B=L==null?void 0:L.scrollHeight,V=L==null?void 0:L.scrollWidth,Q=D==null?void 0:D.clientHeight,et=D==null?void 0:D.clientWidth,q="-"+v+"px",st=V>et?q:0,lt=B>Q?q:0,ut="margin-bottom: "+st+"; margin-right: "+lt+";";Array.isArray(this.wrapStyle)?(w=Object(a.a)(this.wrapStyle),w.marginRight=q,w.marginBottom=q):typeof this.wrapStyle=="string"?w+=ut:w=ut}var wt=Object(r.h)(this.tag,{class:["scrollbar__view",this.viewClass],style:this.viewStyle,ref:"resize"},this.$slots.default()),jt=Object(r.createVNode)("div",{ref:"wrap",style:w,onScroll:this.handleScroll,class:[this.wrapClass,"scrollbar__wrap",v?"":"scrollbar__wrap--hidden-default"]},[[wt]]),Mt;return this.native?Mt=[Object(r.createVNode)("div",{ref:"wrap",class:[this.wrapClass,"scrollbar__wrap"],style:w},[[wt]])]:Mt=[jt,Object(r.createVNode)(Xt,{move:this.moveX,size:this.sizeWidth},null),Object(r.createVNode)(Xt,{vertical:!0,move:this.moveY,size:this.sizeHeight},null)],Object(r.h)("div",{class:"scrollbar"},Mt)}};t(88);var fe=tn,en={class:"v-md-editor__toc-nav"},nn={class:"v-md-editor__toc-nav-title"};function rn(T,v,w,L,D,B){return Object(r.openBlock)(),Object(r.createBlock)("ul",en,[(Object(r.openBlock)(!0),Object(r.createBlock)(r.Fragment,null,Object(r.renderList)(w.titles,function(V){return Object(r.openBlock)(),Object(r.createBlock)("li",{style:{paddingLeft:w.indent*V.indent+"px"},onClick:function(et){return T.$emit("nav-click",V)},class:"v-md-editor__toc-nav-item"},[Object(r.createVNode)("span",nn,Object(r.toDisplayString)(V.title),1)],12,["onClick"])}),256))])}var de={name:"toc-nav",props:{titles:Array,indent:{type:Number,default:16}},emits:["nav-click"]};t(89),de.render=rn;var he=de,Tt,on={inheritAttrs:!1,components:(Tt={},Tt[y.default.name]=y.default,Tt[ce.name]=ce,Tt[fe.name]=fe,Tt[he.name]=he,Tt),provide:function(){return{markdownEditor:this}},props:{height:String,theme:Object,mode:{type:String,default:bt.a.EDITABLE},autofocus:Boolean,placeholder:String,tocNavPositionRight:Boolean,tabSize:{type:Number,default:2},beforePreviewChange:{type:Function,default:function(v,w){w(v)}}},emits:["blur","change","save","image-click"],data:function(){return{currentMode:this.mode,uploadConfig:{}}},watch:{mode:function(){this.currentMode=this.mode},currentMode:function(){this.currentMode===bt.a.EDITABLE&&this.enableSyncScroll&&this.$nextTick(this.previewSyncScroll)}},created:function(){this.theme&&this.$options.use(this.theme)},computed:{isPreviewMode:function(){return this.currentMode===bt.a.PREVIEW},isEditMode:function(){return this.currentMode===bt.a.EDIT}},mounted:function(){this.autofocus&&this.$nextTick(this.setFocusEnd)},methods:{setFocusEnd:function(){this.editorFocusEnd(),this.editorScrollToTop(9999),this.previewScrollTo(9999)},handleChange:function(v,w){this.$emit("change",v,w)},handleBlur:function(v){this.$emit("blur",v)},handlePreviewImageClick:function(v,w){this.$emit("image-click",v,w)},save:function(){this.$emit("save",this.text,this.$refs.preview.html)},insert:function(v){var w=this;this.focus();var L=this.getCurrentSelectedStr(),D=v(L),B=D.selected,V=D.text;this.replaceSelectionText(V),this.$nextTick(function(){w.changeSelctionTo(V,B)})}}},an={props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],data:function(){return{text:this.modelValue}},methods:{handleInput:function(v){this.text=v,this.$emit("update:modelValue",v)}}},sn={props:{defaultFullscreen:Boolean},emits:["fullscreen-change"],data:function(){return{fullscreen:!1}},watch:{fullscreen:function(){this.$emit("fullscreen-change",this.fullscreen)}},mounted:function(){window.addEventListener("keyup",this.handleWindowKeyup,!1),this.defaultFullscreen&&this.toggleFullScreen()},beforeUnmount:function(){window.removeEventListener("keyup",this.handleWindowKeyup,!1)},methods:{handleWindowKeyup:function(v){v.keyCode===27&&this.fullscreen&&this.toggleFullScreen(!1)},toggleFullScreen:function(v){v===void 0&&(v=!this.fullscreen),this.fullscreen=v;var w=document.querySelectorAll("html, body"),L=w[0],D=w[1],B=this.fullscreen?"hidden":null;D.style.overflow=B,L.style.overflow=B}}};function ln(T,v,w,L,D,B){return Object(r.openBlock)(),Object(r.createBlock)("input",{type:"file",style:{display:"none"},key:D.key,accept:w.uploadConfig.accept,multiple:w.uploadConfig.multiple,onInput:v[1]||(v[1]=function(){return D.handleUpload.apply(D,arguments)}),ref:"fileInput"},null,40,["accept","multiple"])}var un=t(10),ve=t.n(un),cn=t(17),me={name:"v-md-upload-file",props:{uploadConfig:Object},data:function(){return{handleUpload:function(){},key:0}},methods:{upload:function(){var v=this;return Object(cn.a)(ve.a.mark(function w(){var L;return ve.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,v.chooseFile();case 2:return L=B.sent,B.abrupt("return",L);case 4:case"end":return B.stop()}},w)}))()},chooseFile:function(){var v=this;return new Promise(function(w){v.handleUpload=function(L){w(L),v.key++},v.$refs.fileInput.click()})}}};me.render=ln;var pe=me,fn=t(23),Yt=t(12),dn=t(1),Jt,hn={accept:"image/*",multiple:!1},vn={components:(Jt={},Jt[pe.name]=pe,Jt),props:{uploadImageConfig:Object},emits:["upload-image"],computed:{uploadImgConfig:function(){return Object(_.a)({},hn,this.uploadImageConfig)},hasUploadImage:function(){return!this.disabledMenus.includes(fn.default.name+"/upload-image")}},methods:{handleDrop:function(v){var w=Object(Yt.a)(v.dataTransfer.files,this.uploadImgConfig);this.emitUploadImage(v,w)},handlePaste:function(v){var w=v.clipboardData;if(!!w){var L=Object(Yt.a)(Object(Yt.b)(w),this.uploadImgConfig);this.emitUploadImage(v,L)}},emitUploadImage:function(v,w){var L=this;this.hasUploadImage&&w.length&&(v.preventDefault(),this.$emit("upload-image",v,function(D){L.execCommand(dn.l,D)},w))}}},At=t(3),mn={data:function(){return{enableSyncScroll:!0}},methods:{toggleSyncScroll:function(v){v===void 0&&(v=!this.enableSyncScroll),this.enableSyncScroll=v,v&&this.previewSyncScroll()},previewSyncScroll:function(){if(!this.isEditMode){var v=this.$refs.preview.$el,w=this.$refs.previewScroller.$el,L=v.querySelectorAll("["+At.c+"]"),D=this.getScrollInfo(),B=D.clientHeight,V=D.top,Q=D.height,et=w.querySelector(".scrollbar__wrap");if(B+V===Q){var q=et.clientHeight,st=et.scrollHeight;this.previewScrollTo(st-q)}else{for(var lt,ut,wt=0;wt<L.length;wt++){var jt=L[wt].getAttribute(At.c),Mt=this.heightAtLine(jt-1,"local");if(Mt<V)lt=jt;else{ut=jt;break}}var ge=0;if(lt&&ut&&lt!==ut){var ye=this.heightAtLine(lt-1,"local"),An=this.heightAtLine(ut-1,"local");ge=(V-ye)/(An-ye)}var Qt=0,be=et.scrollHeight-et.clientHeight;lt&&(Qt=v.querySelector("["+At.c+'="'+lt+'"]').offsetTop),ut&&(be=v.querySelector("["+At.c+'="'+ut+'"]').offsetTop);var jn=Qt+(be-Qt)*ge;this.previewScrollTo(jn)}}},handleEditorScroll:function(){!this.enableSyncScroll||this.ignoreSyncScroll||(clearTimeout(this.scrollTimmer),this.scrollTimmer=setTimeout(this.previewSyncScroll,60))}}},pn=function(T){return{props:{leftToolbar:{type:String,default:"undo redo clear | h bold italic strikethrough quote | ul ol table hr | link image code | save"},rightToolbar:{type:String,default:"preview toc sync-scroll fullscreen"},toolbar:{type:Object,default:function(){return{}}},disabledMenus:{type:Array,default:function(){return["image/upload-image"]}},toolbarConfig:{type:Object,default:function(){return{}}}},created:function(){var w=this,L=T.toolbars;this.toolbars={},Object.keys(L).forEach(function(D){w.registerToolbar(D,L[D])}),Object.keys(this.toolbar).forEach(function(D){w.registerToolbar(D,w.toolbar[D])})},methods:{registerToolbar:function(w,L){M(this.toolbars,w,L)},handleToolbarItemClick:function(w){var L;w.action&&!((L=w.menus)!=null&&L.length)&&typeof w.action=="function"&&w.action.call(w,this,this.toolbarConfig[w.name])},handleToolbarMenuClick:function(w){w.action&&typeof w.action=="function"&&w.action.call(w,this,this.toolbarConfig[w.name])}}}},gn=function(T){return{created:function(){var w=this,L=T.commands;this.commands={},Object.keys(L).forEach(function(D){w.registerCommand(D,L[D])})},methods:{registerCommand:function(w,L){b(this.commands,w,L)},execCommand:function(w){var L=this.commands[w];if(L){for(var D=arguments.length,B=new Array(D>1?D-1:0),V=1;V<D;V++)B[V-1]=arguments[V];L.apply(void 0,[this].concat(B))}else console.error("Command not found: "+w)}}}},yn={data:function(){return{tocVisible:this.defaultShowToc,titles:[]}},props:{includeLevel:{type:Array,default:function(){return[2,3]}},defaultShowToc:Boolean},watch:{text:{immediate:!0,handler:function(v,w){if(typeof w>"u"){this.$nextTick(this.updateTocNav);return}this.updateTocNavTimmer&&clearTimeout(this.updateTocNavTimmer),this.updateTocNavTimmer=setTimeout(this.updateTocNav,800)}}},computed:{anchorsSelector:function(){return this.includeLevel.map(function(v){return"h"+v}).join(",")}},methods:{toggleToc:function(v){v===void 0&&(v=!this.tocVisible),this.tocVisible=v},updateTocNav:function(){var v,w=(v=this.$refs.preview)==null?void 0:v.$el;if(!!w){var L=w.querySelectorAll(this.anchorsSelector),D=Array.from(L).filter(function(V){return!!V.innerText.trim()});if(!D.length){this.titles=[];return}var B=Array.from(new Set(D.map(function(V){return V.tagName}))).sort();this.titles=D.map(function(V){return{title:V.innerText,lineIndex:V.getAttribute(At.c),indent:B.indexOf(V.tagName)}})}},handleNavClick:function(v){var w=v.lineIndex;this.scrollToLine(w)}}},bn={props:{previewScrollContainer:Function},computed:{getPreviewScrollContainer:function(){var v=this;return function(){var w=v.$refs.previewScroller.$el.querySelector(".scrollbar__wrap"),L=v.isPreviewMode?window:w;return v.previewScrollContainer?v.previewScrollContainer():L}}},methods:{previewScrollTo:function(v){this.$refs.previewScroller.scrollTo(v)},scrollToLine:function(v){var w=this;this.isPreviewMode||this.editorScrollToLine(v),this.isEditMode||(this.ignoreSyncScroll=!0,this.previewScrollToLine({lineIndex:v,onScrollEnd:function(){w.ignoreSyncScroll=!1}}))},editorScrollToLine:function(v){var w=this.heightAtLine(v-1,"local");this.editorScrollToTop(w)},previewScrollToTarget:function(){var v;(v=this.$refs.preview).scrollToTarget.apply(v,arguments)},previewScrollToLine:function(v){var w=v.lineIndex,L=v.onScrollEnd;this.$refs.preview.scrollToLine({lineIndex:w,onScrollEnd:L})}}},Zt={};Object(a.c)(Zt,t(90));var Cn=function(T){return{mounted:function(){var w=this;if(!this.isPreviewMode){var L=T.hotkeys;Object.keys(Zt).forEach(function(D){w.registerHotkeys(Zt[D].default)}),L.forEach(function(D){w.registerHotkeys(D)})}},methods:{registerHotkeys:function(w){var L=this,D=w.modifier,B=w.key,V=w.action,Q=w.preventDefault,et=Q===void 0?!0:Q;this.editorRegisterHotkeys({modifier:D,key:B,preventDefault:et,action:function(){for(var st=arguments.length,lt=new Array(st),ut=0;ut<st;ut++)lt[ut]=arguments[ut];return V.apply(void 0,[L].concat(lt))}})}}}},En=/^\s*([\d]+\.)( \[[ xX]])? /,Tn=/^\s*([-*])( \[[ xX]])? /,wn=/([*-] |[\d]+\. )/,On=/([\d])+\.( \[[ xX]])? /,_n={mounted:function(){var v=this;this.isPreviewMode||this.registerHotkeys({key:"enter",preventDefault:!1,action:function(L,D){if(!D.isComposing){var B=v.getCursorLineLeftText(),V,Q;if(En.test(B))V="x. ",Q=On,D.preventDefault();else if(Tn.test(B))V="- ",Q=wn,D.preventDefault();else return;var et=B.search(Q),q=et+V.length,st=B.slice(0,q),lt=B.slice(q,B.length);lt?(V==="x. "&&(st=st.replace(/(\d+)/,window.parseInt(st)+1)),v.replaceSelectionText(`
`+st,"end")):(v.delLineLeft(),v.replaceSelectionText(`
`,"end"))}}})}},Sn={computed:{langConfig:function(){var v=this.$options.lang.config;return v.langConfig[v.lang]}}},Ut=new o.a({afterUse:function(v){y.default.vMdParser.lang.config.lang=v}});Ut.config=Object(r.reactive)(Ut.config),Ut.add({"zh-CN":u});function xn(T){C(T),m(T),T.name="v-md-editor",T.lang=Ut,T.vMdParser=y.default.vMdParser,T.Preview=y.default,T.hotkeys=[],T.hotkey=function(v){T.hotkeys.push(v)},T.mixins=[on,an,pn(T),gn(T),Cn(T),sn,vn,mn,yn,bn,_n,Sn]}},function(s,e,t){var o={48:0,49:1,50:2,51:3,52:4,53:5,54:6,55:7,56:8,57:9,65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12"},u={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},r=function(){function a(){this.hotkeys={ctrl:{},shift:{},ctrlAlt:{},ctrlShift:{},keys:{}}}var n=a.prototype;return n.dispatch=function(C){var _=this.getKeyName(C).toLowerCase(),A;if(!!_&&(this.isKeyEnterExact(C)?A=this.hotkeys.keys[_]:this.isCtrlEnterExact(C)?A=this.hotkeys.ctrl[_]:this.isShiftEnterExact(C)?A=this.hotkeys.shift[_]:this.isCtrlAltEnterExact(C)?A=this.hotkeys.ctrlAlt[_]:this.isCtrlShiftEnterExact(C)&&(A=this.hotkeys.ctrlShift[_]),A)){var M=A,m=M.action,y=M.preventDefault;y&&C.preventDefault(),m(C)}},n.isKeyEnterExact=function(C){return!this.isCtrlEnter(C)&&!this.isShiftEnter(C)&&!this.isAltEnter(C)},n.isCtrlShiftEnterExact=function(C){return this.isCtrlEnter(C)&&this.isShiftEnter(C)&&!this.isAltEnter(C)},n.isCtrlAltEnterExact=function(C){return this.isCtrlEnter(C)&&this.isAltEnter(C)&&!this.isShiftEnter(C)},n.isCtrlEnterExact=function(C){return this.isCtrlEnter(C)&&!this.isShiftEnter(C)&&!this.isAltEnter(C)},n.isShiftEnterExact=function(C){return this.isShiftEnter(C)&&!this.isCtrlEnter(C)&&!this.isAltEnter(C)},n.isCtrlEnter=function(C){return C.ctrlKey||C.metaKey},n.isShiftEnter=function(C){return C.shiftKey},n.isAltEnter=function(C){return C.altKey},n.registerHotkeys=function(C){var _=C.modifier,A=C.key,M=C.preventDefault,m=M===void 0?!0:M,y=C.action;_?this.hotkeys[_][A]={preventDefault:m,action:y}:this.hotkeys.keys[A]={preventDefault:m,action:y}},n.getKeyName=function(C){var _=C.key,A=C.keyCode;if(_!==void 0){var M=Object.keys(u).find(function(m){var y=u[m];return typeof y=="string"?y===_:y.indexOf(_)!==-1});return M||_}return o[A]},a}();e.a=r},function(s,e,t){var o=function(u){var r=Object.prototype,a=r.hasOwnProperty,n,b=typeof Symbol=="function"?Symbol:{},C=b.iterator||"@@iterator",_=b.asyncIterator||"@@asyncIterator",A=b.toStringTag||"@@toStringTag";function M(E,O,S){return Object.defineProperty(E,O,{value:S,enumerable:!0,configurable:!0,writable:!0}),E[O]}try{M({},"")}catch{M=function(O,S,R){return O[S]=R}}function m(E,O,S,R){var U=O&&O.prototype instanceof F?O:F,$=Object.create(U.prototype),Y=new x(R||[]);return $._invoke=j(E,S,Y),$}u.wrap=m;function y(E,O,S){try{return{type:"normal",arg:E.call(O,S)}}catch(R){return{type:"throw",arg:R}}}var h="suspendedStart",d="suspendedYield",f="executing",g="completed",p={};function F(){}function z(){}function H(){}var N={};N[C]=function(){return this};var G=Object.getPrototypeOf,it=G&&G(G(P([])));it&&it!==r&&a.call(it,C)&&(N=it);var J=H.prototype=F.prototype=Object.create(N);z.prototype=J.constructor=H,H.constructor=z,z.displayName=M(H,A,"GeneratorFunction");function at(E){["next","throw","return"].forEach(function(O){M(E,O,function(S){return this._invoke(O,S)})})}u.isGeneratorFunction=function(E){var O=typeof E=="function"&&E.constructor;return O?O===z||(O.displayName||O.name)==="GeneratorFunction":!1},u.mark=function(E){return Object.setPrototypeOf?Object.setPrototypeOf(E,H):(E.__proto__=H,M(E,A,"GeneratorFunction")),E.prototype=Object.create(J),E},u.awrap=function(E){return{__await:E}};function I(E,O){function S($,Y,Z,tt){var nt=y(E[$],E,Y);if(nt.type==="throw")tt(nt.arg);else{var vt=nt.arg,mt=vt.value;return mt&&typeof mt=="object"&&a.call(mt,"__await")?O.resolve(mt.__await).then(function(dt){S("next",dt,Z,tt)},function(dt){S("throw",dt,Z,tt)}):O.resolve(mt).then(function(dt){vt.value=dt,Z(vt)},function(dt){return S("throw",dt,Z,tt)})}}var R;function U($,Y){function Z(){return new O(function(tt,nt){S($,Y,tt,nt)})}return R=R?R.then(Z,Z):Z()}this._invoke=U}at(I.prototype),I.prototype[_]=function(){return this},u.AsyncIterator=I,u.async=function(E,O,S,R,U){U===void 0&&(U=Promise);var $=new I(m(E,O,S,R),U);return u.isGeneratorFunction(O)?$:$.next().then(function(Y){return Y.done?Y.value:$.next()})};function j(E,O,S){var R=h;return function($,Y){if(R===f)throw new Error("Generator is already running");if(R===g){if($==="throw")throw Y;return k()}for(S.method=$,S.arg=Y;;){var Z=S.delegate;if(Z){var tt=W(Z,S);if(tt){if(tt===p)continue;return tt}}if(S.method==="next")S.sent=S._sent=S.arg;else if(S.method==="throw"){if(R===h)throw R=g,S.arg;S.dispatchException(S.arg)}else S.method==="return"&&S.abrupt("return",S.arg);R=f;var nt=y(E,O,S);if(nt.type==="normal"){if(R=S.done?g:d,nt.arg===p)continue;return{value:nt.arg,done:S.done}}else nt.type==="throw"&&(R=g,S.method="throw",S.arg=nt.arg)}}}function W(E,O){var S=E.iterator[O.method];if(S===n){if(O.delegate=null,O.method==="throw"){if(E.iterator.return&&(O.method="return",O.arg=n,W(E,O),O.method==="throw"))return p;O.method="throw",O.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var R=y(S,E.iterator,O.arg);if(R.type==="throw")return O.method="throw",O.arg=R.arg,O.delegate=null,p;var U=R.arg;if(!U)return O.method="throw",O.arg=new TypeError("iterator result is not an object"),O.delegate=null,p;if(U.done)O[E.resultName]=U.value,O.next=E.nextLoc,O.method!=="return"&&(O.method="next",O.arg=n);else return U;return O.delegate=null,p}at(J),M(J,A,"Generator"),J[C]=function(){return this},J.toString=function(){return"[object Generator]"};function K(E){var O={tryLoc:E[0]};1 in E&&(O.catchLoc=E[1]),2 in E&&(O.finallyLoc=E[2],O.afterLoc=E[3]),this.tryEntries.push(O)}function X(E){var O=E.completion||{};O.type="normal",delete O.arg,E.completion=O}function x(E){this.tryEntries=[{tryLoc:"root"}],E.forEach(K,this),this.reset(!0)}u.keys=function(E){var O=[];for(var S in E)O.push(S);return O.reverse(),function R(){for(;O.length;){var U=O.pop();if(U in E)return R.value=U,R.done=!1,R}return R.done=!0,R}};function P(E){if(E){var O=E[C];if(O)return O.call(E);if(typeof E.next=="function")return E;if(!isNaN(E.length)){var S=-1,R=function U(){for(;++S<E.length;)if(a.call(E,S))return U.value=E[S],U.done=!1,U;return U.value=n,U.done=!0,U};return R.next=R}}return{next:k}}u.values=P;function k(){return{value:n,done:!0}}return x.prototype={constructor:x,reset:function(E){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(X),!E)for(var O in this)O.charAt(0)==="t"&&a.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=n)},stop:function(){this.done=!0;var E=this.tryEntries[0],O=E.completion;if(O.type==="throw")throw O.arg;return this.rval},dispatchException:function(E){if(this.done)throw E;var O=this;function S(tt,nt){return $.type="throw",$.arg=E,O.next=tt,nt&&(O.method="next",O.arg=n),!!nt}for(var R=this.tryEntries.length-1;R>=0;--R){var U=this.tryEntries[R],$=U.completion;if(U.tryLoc==="root")return S("end");if(U.tryLoc<=this.prev){var Y=a.call(U,"catchLoc"),Z=a.call(U,"finallyLoc");if(Y&&Z){if(this.prev<U.catchLoc)return S(U.catchLoc,!0);if(this.prev<U.finallyLoc)return S(U.finallyLoc)}else if(Y){if(this.prev<U.catchLoc)return S(U.catchLoc,!0)}else if(Z){if(this.prev<U.finallyLoc)return S(U.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(E,O){for(var S=this.tryEntries.length-1;S>=0;--S){var R=this.tryEntries[S];if(R.tryLoc<=this.prev&&a.call(R,"finallyLoc")&&this.prev<R.finallyLoc){var U=R;break}}U&&(E==="break"||E==="continue")&&U.tryLoc<=O&&O<=U.finallyLoc&&(U=null);var $=U?U.completion:{};return $.type=E,$.arg=O,U?(this.method="next",this.next=U.finallyLoc,p):this.complete($)},complete:function(E,O){if(E.type==="throw")throw E.arg;return E.type==="break"||E.type==="continue"?this.next=E.arg:E.type==="return"?(this.rval=this.arg=E.arg,this.method="return",this.next="end"):E.type==="normal"&&O&&(this.next=O),p},finish:function(E){for(var O=this.tryEntries.length-1;O>=0;--O){var S=this.tryEntries[O];if(S.finallyLoc===E)return this.complete(S.completion,S.afterLoc),X(S),p}},catch:function(E){for(var O=this.tryEntries.length-1;O>=0;--O){var S=this.tryEntries[O];if(S.tryLoc===E){var R=S.completion;if(R.type==="throw"){var U=R.arg;X(S)}return U}}throw new Error("illegal catch attempt")},delegateYield:function(E,O,S){return this.delegate={iterator:P(E),resultName:O,nextLoc:S},this.method==="next"&&(this.arg=n),p}},u}(s.exports);try{regeneratorRuntime=o}catch{Function("r","regeneratorRuntime = r")(o)}},function(s,e,t){var o={"./bold.js":39,"./clear.js":40,"./code.js":41,"./fullscreen.js":42,"./h1.js":43,"./h2.js":44,"./h3.js":45,"./h4.js":46,"./h5.js":47,"./h6.js":48,"./hr.js":49,"./image.js":50,"./italic.js":51,"./link.js":52,"./ol.js":53,"./quote.js":54,"./redo.js":55,"./strikethrough.js":56,"./sync-scroll.js":57,"./table.js":58,"./ul.js":59,"./undo.js":60};function u(a){var n=r(a);return t(n)}function r(a){if(!t.o(o,a)){var n=new Error("Cannot find module '"+a+"'");throw n.code="MODULE_NOT_FOUND",n}return o[a]}u.keys=function(){return Object.keys(o)},u.resolve=r,s.exports=u,u.id=38},function(s,e,t){t.r(e);var o=t(2),u=t(1);t.d(e,"name",function(){return u.a}),e.default=function(r){r.insert(function(a){var n="**",b="**",C=r.langConfig.bold.placeholder,_=function(h){return h||C},A=Object(o.b)({selected:a,InsertGetter:function(h){return""+n+_(h)+b},selectedGetter:_}),M=A.insertContent,m=A.newSelected;return{text:M,selected:m}})}},function(s,e,t){t.r(e);var o=t(1);t.d(e,"name",function(){return o.b}),e.default=function(u){u.clear()}},function(s,e,t){t.r(e);var o=t(1);t.d(e,"name",function(){return o.c}),e.default=function(u){u.insert(function(r){var a="``` language",n="```",b=a+`
`+n;return r&&(b=a+`
  `+r+`
`+n),{text:b,selected:"language"}})}},function(s,e,t){t.r(e);var o=t(1);t.d(e,"name",function(){return o.d}),e.default=function(u,r){u.toggleFullScreen(r)}},function(s,e,t){t.r(e);var o=t(2),u=t(1);t.d(e,"name",function(){return u.e}),e.default=function(r){r.insert(function(a){var n="#",b=r.langConfig.h1.placeholder,C=function(y){return y||b},_=Object(o.b)({selected:a,InsertGetter:function(y){return n+" "+C(y)},selectedGetter:C}),A=_.insertContent,M=_.newSelected;return{text:A,selected:M}})}},function(s,e,t){t.r(e);var o=t(2),u=t(1);t.d(e,"name",function(){return u.f}),e.default=function(r){r.insert(function(a){var n="##",b=r.langConfig.h2.placeholder,C=function(y){return y||b},_=Object(o.b)({selected:a,InsertGetter:function(y){return n+" "+C(y)},selectedGetter:C}),A=_.insertContent,M=_.newSelected;return{text:A,selected:M}})}},function(s,e,t){t.r(e);var o=t(2),u=t(1);t.d(e,"name",function(){return u.g}),e.default=function(r){r.insert(function(a){var n="###",b=r.langConfig.h3.placeholder,C=function(y){return y||b},_=Object(o.b)({selected:a,InsertGetter:function(y){return n+" "+C(y)},selectedGetter:C}),A=_.insertContent,M=_.newSelected;return{text:A,selected:M}})}},function(s,e,t){t.r(e);var o=t(2),u=t(1);t.d(e,"name",function(){return u.h}),e.default=function(r){r.insert(function(a){var n="####",b=r.langConfig.h4.placeholder,C=function(y){return y||b},_=Object(o.b)({selected:a,InsertGetter:function(y){return n+" "+C(y)},selectedGetter:C}),A=_.insertContent,M=_.newSelected;return{text:A,selected:M}})}},function(s,e,t){t.r(e);var o=t(2),u=t(1);t.d(e,"name",function(){return u.i}),e.default=function(r){r.insert(function(a){var n="#####",b=r.langConfig.h5.placeholder,C=function(y){return y||b},_=Object(o.b)({selected:a,InsertGetter:function(y){return n+" "+C(y)},selectedGetter:C}),A=_.insertContent,M=_.newSelected;return{text:A,selected:M}})}},function(s,e,t){t.r(e);var o=t(2),u=t(1);t.d(e,"name",function(){return u.j}),e.default=function(r){r.insert(function(a){var n="######",b=r.langConfig.h6.placeholder,C=function(y){return y||b},_=Object(o.b)({selected:a,InsertGetter:function(y){return n+" "+C(y)},selectedGetter:C}),A=_.insertContent,M=_.newSelected;return{text:A,selected:M}})}},function(s,e,t){t.r(e);var o=t(1);t.d(e,"name",function(){return o.k}),e.default=function(u){u.insert(function(){return{text:"------------------------------------"}})}},function(s,e,t){t.r(e);var o=t(1);t.d(e,"name",function(){return o.l}),e.default=function(u,r){var a=r===void 0?{}:r,n=a.url,b=a.desc,C=a.width,_=a.height;u.insert(function(){var A="http://",M="Description",m=A,y="!["+(b||M)+"]("+(n||A)+")",h=[];return C&&h.push('width="'+C+'"'),_&&h.push('height="'+_+'"'),h.length&&(y+="{{{"+h.join(" ")+"}}}"),n&&b?m=null:n?m=M:b&&(m=A),{text:y,selected:m}})}},function(s,e,t){t.r(e);var o=t(2),u=t(1);t.d(e,"name",function(){return u.m}),e.default=function(r){r.insert(function(a){var n="*",b="*",C=r.langConfig.italic.placeholder,_=function(h){return h||C},A=Object(o.b)({selected:a,InsertGetter:function(h){return""+n+_(h)+b},selectedGetter:_}),M=A.insertContent,m=A.newSelected;return{text:M,selected:m}})}},function(s,e,t){t.r(e);var o=t(2),u=t(1);t.d(e,"name",function(){return u.n}),e.default=function(r){r.insert(function(a){var n=r.langConfig.link.descPlaceholder,b="http://",C=Object(o.b)({selected:a,InsertGetter:function(m){return"["+(m||n)+"]("+b+")"},selectedGetter:function(m){return m?b:n}}),_=C.insertContent,A=C.newSelected;return{text:_,selected:A}})}},function(s,e,t){t.r(e);var o=t(2),u=t(1);t.d(e,"name",function(){return u.o}),e.default=function(r){r.insert(function(a){var n=r.langConfig.ol.placeholder,b=function(m){return m||n},C=Object(o.b)({selected:a,InsertGetter:function(m,y){return y+". "+b(m)},selectedGetter:b,ignoreEmptyLine:!1}),_=C.insertContent,A=C.newSelected;return{text:_,selected:A}})}},function(s,e,t){t.r(e);var o=t(1);t.d(e,"name",function(){return o.p}),e.default=function(u){u.insert(function(r){var a=">",n=r||u.langConfig.quote.placeholder;return{text:a+" "+n,selected:n}})}},function(s,e,t){t.r(e);var o=t(1);t.d(e,"name",function(){return o.q}),e.default=function(u){u.redo()}},function(s,e,t){t.r(e);var o=t(2),u=t(1);t.d(e,"name",function(){return u.r}),e.default=function(r){r.insert(function(a){var n="~~",b="~~",C=r.langConfig.strikethrough.placeholder,_=function(h){return h||C},A=Object(o.b)({selected:a,InsertGetter:function(h){return""+n+_(h)+b},selectedGetter:_}),M=A.insertContent,m=A.newSelected;return{text:M,selected:m}})}},function(s,e,t){t.r(e);var o=t(1);t.d(e,"name",function(){return o.s}),e.default=function(u,r){u.toggleSyncScroll(r)}},function(s,e,t){t.r(e);var o=t(1);t.d(e,"name",function(){return o.t}),e.default=function(u){u.insert(function(){var r=`|column1|column2|column3|
|-|-|-|
|content1|content2|content3|`;return{text:r,selected:"column1"}})}},function(s,e,t){t.r(e);var o=t(2),u=t(1);t.d(e,"name",function(){return u.u}),e.default=function(r){r.insert(function(a){var n=r.langConfig.ul.placeholder,b=function(m){return m||n},C=Object(o.b)({selected:a,InsertGetter:function(m){return"- "+b(m)},selectedGetter:b,ignoreEmptyLine:!1}),_=C.insertContent,A=C.newSelected;return{text:_,selected:A}})}},function(s,e,t){t.r(e);var o=t(1);t.d(e,"name",function(){return o.v}),e.default=function(u){u.undo()}},function(s,e,t){var o={"./bold.js":62,"./clear.js":63,"./code.js":64,"./fullscreen.js":65,"./h.js":66,"./hr.js":67,"./image.js":23,"./italic.js":68,"./link.js":69,"./ol.js":70,"./preview.js":71,"./quote.js":72,"./redo.js":73,"./save.js":74,"./strikethrough.js":75,"./sync-scroll.js":76,"./table.js":77,"./toc.js":78,"./ul.js":79,"./undo.js":80};function u(a){var n=r(a);return t(n)}function r(a){if(!t.o(o,a)){var n=new Error("Cannot find module '"+a+"'");throw n.code="MODULE_NOT_FOUND",n}return o[a]}u.keys=function(){return Object.keys(o)},u.resolve=r,s.exports=u,u.id=61},function(s,e,t){t.r(e);var o=t(1);e.default={name:o.a,icon:"v-md-icon-bold",title:function(r){return r.langConfig.bold.toolbar+"\uFF08Ctrl+B\uFF09"},action:function(r){r.execCommand(o.a)}}},function(s,e,t){t.r(e);var o=t(1);e.default={name:o.b,icon:"v-md-icon-clear",title:function(r){return r.langConfig.clear.toolbar},action:function(r){r.execCommand(o.b)}}},function(s,e,t){t.r(e);var o=t(1);e.default={name:o.c,icon:"v-md-icon-code",title:function(r){return r.langConfig.code.toolbar},action:function(r){r.execCommand(o.c)}}},function(s,e,t){t.r(e);var o=t(1);e.default={name:o.d,icon:"v-md-icon-fullscreen",title:function(r){var a=r.langConfig.fullscreen;return r.fullscreen?a.disabled:a.enabled},active:function(r){return r.fullscreen},action:function(r){r.execCommand(o.d,!r.fullscreen)}}},function(s,e,t){t.r(e);var o=t(1);e.default={name:"h",text:"H",title:function(r){return r.langConfig.h.toolbar+"\uFF08Ctrl+1~6\uFF09"},menus:[{name:o.e,text:function(r){return r.langConfig.h1.toolbar},action:function(r){r.execCommand(o.e)}},{name:o.f,text:function(r){return r.langConfig.h2.toolbar},action:function(r){r.execCommand(o.f)}},{name:o.g,text:function(r){return r.langConfig.h3.toolbar},action:function(r){r.execCommand(o.g)}},{name:o.h,text:function(r){return r.langConfig.h4.toolbar},action:function(r){r.execCommand(o.h)}},{name:o.i,text:function(r){return r.langConfig.h5.toolbar},action:function(r){r.execCommand(o.i)}},{name:o.j,text:function(r){return r.langConfig.h6.toolbar},action:function(r){r.execCommand(o.j)}}]}},function(s,e,t){t.r(e);var o=t(1);e.default={name:o.k,icon:"v-md-icon-horizontal",title:function(r){return r.langConfig.hr.toolbar},action:function(r){r.execCommand(o.k)}}},function(s,e,t){t.r(e);var o=t(1);e.default={name:o.m,icon:"v-md-icon-italic",title:function(r){return r.langConfig.italic.toolbar+"\uFF08Ctrl+I\uFF09"},action:function(r){r.execCommand(o.m)}}},function(s,e,t){t.r(e);var o=t(1);e.default={name:o.n,icon:"v-md-icon-link",title:function(r){return r.langConfig.link.toolbar+"\uFF08Ctrl+L\uFF09"},action:function(r){r.execCommand(o.n)}}},function(s,e,t){t.r(e);var o=t(1);e.default={name:o.o,icon:"v-md-icon-ol",title:function(r){return r.langConfig.ol.toolbar+"\uFF08Ctrl+O\uFF09"},action:function(r){r.execCommand(o.o)}}},function(s,e,t){t.r(e);var o=t(4);e.default={name:"preview",icon:"v-md-icon-preview",title:function(r){var a=r.langConfig.preview;return r.currentMode===o.a.EDITABLE?a.disabled:a.enabled},active:function(r){return r.currentMode===o.a.EDITABLE},action:function(r){r.currentMode=r.currentMode===o.a.EDITABLE?o.a.EDIT:o.a.EDITABLE}}},function(s,e,t){t.r(e);var o=t(1);e.default={name:o.p,icon:"v-md-icon-quote",title:function(r){return r.langConfig.quote.toolbar+"\uFF08Ctrl+Q\uFF09"},action:function(r){r.execCommand(o.p)}}},function(s,e,t){t.r(e);var o=t(1);e.default={name:o.q,icon:"v-md-icon-redo",title:function(r){return r.langConfig.redo.toolbar+"\uFF08Ctrl+Y\uFF09"},action:function(r){r.execCommand(o.q)}}},function(s,e,t){t.r(e),e.default={name:"save",icon:"v-md-icon-save",title:function(u){return u.langConfig.save.toolbar+"\uFF08Ctrl+S\uFF09"},action:function(u){u.save()}}},function(s,e,t){t.r(e);var o=t(1);e.default={name:o.r,icon:"v-md-icon-strikethrough",title:function(r){return r.langConfig.strikethrough.toolbar},action:function(r){r.execCommand(o.r)}}},function(s,e,t){t.r(e);var o=t(1);e.default={name:o.s,icon:"v-md-icon-sync",title:function(r){var a=r.langConfig.syncScroll;return r.enableSyncScroll?a.disabled:a.enabled},active:function(r){return r.enableSyncScroll},action:function(r){r.execCommand(o.s,!r.enableSyncScroll)}}},function(s,e,t){t.r(e);var o=t(1);e.default={name:o.t,icon:"v-md-icon-table",title:function(r){return r.langConfig.table.toolbar},action:function(r){r.execCommand(o.t)}}},function(s,e,t){t.r(e),e.default={name:"toc",icon:"v-md-icon-toc",title:function(u){var r=u.langConfig.toc;return u.tocVisible?r.disabled:r.enabled},active:function(u){return u.tocVisible},action:function(u){u.toggleToc()}}},function(s,e,t){t.r(e);var o=t(1);e.default={name:o.u,icon:"v-md-icon-ul",title:function(r){return r.langConfig.ul.toolbar+"\uFF08Ctrl+U\uFF09"},action:function(r){r.execCommand(o.u)}}},function(s,e,t){t.r(e);var o=t(1);e.default={name:o.v,icon:"v-md-icon-undo",title:function(r){return r.langConfig.undo.toolbar+"\uFF08Ctrl+Z\uFF09"},action:function(r){r.execCommand(o.v)}}},function(s,e,t){},function(s,e,t){t(27)},function(s,e,t){t(28)},function(s,e,t){t(29)},function(s,e,t){t(30)},function(s,e){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch{typeof window=="object"&&(t=window)}s.exports=t},function(s,e,t){t(31)},function(s,e,t){t(32)},function(s,e,t){t(33)},function(s,e,t){var o={"./bold.js":91,"./h1.js":92,"./h2.js":93,"./h3.js":94,"./h4.js":95,"./h5.js":96,"./h6.js":97,"./italic.js":98,"./link.js":99,"./ol.js":100,"./quote.js":101,"./save.js":102,"./ul.js":103};function u(a){var n=r(a);return t(n)}function r(a){if(!t.o(o,a)){var n=new Error("Cannot find module '"+a+"'");throw n.code="MODULE_NOT_FOUND",n}return o[a]}u.keys=function(){return Object.keys(o)},u.resolve=r,s.exports=u,u.id=90},function(s,e,t){t.r(e);var o=t(1);e.default={modifier:"ctrl",key:"b",action:function(r){r.execCommand(o.a)}}},function(s,e,t){t.r(e);var o=t(1);e.default={modifier:"ctrl",key:"1",action:function(r){r.execCommand(o.e)}}},function(s,e,t){t.r(e);var o=t(1);e.default={modifier:"ctrl",key:"2",action:function(r){r.execCommand(o.f)}}},function(s,e,t){t.r(e);var o=t(1);e.default={modifier:"ctrl",key:"3",action:function(r){r.execCommand(o.g)}}},function(s,e,t){t.r(e);var o=t(1);e.default={modifier:"ctrl",key:"4",action:function(r){r.execCommand(o.h)}}},function(s,e,t){t.r(e);var o=t(1);e.default={modifier:"ctrl",key:"5",action:function(r){r.execCommand(o.i)}}},function(s,e,t){t.r(e);var o=t(1);e.default={modifier:"ctrl",key:"6",action:function(r){r.execCommand(o.j)}}},function(s,e,t){t.r(e);var o=t(1);e.default={modifier:"ctrl",key:"i",action:function(r){r.execCommand(o.m)}}},function(s,e,t){t.r(e);var o=t(1);e.default={modifier:"ctrl",key:"l",action:function(r){r.execCommand(o.n)}}},function(s,e,t){t.r(e);var o=t(1);e.default={modifier:"ctrl",key:"o",action:function(r){r.execCommand(o.o)}}},function(s,e,t){t.r(e);var o=t(1);e.default={modifier:"ctrl",key:"q",action:function(r){r.execCommand(o.p)}}},function(s,e,t){t.r(e),e.default={modifier:"ctrl",key:"s",action:function(u){u.save()}}},function(s,e,t){t.r(e);var o=t(1);e.default={modifier:"ctrl",key:"u",action:function(r){r.execCommand(o.u)}}},function(s,e,t){},,function(s,e,t){t(104)},,function(s,e,t){t.r(e);var o=t(0);function u(I,j,W,K,X,x){var P=Object(o.resolveComponent)("toc-nav"),k=Object(o.resolveComponent)("scrollbar"),E=Object(o.resolveComponent)("v-md-textarea-editor"),O=Object(o.resolveComponent)("v-md-preview"),S=Object(o.resolveComponent)("v-md-upload-file"),R=Object(o.resolveComponent)("v-md-container");return Object(o.openBlock)(),Object(o.createBlock)(R,{"left-toolbar":I.leftToolbar,"right-toolbar":I.rightToolbar,toolbars:I.toolbars,"disabled-menus":I.disabledMenus,height:I.height,fullscreen:I.fullscreen,"left-area-visible":I.tocVisible,"left-area-title":I.langConfig.toc.title,"left-area-reverse":I.tocNavPositionRight,mode:I.currentMode,onEditorWrapperClick:I.handleEditorWrapperClick,onToolbarItemClick:I.handleToolbarItemClick,onToolbarMenuClick:I.handleToolbarMenuClick,ref:"contaner"},{"left-area":Object(o.withCtx)(function(){return[Object(o.createVNode)(k,null,{default:Object(o.withCtx)(function(){return[Object(o.createVNode)(P,{titles:I.titles,onNavClick:I.handleNavClick},null,8,["titles","onNavClick"])]}),_:1})]}),editor:Object(o.withCtx)(function(){return[Object(o.createVNode)(k,{onScroll:I.handleEditorScroll,ref:"editorScroller"},{default:Object(o.withCtx)(function(){return[Object(o.createVNode)(E,{"model-value":I.text,"min-height":I.textEditorMinHeight,placeholder:I.placeholder,"onUpdate:modelValue":I.handleInput,onClick:j[1]||(j[1]=Object(o.withModifiers)(function(){},["stop"])),onDrop:I.handleDrop,onPaste:I.handlePaste,onBlur:I.handleBlur,ref:"editorEgine"},null,8,["model-value","min-height","placeholder","onUpdate:modelValue","onDrop","onPaste","onBlur"])]}),_:1},8,["onScroll"])]}),preview:Object(o.withCtx)(function(){return[Object(o.createVNode)(k,{ref:"previewScroller"},{default:Object(o.withCtx)(function(){return[Object(o.createVNode)(O,{text:I.text,"tab-size":I.tabSize,"scroll-container":I.getPreviewScrollContainer,"before-change":I.beforePreviewChange,onChange:I.handleChange,onImageClick:I.handlePreviewImageClick,ref:"preview"},null,8,["text","tab-size","scroll-container","before-change","onChange","onImageClick"])]}),_:1},512)]}),default:Object(o.withCtx)(function(){return[I.hasUploadImage?(Object(o.openBlock)(),Object(o.createBlock)(S,{key:0,"upload-config":I.uploadConfig,ref:"uploadFile"},null,8,["upload-config"])):Object(o.createCommentVNode)("v-if",!0)]}),_:1},8,["left-toolbar","right-toolbar","toolbars","disabled-menus","height","fullscreen","left-area-visible","left-area-title","left-area-reverse","mode","onEditorWrapperClick","onToolbarItemClick","onToolbarMenuClick"])}var r=t(10),a=t.n(r),n=t(17),b={class:"v-md-textarea-editor"},C=Object(o.createVNode)("br",null,null,-1);function _(I,j,W,K,X,x){return Object(o.openBlock)(),Object(o.createBlock)("div",b,[Object(o.createVNode)("pre",{style:{minHeight:W.minHeight}},[(Object(o.openBlock)(!0),Object(o.createBlock)(o.Fragment,null,Object(o.renderList)(W.modelValue.split(`
`),function(P,k){return Object(o.openBlock)(),Object(o.createBlock)("section",{"data-line":k+1},[Object(o.createTextVNode)(Object(o.toDisplayString)(P||" "),1),C],8,["data-line"])}),256))],4),Object(o.createVNode)("textarea",{ref:"textarea",value:W.modelValue,placeholder:W.placeholder,spellcheck:"false",onCompositionstart:j[1]||(j[1]=function(){return x.handleCompositionStart.apply(x,arguments)}),onCompositionupdate:j[2]||(j[2]=function(){return x.handleCompositionUpdate.apply(x,arguments)}),onCompositionend:j[3]||(j[3]=function(){return x.handleCompositionEnd.apply(x,arguments)}),onInput:j[4]||(j[4]=function(){return x.handleInput.apply(x,arguments)}),onClick:j[5]||(j[5]=function(){return x.updateCurrentHistoryRange.apply(x,arguments)}),onPaste:j[6]||(j[6]=function(){return x.handlePaste.apply(x,arguments)}),onBlur:j[7]||(j[7]=function(){return x.handleBlur.apply(x,arguments)}),onKeydown:[j[8]||(j[8]=Object(o.withKeys)(Object(o.withModifiers)(function(){},["prevent"]),["tab"])),j[9]||(j[9]=Object(o.withKeys)(Object(o.withModifiers)(function(){return x.undo.apply(x,arguments)},["ctrl","prevent","exact"]),["z"])),j[10]||(j[10]=Object(o.withKeys)(Object(o.withModifiers)(function(){return x.undo.apply(x,arguments)},["meta","prevent","exact"]),["z"])),j[11]||(j[11]=Object(o.withKeys)(Object(o.withModifiers)(function(){return x.redo.apply(x,arguments)},["ctrl","prevent","exact"]),["y"])),j[12]||(j[12]=Object(o.withKeys)(Object(o.withModifiers)(function(){return x.redo.apply(x,arguments)},["meta","prevent","exact"]),["y"]))],onKeyup:[j[13]||(j[13]=Object(o.withKeys)(Object(o.withModifiers)(function(){return x.updateCurrentHistoryRange.apply(x,arguments)},["shift","exact"]),["up"])),j[14]||(j[14]=Object(o.withKeys)(Object(o.withModifiers)(function(){return x.updateCurrentHistoryRange.apply(x,arguments)},["shift","exact"]),["down"])),j[15]||(j[15]=Object(o.withKeys)(Object(o.withModifiers)(function(){return x.updateCurrentHistoryRange.apply(x,arguments)},["shift","exact"]),["left"])),j[16]||(j[16]=Object(o.withKeys)(Object(o.withModifiers)(function(){return x.updateCurrentHistoryRange.apply(x,arguments)},["shift","exact"]),["right"]))]},null,40,["value","placeholder"])])}var A=t(5),M;function m(I){if(I.nodeName!=="TEXTAREA")return!1;if(typeof M>"u"){var j=document.createElement("textarea");j.value=1,M=!!j.firstChild}return M}function y(I,j){if(I.focus(),document.selection){var W=document.selection.createRange();W.text=j,W.collapse(!1),W.select();return}var K=document.execCommand("insertText",!1,j);if(!K){var X=I.selectionStart,x=I.selectionEnd;if(typeof I.setRangeText=="function")I.setRangeText(j);else{var P=document.createRange(),k=document.createTextNode(j);if(m(I)){var E=I.firstChild;if(!E)I.appendChild(k);else{for(var O=0,S=null,R=null;E&&(S===null||R===null);){var U=E.nodeValue.length;X>=O&&X<=O+U&&P.setStart(S=E,X-O),x>=O&&x<=O+U&&P.setEnd(R=E,x-O),O+=U,E=E.nextSibling}X!==x&&P.deleteContents()}}if(m(I)&&P.commonAncestorContainer.nodeName==="#text")P.insertNode(k);else{var $=I.value;I.value=$.slice(0,X)+j+$.slice(x)}}I.setSelectionRange(X+j.length,X+j.length);var Y=document.createEvent("UIEvent");Y.initEvent("input",!0,!1),I.dispatchEvent(Y)}}var h=y,d=t(36),f=t(2),g={name:"v-md-textarea-editor",props:{modelValue:String,minHeight:String,placeholder:String,historyDebounce:{type:Number,default:400},historyMax:{type:Number,default:30}},emits:["blur","paste","update:modelValue"],data:function(){return{isComposing:!1}},computed:{textareaEl:function(){return this.$refs.textarea}},watch:{modelValue:function(){var j=this;this.clearTimeout(),this.triggerInputBySetHistory||(this.timmer=setTimeout(function(){j.saveHistory(),j.clearTimeout()},this.historyDebounce))}},created:function(){this.historyStack=[],this.historyIndex=0,this.hotkeysManager=new d.a},mounted:function(){this.saveHistory(),this.textareaEl.addEventListener("keydown",this.handleKeydown,!1)},beforeUnmount:function(){this.textareaEl.removeEventListener("keydown",this.handleKeydown,!1)},methods:{handleCompositionStart:function(){this.isComposing=!0},handleCompositionUpdate:function(j){var W=j.target.value,K=W[W.length-1]||"";this.isComposing=!Object(f.e)(K)},handleCompositionEnd:function(j){this.isComposing&&(this.isComposing=!1,this.handleInput(j))},handlePaste:function(j){this.$emit("paste",j)},handleBlur:function(j){this.$emit("blur",j)},registerHotkeys:function(){var j;(j=this.hotkeysManager).registerHotkeys.apply(j,arguments)},handleKeydown:function(j){this.hotkeysManager.dispatch(j)},heightAtLine:function(j){var W=this.$el.querySelector('section[data-line="'+j+'"]');return W?W.offsetTop+W.offsetHeight:0},clearTimeout:function(I){function j(){return I.apply(this,arguments)}return j.toString=function(){return I.toString()},j}(function(){this.timmer&&clearTimeout(this.timmer),this.timmer=null}),updateCurrentHistoryRange:function(){this.timmer||this.updateHistory(this.historyIndex,{range:this.getRange()})},handleInput:function(j){this.isComposing||this.$emit("update:modelValue",j.target.value)},saveHistory:function(){var j=this.getRange(),W={value:this.modelValue,range:j};this.historyStack=this.historyStack.slice(0,this.historyIndex+1),this.historyStack.push(W),this.historyStack.length>this.historyMax&&this.historyStack.shift(),this.historyIndex=this.historyStack.length-1},updateHistory:function(j,W){var K=this.historyStack[j];"value"in W&&(K.value=W.value),Object(A.a)(K.range,W.range)},goHistory:function(j){var W=this,K=this.historyStack[j],X=K.value,x=K.range;this.$emit("update:modelValue",X),this.triggerInputBySetHistory=!0,this.$nextTick(function(){W.triggerInputBySetHistory=!1,W.setRange(x)})},getRange:function(){return{start:this.textareaEl.selectionStart,end:this.textareaEl.selectionEnd}},setRange:function(j){var W=j.start,K=j.end;this.textareaEl.setSelectionRange(W,K),this.updateCurrentHistoryRange()},focus:function(){this.textareaEl.focus()},insertText:function(j){h(this.textareaEl,j)},undo:function(){this.historyIndex>0&&(this.historyIndex--,this.goHistory(this.historyIndex))},redo:function(){this.historyIndex<this.historyStack.length-1&&(this.historyIndex++,this.goHistory(this.historyIndex))}}};t(106),g.render=_;var p=g,F=t(35),z,H={components:(z={},z[p.name]=p,z),watch:{modelValue:function(){this.text=this.modelValue},height:{handler:function(){var j=this;return Object(n.a)(a.a.mark(function W(){var K;return a.a.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(f.d){x.next=2;break}return x.abrupt("return");case 2:return x.next=4,j.$nextTick();case 4:j.height?(K=j.$el.querySelector(".v-md-editor__editor-wrapper"),j.textEditorMinHeight=window.getComputedStyle(K).height):j.textEditorMinHeight="";case 5:case"end":return x.stop()}},W)}))()},immediate:!0}},data:function(){return{textEditorMinHeight:""}},methods:{handleEditorWrapperClick:function(){this.setFocusEnd()},editorFocusEnd:function(){this.focus(),this.$refs.editorEgine.setRange({start:this.text.length,end:this.text.length})},delLineLeft:function(){var j=this.$refs.editorEgine,W=j.getRange(),K=W.start,X=this.getCursorLineLeftText();j.setRange({start:K-X.length-1,end:K}),this.replaceSelectionText(`
`)},getCursorLineLeftText:function(){var j=this.$refs.editorEgine.getRange(),W=j.start,K=j.end;return W===K?this.text.slice(0,W).split(`
`).pop():null},editorRegisterHotkeys:function(){var j;(j=this.$refs.editorEgine).registerHotkeys.apply(j,arguments)},editorScrollToTop:function(j){this.$refs.editorScroller.scrollTo(j)},getScrollInfo:function(){return this.$refs.editorScroller.getScrollInfo()},heightAtLine:function(){var j;return(j=this.$refs.editorEgine).heightAtLine.apply(j,arguments)},focus:function(){this.$refs.editorEgine.focus()},undo:function(){this.$refs.editorEgine.undo()},redo:function(){this.$refs.editorEgine.redo()},clear:function(){this.focus(),this.handleInput("")},replaceSelectionText:function(j){this.$refs.editorEgine.insertText(j)},getCurrentSelectedStr:function(){var j=this.$refs.editorEgine.getRange(),W=j.start,K=j.end;return K>W?this.text.slice(W,K):null},changeSelctionTo:function(j,W){var K=this.$refs.editorEgine,X=j.indexOf(W),x=K.getRange().end;if(X!==-1){var P=this.text.slice(0,x),k=P.length-j.length,E=k+X,O=E+W.length;this.$refs.editorEgine.setRange({start:E,end:O})}}}};Object(F.a)(H);var N=H;N.render=u;var G=N,it=t(7);t(18);var J="2.3.15",at=function(j){j.component(G.name,G)};G.version=J,G.install=at,G.xss=it.a,G.use=function(I,j){return typeof I=="function"?I(G,j):I.install(G,j),G},e.default=G}]).default})})(Re);const se=Un(Re.exports);Pe.registerLanguage("javascript",$n);se.use(Nn,{Hljs:Pe});var Be=globalThis&&globalThis.__extends||function(){var c=function(l,i){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,e){s.__proto__=e}||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t])},c(l,i)};return function(l,i){c(l,i);function s(){this.constructor=l}l.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}}(),rt;(function(c){c.InvalidFile="InvalidFile",c.InvalidToken="InvalidToken",c.InvalidMetadata="InvalidMetadata",c.InvalidChunkSize="InvalidChunkSize",c.InvalidCustomVars="InvalidCustomVars",c.NotAvailableUploadHost="NotAvailableUploadHost",c.ReadCacheFailed="ReadCacheFailed",c.InvalidCacheData="InvalidCacheData",c.WriteCacheFailed="WriteCacheFailed",c.RemoveCacheFailed="RemoveCacheFailed",c.GetCanvasContextFailed="GetCanvasContextFailed",c.UnsupportedFileType="UnsupportedFileType",c.FileReaderReadFailed="FileReaderReadFailed",c.NotAvailableXMLHttpRequest="NotAvailableXMLHttpRequest",c.InvalidProgressEventTarget="InvalidProgressEventTarget",c.RequestError="RequestError"})(rt||(rt={}));var ot=function(){function c(l,i){this.name=l,this.message=i,this.stack=new Error().stack}return c}(),Rt=function(c){Be(l,c);function l(i,s,e,t){var o=c.call(this,rt.RequestError,e)||this;return o.code=i,o.reqId=s,o.isRequestError=!0,o.data=t,o}return l}(ot),er=function(c){Be(l,c);function l(i,s){return s===void 0&&(s=""),c.call(this,0,s,i)||this}return l}(Rt),nr=function(){function c(l,i){this.runTask=l,this.limit=i,this.aborted=!1,this.queue=[],this.processing=[]}return c.prototype.enqueue=function(l){var i=this;return new Promise(function(s,e){i.queue.push({task:l,resolve:s,reject:e}),i.check()})},c.prototype.run=function(l){var i=this;this.queue=this.queue.filter(function(s){return s!==l}),this.processing.push(l),this.runTask(l.task).then(function(){i.processing=i.processing.filter(function(s){return s!==l}),l.resolve(),i.check()},function(s){return l.reject(s)})},c.prototype.check=function(){var l=this;if(!this.aborted){var i=this.processing.length,s=this.limit-i;this.queue.slice(0,s).forEach(function(e){l.run(e)})}},c.prototype.abort=function(){this.queue=[],this.aborted=!0},c}(),rr=globalThis&&globalThis.__extends||function(){var c=function(l,i){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,e){s.__proto__=e}||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t])},c(l,i)};return function(l,i){c(l,i);function s(){this.constructor=l}l.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}}(),Dt=globalThis&&globalThis.__assign||function(){return Dt=Object.assign||function(c){for(var l,i=1,s=arguments.length;i<s;i++){l=arguments[i];for(var e in l)Object.prototype.hasOwnProperty.call(l,e)&&(c[e]=l[e])}return c},Dt.apply(this,arguments)},ir=function(){function c(){this.closed=!1}return c.prototype.unsubscribe=function(){this.closed||(this.closed=!0,this._unsubscribe&&this._unsubscribe())},c.prototype.add=function(l){this._unsubscribe=l},c}(),or=function(c){rr(l,c);function l(i,s,e){var t=c.call(this)||this;return t.isStopped=!1,i&&typeof i=="object"?t.destination=i:t.destination=Dt(Dt(Dt({},i&&{next:i}),s&&{error:s}),e&&{complete:e}),t}return l.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,c.prototype.unsubscribe.call(this))},l.prototype.next=function(i){!this.isStopped&&this.destination.next&&this.destination.next(i)},l.prototype.error=function(i){!this.isStopped&&this.destination.error&&(this.isStopped=!0,this.destination.error(i))},l.prototype.complete=function(i){!this.isStopped&&this.destination.complete&&(this.isStopped=!0,this.destination.complete(i))},l}(ir),ar=function(){function c(l){this._subscribe=l}return c.prototype.subscribe=function(l,i,s){var e=new or(l,i,s);return e.add(this._subscribe(e)),e},c}();function sr(c){if(c===null||typeof c>"u")return"";var l=c+"",i="",s,e,t=0;s=e=0,t=l.length;for(var o=0;o<t;o++){var u=l.charCodeAt(o),r=null;if(u<128)e++;else if(u>127&&u<2048)r=String.fromCharCode(u>>6|192,u&63|128);else if((u&63488^55296)>0)r=String.fromCharCode(u>>12|224,u>>6&63|128,u&63|128);else{if((u&64512^55296)>0)throw new RangeError("Unmatched trail surrogate at "+o);var a=l.charCodeAt(++o);if((a&64512^56320)>0)throw new RangeError("Unmatched lead surrogate at "+(o-1));u=((u&1023)<<10)+(a&1023)+65536,r=String.fromCharCode(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}r!==null&&(e>s&&(i+=l.slice(s,e)),i+=r,s=e=o+1)}return e>s&&(i+=l.slice(s,t)),i}function lr(c){var l=[],i=0,s=0,e=0;for(c+="";i<c.length;){s=c.charCodeAt(i)&255,e=0,s<=191?(s=s&127,e=1):s<=223?(s=s&31,e=2):s<=239?(s=s&15,e=3):(s=s&7,e=4);for(var t=1;t<e;++t)s=s<<6|c.charCodeAt(t+i)&63;e===4?(s-=65536,l.push(String.fromCharCode(55296|s>>10&1023)),l.push(String.fromCharCode(56320|s&1023))):l.push(String.fromCharCode(s)),i+=e}return l.join("")}function ur(c){var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i,s,e,t,o,u,r,a,n=0,b=0,C="",_=[];if(!c)return c;c=sr(c+"");do i=c.charCodeAt(n++),s=c.charCodeAt(n++),e=c.charCodeAt(n++),a=i<<16|s<<8|e,t=a>>18&63,o=a>>12&63,u=a>>6&63,r=a&63,_[b++]=l.charAt(t)+l.charAt(o)+l.charAt(u)+l.charAt(r);while(n<c.length);switch(C=_.join(""),c.length%3){case 1:C=C.slice(0,-2)+"==";break;case 2:C=C.slice(0,-1)+"=";break}return C}function cr(c){var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i,s,e,t,o,u,r,a,n=0,b=0,C="",_=[];if(!c)return c;c+="";do t=l.indexOf(c.charAt(n++)),o=l.indexOf(c.charAt(n++)),u=l.indexOf(c.charAt(n++)),r=l.indexOf(c.charAt(n++)),a=t<<18|o<<12|u<<6|r,i=a>>16&255,s=a>>8&255,e=a&255,u===64?_[b++]=String.fromCharCode(i):r===64?_[b++]=String.fromCharCode(i,s):_[b++]=String.fromCharCode(i,s,e);while(n<c.length);return C=_.join(""),lr(C)}function Fe(c){return c=ur(c),c.replace(/\//g,"_").replace(/\+/g,"-")}function fr(c){return c=c.replace(/_/g,"/").replace(/-/g,"+"),cr(c)}var Ue={exports:{}};(function(c,l){(function(i){c.exports=i()})(function(i){var s=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function e(y,h){var d=y[0],f=y[1],g=y[2],p=y[3];d+=(f&g|~f&p)+h[0]-680876936|0,d=(d<<7|d>>>25)+f|0,p+=(d&f|~d&g)+h[1]-389564586|0,p=(p<<12|p>>>20)+d|0,g+=(p&d|~p&f)+h[2]+606105819|0,g=(g<<17|g>>>15)+p|0,f+=(g&p|~g&d)+h[3]-1044525330|0,f=(f<<22|f>>>10)+g|0,d+=(f&g|~f&p)+h[4]-176418897|0,d=(d<<7|d>>>25)+f|0,p+=(d&f|~d&g)+h[5]+1200080426|0,p=(p<<12|p>>>20)+d|0,g+=(p&d|~p&f)+h[6]-1473231341|0,g=(g<<17|g>>>15)+p|0,f+=(g&p|~g&d)+h[7]-45705983|0,f=(f<<22|f>>>10)+g|0,d+=(f&g|~f&p)+h[8]+1770035416|0,d=(d<<7|d>>>25)+f|0,p+=(d&f|~d&g)+h[9]-1958414417|0,p=(p<<12|p>>>20)+d|0,g+=(p&d|~p&f)+h[10]-42063|0,g=(g<<17|g>>>15)+p|0,f+=(g&p|~g&d)+h[11]-1990404162|0,f=(f<<22|f>>>10)+g|0,d+=(f&g|~f&p)+h[12]+1804603682|0,d=(d<<7|d>>>25)+f|0,p+=(d&f|~d&g)+h[13]-40341101|0,p=(p<<12|p>>>20)+d|0,g+=(p&d|~p&f)+h[14]-1502002290|0,g=(g<<17|g>>>15)+p|0,f+=(g&p|~g&d)+h[15]+1236535329|0,f=(f<<22|f>>>10)+g|0,d+=(f&p|g&~p)+h[1]-165796510|0,d=(d<<5|d>>>27)+f|0,p+=(d&g|f&~g)+h[6]-1069501632|0,p=(p<<9|p>>>23)+d|0,g+=(p&f|d&~f)+h[11]+643717713|0,g=(g<<14|g>>>18)+p|0,f+=(g&d|p&~d)+h[0]-373897302|0,f=(f<<20|f>>>12)+g|0,d+=(f&p|g&~p)+h[5]-701558691|0,d=(d<<5|d>>>27)+f|0,p+=(d&g|f&~g)+h[10]+38016083|0,p=(p<<9|p>>>23)+d|0,g+=(p&f|d&~f)+h[15]-660478335|0,g=(g<<14|g>>>18)+p|0,f+=(g&d|p&~d)+h[4]-405537848|0,f=(f<<20|f>>>12)+g|0,d+=(f&p|g&~p)+h[9]+568446438|0,d=(d<<5|d>>>27)+f|0,p+=(d&g|f&~g)+h[14]-1019803690|0,p=(p<<9|p>>>23)+d|0,g+=(p&f|d&~f)+h[3]-187363961|0,g=(g<<14|g>>>18)+p|0,f+=(g&d|p&~d)+h[8]+1163531501|0,f=(f<<20|f>>>12)+g|0,d+=(f&p|g&~p)+h[13]-1444681467|0,d=(d<<5|d>>>27)+f|0,p+=(d&g|f&~g)+h[2]-51403784|0,p=(p<<9|p>>>23)+d|0,g+=(p&f|d&~f)+h[7]+1735328473|0,g=(g<<14|g>>>18)+p|0,f+=(g&d|p&~d)+h[12]-1926607734|0,f=(f<<20|f>>>12)+g|0,d+=(f^g^p)+h[5]-378558|0,d=(d<<4|d>>>28)+f|0,p+=(d^f^g)+h[8]-2022574463|0,p=(p<<11|p>>>21)+d|0,g+=(p^d^f)+h[11]+1839030562|0,g=(g<<16|g>>>16)+p|0,f+=(g^p^d)+h[14]-35309556|0,f=(f<<23|f>>>9)+g|0,d+=(f^g^p)+h[1]-1530992060|0,d=(d<<4|d>>>28)+f|0,p+=(d^f^g)+h[4]+1272893353|0,p=(p<<11|p>>>21)+d|0,g+=(p^d^f)+h[7]-155497632|0,g=(g<<16|g>>>16)+p|0,f+=(g^p^d)+h[10]-1094730640|0,f=(f<<23|f>>>9)+g|0,d+=(f^g^p)+h[13]+681279174|0,d=(d<<4|d>>>28)+f|0,p+=(d^f^g)+h[0]-358537222|0,p=(p<<11|p>>>21)+d|0,g+=(p^d^f)+h[3]-722521979|0,g=(g<<16|g>>>16)+p|0,f+=(g^p^d)+h[6]+76029189|0,f=(f<<23|f>>>9)+g|0,d+=(f^g^p)+h[9]-640364487|0,d=(d<<4|d>>>28)+f|0,p+=(d^f^g)+h[12]-421815835|0,p=(p<<11|p>>>21)+d|0,g+=(p^d^f)+h[15]+530742520|0,g=(g<<16|g>>>16)+p|0,f+=(g^p^d)+h[2]-995338651|0,f=(f<<23|f>>>9)+g|0,d+=(g^(f|~p))+h[0]-198630844|0,d=(d<<6|d>>>26)+f|0,p+=(f^(d|~g))+h[7]+1126891415|0,p=(p<<10|p>>>22)+d|0,g+=(d^(p|~f))+h[14]-1416354905|0,g=(g<<15|g>>>17)+p|0,f+=(p^(g|~d))+h[5]-57434055|0,f=(f<<21|f>>>11)+g|0,d+=(g^(f|~p))+h[12]+1700485571|0,d=(d<<6|d>>>26)+f|0,p+=(f^(d|~g))+h[3]-1894986606|0,p=(p<<10|p>>>22)+d|0,g+=(d^(p|~f))+h[10]-1051523|0,g=(g<<15|g>>>17)+p|0,f+=(p^(g|~d))+h[1]-2054922799|0,f=(f<<21|f>>>11)+g|0,d+=(g^(f|~p))+h[8]+1873313359|0,d=(d<<6|d>>>26)+f|0,p+=(f^(d|~g))+h[15]-30611744|0,p=(p<<10|p>>>22)+d|0,g+=(d^(p|~f))+h[6]-1560198380|0,g=(g<<15|g>>>17)+p|0,f+=(p^(g|~d))+h[13]+1309151649|0,f=(f<<21|f>>>11)+g|0,d+=(g^(f|~p))+h[4]-145523070|0,d=(d<<6|d>>>26)+f|0,p+=(f^(d|~g))+h[11]-1120210379|0,p=(p<<10|p>>>22)+d|0,g+=(d^(p|~f))+h[2]+718787259|0,g=(g<<15|g>>>17)+p|0,f+=(p^(g|~d))+h[9]-343485551|0,f=(f<<21|f>>>11)+g|0,y[0]=d+y[0]|0,y[1]=f+y[1]|0,y[2]=g+y[2]|0,y[3]=p+y[3]|0}function t(y){var h=[],d;for(d=0;d<64;d+=4)h[d>>2]=y.charCodeAt(d)+(y.charCodeAt(d+1)<<8)+(y.charCodeAt(d+2)<<16)+(y.charCodeAt(d+3)<<24);return h}function o(y){var h=[],d;for(d=0;d<64;d+=4)h[d>>2]=y[d]+(y[d+1]<<8)+(y[d+2]<<16)+(y[d+3]<<24);return h}function u(y){var h=y.length,d=[1732584193,-271733879,-1732584194,271733878],f,g,p,F,z,H;for(f=64;f<=h;f+=64)e(d,t(y.substring(f-64,f)));for(y=y.substring(f-64),g=y.length,p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f=0;f<g;f+=1)p[f>>2]|=y.charCodeAt(f)<<(f%4<<3);if(p[f>>2]|=128<<(f%4<<3),f>55)for(e(d,p),f=0;f<16;f+=1)p[f]=0;return F=h*8,F=F.toString(16).match(/(.*?)(.{0,8})$/),z=parseInt(F[2],16),H=parseInt(F[1],16)||0,p[14]=z,p[15]=H,e(d,p),d}function r(y){var h=y.length,d=[1732584193,-271733879,-1732584194,271733878],f,g,p,F,z,H;for(f=64;f<=h;f+=64)e(d,o(y.subarray(f-64,f)));for(y=f-64<h?y.subarray(f-64):new Uint8Array(0),g=y.length,p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f=0;f<g;f+=1)p[f>>2]|=y[f]<<(f%4<<3);if(p[f>>2]|=128<<(f%4<<3),f>55)for(e(d,p),f=0;f<16;f+=1)p[f]=0;return F=h*8,F=F.toString(16).match(/(.*?)(.{0,8})$/),z=parseInt(F[2],16),H=parseInt(F[1],16)||0,p[14]=z,p[15]=H,e(d,p),d}function a(y){var h="",d;for(d=0;d<4;d+=1)h+=s[y>>d*8+4&15]+s[y>>d*8&15];return h}function n(y){var h;for(h=0;h<y.length;h+=1)y[h]=a(y[h]);return y.join("")}n(u("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function y(h,d){return h=h|0||0,h<0?Math.max(h+d,0):Math.min(h,d)}ArrayBuffer.prototype.slice=function(h,d){var f=this.byteLength,g=y(h,f),p=f,F,z,H,N;return d!==i&&(p=y(d,f)),g>p?new ArrayBuffer(0):(F=p-g,z=new ArrayBuffer(F),H=new Uint8Array(z),N=new Uint8Array(this,g,F),H.set(N),z)}}();function b(y){return/[\u0080-\uFFFF]/.test(y)&&(y=unescape(encodeURIComponent(y))),y}function C(y,h){var d=y.length,f=new ArrayBuffer(d),g=new Uint8Array(f),p;for(p=0;p<d;p+=1)g[p]=y.charCodeAt(p);return h?g:f}function _(y){return String.fromCharCode.apply(null,new Uint8Array(y))}function A(y,h,d){var f=new Uint8Array(y.byteLength+h.byteLength);return f.set(new Uint8Array(y)),f.set(new Uint8Array(h),y.byteLength),d?f:f.buffer}function M(y){var h=[],d=y.length,f;for(f=0;f<d-1;f+=2)h.push(parseInt(y.substr(f,2),16));return String.fromCharCode.apply(String,h)}function m(){this.reset()}return m.prototype.append=function(y){return this.appendBinary(b(y)),this},m.prototype.appendBinary=function(y){this._buff+=y,this._length+=y.length;var h=this._buff.length,d;for(d=64;d<=h;d+=64)e(this._hash,t(this._buff.substring(d-64,d)));return this._buff=this._buff.substring(d-64),this},m.prototype.end=function(y){var h=this._buff,d=h.length,f,g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],p;for(f=0;f<d;f+=1)g[f>>2]|=h.charCodeAt(f)<<(f%4<<3);return this._finish(g,d),p=n(this._hash),y&&(p=M(p)),this.reset(),p},m.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},m.prototype.setState=function(y){return this._buff=y.buff,this._length=y.length,this._hash=y.hash,this},m.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},m.prototype._finish=function(y,h){var d=h,f,g,p;if(y[d>>2]|=128<<(d%4<<3),d>55)for(e(this._hash,y),d=0;d<16;d+=1)y[d]=0;f=this._length*8,f=f.toString(16).match(/(.*?)(.{0,8})$/),g=parseInt(f[2],16),p=parseInt(f[1],16)||0,y[14]=g,y[15]=p,e(this._hash,y)},m.hash=function(y,h){return m.hashBinary(b(y),h)},m.hashBinary=function(y,h){var d=u(y),f=n(d);return h?M(f):f},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(y){var h=A(this._buff.buffer,y,!0),d=h.length,f;for(this._length+=y.byteLength,f=64;f<=d;f+=64)e(this._hash,o(h.subarray(f-64,f)));return this._buff=f-64<d?new Uint8Array(h.buffer.slice(f-64)):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(y){var h=this._buff,d=h.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g,p;for(g=0;g<d;g+=1)f[g>>2]|=h[g]<<(g%4<<3);return this._finish(f,d),p=n(this._hash),y&&(p=M(p)),this.reset(),p},m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.getState=function(){var y=m.prototype.getState.call(this);return y.buff=_(y.buff),y},m.ArrayBuffer.prototype.setState=function(y){return y.buff=C(y.buff,!0),m.prototype.setState.call(this,y)},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.hash=function(y,h){var d=r(new Uint8Array(y)),f=n(d);return h?M(f):f},m})})(Ue);const dr=Ue.exports;var Wt=globalThis&&globalThis.__assign||function(){return Wt=Object.assign||function(c){for(var l,i=1,s=arguments.length;i<s;i++){l=arguments[i];for(var e in l)Object.prototype.hasOwnProperty.call(l,e)&&(c[e]=l[e])}return c},Wt.apply(this,arguments)},hr=globalThis&&globalThis.__awaiter||function(c,l,i,s){function e(t){return t instanceof i?t:new i(function(o){o(t)})}return new(i||(i=Promise))(function(t,o){function u(n){try{a(s.next(n))}catch(b){o(b)}}function r(n){try{a(s.throw(n))}catch(b){o(b)}}function a(n){n.done?t(n.value):e(n.value).then(u,r)}a((s=s.apply(c,l||[])).next())})},vr=globalThis&&globalThis.__generator||function(c,l){var i={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},s,e,t,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(a){return function(n){return r([a,n])}}function r(a){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,e&&(t=a[0]&2?e.return:a[0]?e.throw||((t=e.return)&&t.call(e),0):e.next)&&!(t=t.call(e,a[1])).done)return t;switch(e=0,t&&(a=[a[0]&2,t.value]),a[0]){case 0:case 1:t=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,e=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(t=i.trys,!(t=t.length>0&&t[t.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!t||a[1]>t[0]&&a[1]<t[3])){i.label=a[1];break}if(a[0]===6&&i.label<t[1]){i.label=t[1],t=a;break}if(t&&i.label<t[2]){i.label=t[2],i.ops.push(a);break}t[2]&&i.ops.pop(),i.trys.pop();continue}a=l.call(c,i)}catch(n){a=[6,n],e=0}finally{s=t=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},St=Math.pow(1024,2);function mr(c,l){var i=l*St;if(i>c.size)i=c.size;else for(;c.size>i*1e4;)i*=2;for(var s=[],e=Math.ceil(c.size/i),t=0;t<e;t++){var o=c.slice(i*t,t===e-1?c.size:i*(t+1));s.push(o)}return s}function pr(c){return Object.keys(c).every(function(l){return l.indexOf("x-qn-meta-")===0})}function gr(c){return Object.keys(c).every(function(l){return l.indexOf("x:")===0})}function yr(c){return c.reduce(function(l,i){return l+i},0)}function br(c,l,i){try{localStorage.setItem(c,JSON.stringify(l))}catch{i.warn(new ot(rt.WriteCacheFailed,"setLocalFileInfo failed: "+c))}}function Cr(c,l,i){var s=l==null?"_":"_key_"+l+"_";return"qiniu_js_sdk_upload_file_name_"+c+s+"size_"+i}function ie(c,l){try{localStorage.removeItem(c)}catch{l.warn(new ot(rt.RemoveCacheFailed,"removeLocalFileInfo failed. key: "+c))}}function Er(c,l){var i=null;try{i=localStorage.getItem(c)}catch{l.warn(new ot(rt.ReadCacheFailed,"getLocalFileInfo failed. key: "+c))}if(i==null)return null;var s=null;try{s=JSON.parse(i)}catch{ie(c,l),l.warn(new ot(rt.InvalidCacheData,"getLocalFileInfo failed to parse. key: "+c))}return s}function Vt(c){var l="UpToken "+c;return{Authorization:l}}function Tr(c){var l=Vt(c);return Wt({"content-type":"application/octet-stream"},l)}function wr(c){var l=Vt(c);return Wt({"content-type":"application/json"},l)}function ze(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)return new window.ActiveXObject("Microsoft.XMLHTTP");throw new ot(rt.NotAvailableXMLHttpRequest,"the current environment does not support.")}function Or(c){return hr(this,void 0,void 0,function(){var l,i;return vr(this,function(s){switch(s.label){case 0:return[4,_r(c)];case 1:return l=s.sent(),i=new dr.ArrayBuffer,i.append(l),[2,i.end()]}})})}function _r(c){return new Promise(function(l,i){var s=new FileReader;s.onload=function(e){if(e.target){var t=e.target.result;l(t)}else i(new ot(rt.InvalidProgressEventTarget,"progress event target is undefined"))},s.onerror=function(){i(new ot(rt.FileReaderReadFailed,"fileReader read failed"))},s.readAsArrayBuffer(c)})}function Bt(c,l){return new Promise(function(i,s){var e=ze();if(e.open(l.method,c),l.onCreate&&l.onCreate(e),l.headers){var t=l.headers;Object.keys(t).forEach(function(o){e.setRequestHeader(o,t[o])})}e.upload.addEventListener("progress",function(o){o.lengthComputable&&l.onProgress&&l.onProgress({loaded:o.loaded,total:o.total})}),e.onreadystatechange=function(){var o=e.responseText;if(e.readyState===4){var u=e.getResponseHeader("x-reqId")||"";if(e.status===0){s(new er("network error.",u));return}if(e.status!==200){var r="xhr request failed, code: "+e.status;o&&(r+=" response: "+o);var a=void 0;try{a=JSON.parse(o)}catch{}s(new Rt(e.status,u,r,a));return}try{i({data:JSON.parse(o),reqId:u})}catch(n){s(n)}}},e.send(l.body)})}function Sr(c){if(c&&c.match){var l=c.match(/(^https?)/);if(!l)return"";var i=l[1];return l=c.match(/^https?:\/\/([^:^/]*):(\d*)/),l?l[2]:i==="http"?"80":"443"}return""}function xr(c){if(c&&c.match){var l=c.match(/^https?:\/\/([^:^/]*)/);return l?l[1]:""}return""}function le(c){if(!c)throw new ot(rt.InvalidToken,"invalid token.");var l=c.split(":");if(l.length===1)throw new ot(rt.InvalidToken,"invalid token segments.");var i=l.length>3?l[1]:l[0];if(!i)throw new ot(rt.InvalidToken,"missing assess key field.");var s=null;try{s=JSON.parse(fr(l[l.length-1]))}catch{throw new ot(rt.InvalidToken,"token parse failed.")}if(s==null)throw new ot(rt.InvalidToken,"putPolicy is null.");if(s.scope==null)throw new ot(rt.InvalidToken,"scope field is null.");var e=s.scope.split(":")[0];if(!e)throw new ot(rt.InvalidToken,"resolve bucketName failed.");return{assessKey:i,bucketName:e,scope:s.scope}}var gt,Ot={z0:"z0",z1:"z1",z2:"z2",na0:"na0",as0:"as0",cnEast2:"cn-east-2"},Ar=(gt={},gt[Ot.z0]={srcUphost:["up.qiniup.com"],cdnUphost:["upload.qiniup.com"]},gt[Ot.z1]={srcUphost:["up-z1.qiniup.com"],cdnUphost:["upload-z1.qiniup.com"]},gt[Ot.z2]={srcUphost:["up-z2.qiniup.com"],cdnUphost:["upload-z2.qiniup.com"]},gt[Ot.na0]={srcUphost:["up-na0.qiniup.com"],cdnUphost:["upload-na0.qiniup.com"]},gt[Ot.as0]={srcUphost:["up-as0.qiniup.com"],cdnUphost:["upload-as0.qiniup.com"]},gt[Ot.cnEast2]={srcUphost:["up-cn-east-2.qiniup.com"],cdnUphost:["upload-cn-east-2.qiniup.com"]},gt),It=function(c){switch(typeof c){case"string":return c;case"boolean":return c?"true":"false";case"number":return isFinite(c)?c:"";default:return""}},jr=function(c,l,i,s){return l=l||"&",i=i||"=",c===null&&(c=void 0),typeof c=="object"?Object.keys(c).map(function(e){var t=encodeURIComponent(It(e))+i;return Array.isArray(c[e])?c[e].map(function(o){return t+encodeURIComponent(It(o))}).join(l):t+encodeURIComponent(It(c[e]))}).filter(Boolean).join(l):s?encodeURIComponent(It(s))+i+encodeURIComponent(It(c)):""},He;He=jr;var Et=globalThis&&globalThis.__assign||function(){return Et=Object.assign||function(c){for(var l,i=1,s=arguments.length;i<s;i++){l=arguments[i];for(var e in l)Object.prototype.hasOwnProperty.call(l,e)&&(c[e]=l[e])}return c},Et.apply(this,arguments)},Mr=globalThis&&globalThis.__awaiter||function(c,l,i,s){function e(t){return t instanceof i?t:new i(function(o){o(t)})}return new(i||(i=Promise))(function(t,o){function u(n){try{a(s.next(n))}catch(b){o(b)}}function r(n){try{a(s.throw(n))}catch(b){o(b)}}function a(n){n.done?t(n.value):e(n.value).then(u,r)}a((s=s.apply(c,l||[])).next())})},Ir=globalThis&&globalThis.__generator||function(c,l){var i={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},s,e,t,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(a){return function(n){return r([a,n])}}function r(a){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,e&&(t=a[0]&2?e.return:a[0]?e.throw||((t=e.return)&&t.call(e),0):e.next)&&!(t=t.call(e,a[1])).done)return t;switch(e=0,t&&(a=[a[0]&2,t.value]),a[0]){case 0:case 1:t=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,e=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(t=i.trys,!(t=t.length>0&&t[t.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!t||a[1]>t[0]&&a[1]<t[3])){i.label=a[1];break}if(a[0]===6&&i.label<t[1]){i.label=t[1],t=a;break}if(t&&i.label<t[2]){i.label=t[2],i.ops.push(a);break}t[2]&&i.ops.pop(),i.trys.pop();continue}a=l.call(c,i)}catch(n){a=[6,n],e=0}finally{s=t=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};function Lr(c,l,i){return Mr(this,void 0,void 0,function(){var s,e;return Ir(this,function(t){return s=He({ak:c,bucket:l}),e=i+"://api.qiniu.com/v2/query?"+s,[2,Bt(e,{method:"GET"})]})})}function We(c,l,i){var s=i.url,e=i.id;return s+"/buckets/"+c+"/objects/"+(l!=null?Fe(l):"~")+"/uploads/"+e}function Pr(c,l,i,s){var e=s+"/buckets/"+l+"/objects/"+(i!=null?Fe(i):"~")+"/uploads";return Bt(e,{method:"POST",headers:Vt(c)})}function Dr(c,l,i,s,e){var t=le(c).bucketName,o=We(t,l,s)+("/"+i),u=Tr(c);return e.md5&&(u["Content-MD5"]=e.md5),Bt(o,Et(Et({},e),{method:"PUT",headers:u}))}function kr(c,l,i,s){var e=le(c).bucketName,t=We(e,l,i);return Bt(t,Et(Et({},s),{method:"POST",headers:wr(c)}))}function Rr(c,l,i){return Bt(c,Et({method:"POST",body:l},i))}var Gt=globalThis&&globalThis.__assign||function(){return Gt=Object.assign||function(c){for(var l,i=1,s=arguments.length;i<s;i++){l=arguments[i];for(var e in l)Object.prototype.hasOwnProperty.call(l,e)&&(c[e]=l[e])}return c},Gt.apply(this,arguments)},_e=globalThis&&globalThis.__awaiter||function(c,l,i,s){function e(t){return t instanceof i?t:new i(function(o){o(t)})}return new(i||(i=Promise))(function(t,o){function u(n){try{a(s.next(n))}catch(b){o(b)}}function r(n){try{a(s.throw(n))}catch(b){o(b)}}function a(n){n.done?t(n.value):e(n.value).then(u,r)}a((s=s.apply(c,l||[])).next())})},Se=globalThis&&globalThis.__generator||function(c,l){var i={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},s,e,t,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(a){return function(n){return r([a,n])}}function r(a){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,e&&(t=a[0]&2?e.return:a[0]?e.throw||((t=e.return)&&t.call(e),0):e.next)&&!(t=t.call(e,a[1])).done)return t;switch(e=0,t&&(a=[a[0]&2,t.value]),a[0]){case 0:case 1:t=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,e=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(t=i.trys,!(t=t.length>0&&t[t.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!t||a[1]>t[0]&&a[1]<t[3])){i.label=a[1];break}if(a[0]===6&&i.label<t[1]){i.label=t[1],t=a;break}if(t&&i.label<t[2]){i.label=t[2],i.ops.push(a);break}t[2]&&i.ops.pop(),i.trys.pop();continue}a=l.call(c,i)}catch(n){a=[6,n],e=0}finally{s=t=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Br=globalThis&&globalThis.__read||function(c,l){var i=typeof Symbol=="function"&&c[Symbol.iterator];if(!i)return c;var s=i.call(c),e,t=[],o;try{for(;(l===void 0||l-- >0)&&!(e=s.next()).done;)t.push(e.value)}catch(u){o={error:u}}finally{try{e&&!e.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}return t},Fr=globalThis&&globalThis.__spread||function(){for(var c=[],l=0;l<arguments.length;l++)c=c.concat(Br(arguments[l]));return c},Ur=4,Ge=[0,502,503,504,599],zr=Fr(Ge,[612]),Hr=Math.pow(1024,3),Ve=function(){function c(l,i,s,e){this.hostPool=s,this.logger=e,this.aborted=!1,this.retryCount=0,this.xhrList=[],this.config=l.config,e.info("config inited.",this.config),this.putExtra=Gt({fname:""},l.putExtra),e.info("putExtra inited.",this.putExtra),this.key=l.key,this.file=l.file,this.token=l.token,this.onData=i.onData,this.onError=i.onError,this.onComplete=i.onComplete;try{var t=le(this.token);this.bucketName=t.bucketName,this.assessKey=t.assessKey}catch(o){e.error("get putPolicy from token failed.",o),this.onError(o)}}return c.prototype.checkAndUpdateUploadHost=function(){return _e(this,void 0,void 0,function(){var l;return Se(this,function(i){switch(i.label){case 0:return this.logger.info("get available upload host."),[4,this.hostPool.getUp(this.assessKey,this.bucketName,this.config.upprotocol)];case 1:if(l=i.sent(),l==null)throw new ot(rt.NotAvailableUploadHost,"no available upload host.");return this.uploadHost!=null&&this.uploadHost.host!==l.host?this.logger.warn("host switches from "+this.uploadHost.host+" to "+l.host+"."):this.logger.info("use host "+l.host+"."),this.uploadHost=l,[2]}})})},c.prototype.checkAndUnfreezeHost=function(){this.logger.info("check unfreeze host."),this.uploadHost!=null&&this.uploadHost.isFrozen()&&(this.logger.warn(this.uploadHost.host+" will be unfrozen."),this.uploadHost.unfreeze())},c.prototype.checkAndFreezeHost=function(l){this.logger.info("check freeze host."),l instanceof Rt&&this.uploadHost!=null&&Ge.includes(l.code)&&(this.logger.warn(this.uploadHost.host+" will be temporarily frozen."),this.uploadHost.freeze())},c.prototype.handleError=function(l){this.logger.error(l.message),this.onError(l)},c.prototype.putFile=function(){return _e(this,void 0,void 0,function(){var l,i,s,e;return Se(this,function(t){switch(t.label){case 0:if(this.aborted=!1,this.putExtra.fname||(this.logger.info("use file.name as fname."),this.putExtra.fname=this.file.name),this.file.size>1e4*Hr)return this.handleError(new ot(rt.InvalidFile,"file size exceed maximum value 10000G")),[2];if(this.putExtra.customVars&&!gr(this.putExtra.customVars))return this.handleError(new ot(rt.InvalidCustomVars,"customVars key should start width x:")),[2];if(this.putExtra.metadata&&!pr(this.putExtra.metadata))return this.handleError(new ot(rt.InvalidMetadata,"metadata key should start with x-qn-meta-")),[2];t.label=1;case 1:return t.trys.push([1,4,,5]),this.uploadAt=new Date().getTime(),[4,this.checkAndUpdateUploadHost()];case 2:return t.sent(),[4,this.run()];case 3:return l=t.sent(),this.onComplete(l.data),this.checkAndUnfreezeHost(),this.sendLog(l.reqId,200),[2];case 4:return i=t.sent(),this.aborted?(this.logger.warn("upload is aborted."),this.sendLog("",-2),[2]):(this.clear(),this.logger.error(i),i instanceof Rt&&(this.sendLog(i.reqId,i.code),this.checkAndFreezeHost(i),s=++this.retryCount<=this.config.retryCount,e=zr.includes(i.code),e&&s)?(this.logger.warn("error auto retry: "+this.retryCount+"/"+this.config.retryCount+"."),this.putFile(),[2]):(this.onError(i),[3,5]));case 5:return[2]}})})},c.prototype.clear=function(){this.xhrList.forEach(function(l){l.onreadystatechange=null,l.abort()}),this.xhrList=[],this.logger.info("cleanup uploading xhr.")},c.prototype.stop=function(){this.logger.info("aborted."),this.clear(),this.aborted=!0},c.prototype.addXhr=function(l){this.xhrList.push(l)},c.prototype.sendLog=function(l,i){var s,e;this.logger.report({code:i,reqId:l,remoteIp:"",upType:"jssdk-h5",size:this.file.size,time:Math.floor(this.uploadAt/1e3),port:Sr((s=this.uploadHost)===null||s===void 0?void 0:s.getUrl()),host:xr((e=this.uploadHost)===null||e===void 0?void 0:e.getUrl()),bytesSent:this.progress?this.progress.total.loaded:0,duration:Math.floor((new Date().getTime()-this.uploadAt)/1e3)})},c.prototype.getProgressInfoItem=function(l,i,s){return Gt({size:i,loaded:l,percent:l/i*100},s==null?{}:{fromCache:s})},c}(),Wr=globalThis&&globalThis.__extends||function(){var c=function(l,i){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,e){s.__proto__=e}||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t])},c(l,i)};return function(l,i){c(l,i);function s(){this.constructor=l}l.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}}(),kt=globalThis&&globalThis.__assign||function(){return kt=Object.assign||function(c){for(var l,i=1,s=arguments.length;i<s;i++){l=arguments[i];for(var e in l)Object.prototype.hasOwnProperty.call(l,e)&&(c[e]=l[e])}return c},kt.apply(this,arguments)},Lt=globalThis&&globalThis.__awaiter||function(c,l,i,s){function e(t){return t instanceof i?t:new i(function(o){o(t)})}return new(i||(i=Promise))(function(t,o){function u(n){try{a(s.next(n))}catch(b){o(b)}}function r(n){try{a(s.throw(n))}catch(b){o(b)}}function a(n){n.done?t(n.value):e(n.value).then(u,r)}a((s=s.apply(c,l||[])).next())})},Pt=globalThis&&globalThis.__generator||function(c,l){var i={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},s,e,t,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(a){return function(n){return r([a,n])}}function r(a){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,e&&(t=a[0]&2?e.return:a[0]?e.throw||((t=e.return)&&t.call(e),0):e.next)&&!(t=t.call(e,a[1])).done)return t;switch(e=0,t&&(a=[a[0]&2,t.value]),a[0]){case 0:case 1:t=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,e=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(t=i.trys,!(t=t.length>0&&t[t.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!t||a[1]>t[0]&&a[1]<t[3])){i.label=a[1];break}if(a[0]===6&&i.label<t[1]){i.label=t[1],t=a;break}if(t&&i.label<t[2]){i.label=t[2],i.ops.push(a);break}t[2]&&i.ops.pop(),i.trys.pop();continue}a=l.call(c,i)}catch(n){a=[6,n],e=0}finally{s=t=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};function Gr(c){var l=/^[1-9]\d*$/;return l.test(String(c))}var Vr=function(c){Wr(l,c);function l(){return c!==null&&c.apply(this,arguments)||this}return l.prototype.run=function(){return Lt(this,void 0,void 0,function(){var i,s,e,t,o,u=this;return Pt(this,function(r){switch(r.label){case 0:if(this.logger.info("start run Resume."),!this.config.chunkSize||!Gr(this.config.chunkSize))throw new ot(rt.InvalidChunkSize,"chunkSize must be a positive integer");if(this.config.chunkSize>1024)throw new ot(rt.InvalidChunkSize,"chunkSize maximum value is 1024");return[4,this.initBeforeUploadChunks()];case 1:r.sent(),i=new nr(function(a){return Lt(u,void 0,void 0,function(){return Pt(this,function(n){switch(n.label){case 0:if(this.aborted)throw i.abort(),new Error("pool is aborted");return[4,this.uploadChunk(a)];case 1:return n.sent(),[2]}})})},this.config.concurrentRequestLimit),s=null,e=this.getLocalKey(),t=this.chunks.map(function(a,n){return i.enqueue({chunk:a,index:n})}),r.label=2;case 2:return r.trys.push([2,5,,6]),[4,Promise.all(t)];case 3:return r.sent(),[4,this.mkFileReq()];case 4:return s=r.sent(),[3,6];case 5:throw o=r.sent(),o instanceof Rt&&(o.code===612||o.code===400)&&ie(e,this.logger),o;case 6:return ie(e,this.logger),[2,s]}})})},l.prototype.uploadChunk=function(i){return Lt(this,void 0,void 0,function(){var s,e,t,o,u,r,a,n,b,C=this;return Pt(this,function(_){switch(_.label){case 0:return s=i.index,e=i.chunk,t=this.cachedUploadedList[s],this.logger.info("upload part "+s+", cache:",t),o=this.config.checkByMD5,u=function(){C.usedCacheList[s]=!0,C.updateChunkProgress(e.size,s),C.uploadedList[s]=t,C.updateLocalCache()},t&&!o?(u(),[2]):[4,Or(e)];case 1:return r=_.sent(),this.logger.info("computed part md5.",r),t&&r===t.md5?(u(),[2]):(this.usedCacheList[s]=!1,a=function(A){C.updateChunkProgress(A.loaded,s)},n={body:e,md5:this.config.checkByServer?r:void 0,onProgress:a,onCreate:function(A){return C.addXhr(A)}},this.logger.info("part "+s+" start uploading."),[4,Dr(this.token,this.key,i.index+1,this.getUploadInfo(),n)]);case 2:return b=_.sent(),this.logger.info("part "+s+" upload completed."),a({loaded:e.size,total:e.size}),this.uploadedList[s]={etag:b.data.etag,md5:b.data.md5,size:e.size},this.updateLocalCache(),[2]}})})},l.prototype.mkFileReq=function(){return Lt(this,void 0,void 0,function(){var i,s,e=this;return Pt(this,function(t){switch(t.label){case 0:return i=kt(kt(kt({parts:this.uploadedList.map(function(o,u){return{etag:o.etag,partNumber:u+1}}),fname:this.putExtra.fname},this.putExtra.mimeType&&{mimeType:this.putExtra.mimeType}),this.putExtra.customVars&&{customVars:this.putExtra.customVars}),this.putExtra.metadata&&{metadata:this.putExtra.metadata}),this.logger.info("parts upload completed, make file.",i),[4,kr(this.token,this.key,this.getUploadInfo(),{onCreate:function(o){return e.addXhr(o)},body:JSON.stringify(i)})];case 1:return s=t.sent(),this.logger.info("finish Resume Progress."),this.updateMkFileProgress(1),[2,s]}})})},l.prototype.initBeforeUploadChunks=function(){return Lt(this,void 0,void 0,function(){var i,s,e;return Pt(this,function(t){switch(t.label){case 0:return this.uploadedList=[],this.usedCacheList=[],i=Er(this.getLocalKey(),this.logger),i?[3,2]:(this.logger.info("init upload parts from api."),[4,Pr(this.token,this.bucketName,this.key,this.uploadHost.getUrl())]);case 1:return s=t.sent(),this.logger.info("initd upload parts of id: "+s.data.uploadId+"."),this.uploadId=s.data.uploadId,this.cachedUploadedList=[],[3,3];case 2:e=["resume upload parts from local cache,","total "+i.data.length+" part,","id is "+i.id+"."],this.logger.info(e.join(" ")),this.cachedUploadedList=i.data,this.uploadId=i.id,t.label=3;case 3:return this.chunks=mr(this.file,this.config.chunkSize),this.loaded={mkFileProgress:0,chunks:this.chunks.map(function(o){return 0})},this.notifyResumeProgress(),[2]}})})},l.prototype.getUploadInfo=function(){return{id:this.uploadId,url:this.uploadHost.getUrl()}},l.prototype.getLocalKey=function(){return Cr(this.file.name,this.key,this.file.size)},l.prototype.updateLocalCache=function(){br(this.getLocalKey(),{id:this.uploadId,data:this.uploadedList},this.logger)},l.prototype.updateChunkProgress=function(i,s){this.loaded.chunks[s]=i,this.notifyResumeProgress()},l.prototype.updateMkFileProgress=function(i){this.loaded.mkFileProgress=i,this.notifyResumeProgress()},l.prototype.notifyResumeProgress=function(){var i=this;this.progress={total:this.getProgressInfoItem(yr(this.loaded.chunks)+this.loaded.mkFileProgress,this.file.size+1),chunks:this.chunks.map(function(s,e){var t=i.usedCacheList[e];return i.getProgressInfoItem(i.loaded.chunks[e],s.size,t)}),uploadInfo:{id:this.uploadId,url:this.uploadHost.getUrl()}},this.onData(this.progress)},l}(Ve),xe=globalThis&&globalThis.__awaiter||function(c,l,i,s){function e(t){return t instanceof i?t:new i(function(o){o(t)})}return new(i||(i=Promise))(function(t,o){function u(n){try{a(s.next(n))}catch(b){o(b)}}function r(n){try{a(s.throw(n))}catch(b){o(b)}}function a(n){n.done?t(n.value):e(n.value).then(u,r)}a((s=s.apply(c,l||[])).next())})},Ae=globalThis&&globalThis.__generator||function(c,l){var i={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},s,e,t,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(a){return function(n){return r([a,n])}}function r(a){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,e&&(t=a[0]&2?e.return:a[0]?e.throw||((t=e.return)&&t.call(e),0):e.next)&&!(t=t.call(e,a[1])).done)return t;switch(e=0,t&&(a=[a[0]&2,t.value]),a[0]){case 0:case 1:t=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,e=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(t=i.trys,!(t=t.length>0&&t[t.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!t||a[1]>t[0]&&a[1]<t[3])){i.label=a[1];break}if(a[0]===6&&i.label<t[1]){i.label=t[1],t=a;break}if(t&&i.label<t[2]){i.label=t[2],i.ops.push(a);break}t[2]&&i.ops.pop(),i.trys.pop();continue}a=l.call(c,i)}catch(n){a=[6,n],e=0}finally{s=t=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},$r=function(){function c(){this.crc=-1,this.table=this.makeTable()}return c.prototype.makeTable=function(){for(var l=new Array,i=0;i<256;i++){for(var s=i,e=0;e<8;e++)s&1?s=s>>>1^3988292384:s>>>=1;l[i]=s}return l},c.prototype.append=function(l){for(var i=this.crc,s=0;s<l.byteLength;s++)i=i>>>8^this.table[(i^l[s])&255];this.crc=i},c.prototype.compute=function(){return(this.crc^-1)>>>0},c.prototype.readAsUint8Array=function(l){return xe(this,void 0,void 0,function(){var i;return Ae(this,function(s){switch(s.label){case 0:return typeof l.arrayBuffer!="function"?[3,2]:(i=Uint8Array.bind,[4,l.arrayBuffer()]);case 1:return[2,new(i.apply(Uint8Array,[void 0,s.sent()]))];case 2:return[2,new Promise(function(e,t){var o=new FileReader;o.onload=function(){if(o.result==null){t();return}if(typeof o.result=="string"){t();return}e(new Uint8Array(o.result))},o.readAsArrayBuffer(l)})]}})})},c.prototype.file=function(l){return xe(this,void 0,void 0,function(){var i,s,e,t,o,u;return Ae(this,function(r){switch(r.label){case 0:return l.size<=St?(i=this.append,[4,this.readAsUint8Array(l)]):[3,2];case 1:return i.apply(this,[r.sent()]),[2,this.compute()];case 2:s=Math.ceil(l.size/St),e=0,r.label=3;case 3:return e<s?(t=e*St,o=e===s-1?l.size:t+St,[4,this.readAsUint8Array(l.slice(t,o))]):[3,6];case 4:u=r.sent(),this.append(new Uint8Array(u)),r.label=5;case 5:return e++,[3,3];case 6:return[2,this.compute()]}})})},c.file=function(l){var i=new c;return i.file(l)},c}(),Nr=globalThis&&globalThis.__extends||function(){var c=function(l,i){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,e){s.__proto__=e}||function(s,e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t])},c(l,i)};return function(l,i){c(l,i);function s(){this.constructor=l}l.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}}(),Kr=globalThis&&globalThis.__awaiter||function(c,l,i,s){function e(t){return t instanceof i?t:new i(function(o){o(t)})}return new(i||(i=Promise))(function(t,o){function u(n){try{a(s.next(n))}catch(b){o(b)}}function r(n){try{a(s.throw(n))}catch(b){o(b)}}function a(n){n.done?t(n.value):e(n.value).then(u,r)}a((s=s.apply(c,l||[])).next())})},Xr=globalThis&&globalThis.__generator||function(c,l){var i={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},s,e,t,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(a){return function(n){return r([a,n])}}function r(a){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,e&&(t=a[0]&2?e.return:a[0]?e.throw||((t=e.return)&&t.call(e),0):e.next)&&!(t=t.call(e,a[1])).done)return t;switch(e=0,t&&(a=[a[0]&2,t.value]),a[0]){case 0:case 1:t=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,e=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(t=i.trys,!(t=t.length>0&&t[t.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!t||a[1]>t[0]&&a[1]<t[3])){i.label=a[1];break}if(a[0]===6&&i.label<t[1]){i.label=t[1],t=a;break}if(t&&i.label<t[2]){i.label=t[2],i.ops.push(a);break}t[2]&&i.ops.pop(),i.trys.pop();continue}a=l.call(c,i)}catch(n){a=[6,n],e=0}finally{s=t=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},je=function(c){Nr(l,c);function l(){return c!==null&&c.apply(this,arguments)||this}return l.prototype.run=function(){return Kr(this,void 0,void 0,function(){var i,s,e,t,o=this;return Xr(this,function(u){switch(u.label){case 0:return this.logger.info("start run Direct."),i=new FormData,i.append("file",this.file),i.append("token",this.token),this.key!=null&&i.append("key",this.key),i.append("fname",this.putExtra.fname),this.config.checkByServer?[4,$r.file(this.file)]:[3,2];case 1:s=u.sent(),i.append("crc32",s.toString()),u.label=2;case 2:return this.putExtra.customVars&&(this.logger.info("init customVars."),e=this.putExtra.customVars,Object.keys(e).forEach(function(r){return i.append(r,e[r].toString())}),this.logger.info("customVars inited.")),this.logger.info("formData inited."),[4,Rr(this.uploadHost.getUrl(),i,{onProgress:function(r){o.updateDirectProgress(r.loaded,r.total)},onCreate:function(r){return o.addXhr(r)}})];case 3:return t=u.sent(),this.logger.info("Direct progress finish."),this.finishDirectProgress(),[2,t]}})})},l.prototype.updateDirectProgress=function(i,s){this.progress={total:this.getProgressInfoItem(i,s+1)},this.onData(this.progress)},l.prototype.finishDirectProgress=function(){if(!this.progress){this.logger.warn("progress is null."),this.progress={total:this.getProgressInfoItem(this.file.size,this.file.size)},this.onData(this.progress);return}var i=this.progress.total;this.progress={total:this.getProgressInfoItem(i.loaded+1,i.size)},this.onData(this.progress)},l}(Ve);function $e(c,l,i){i===void 0&&(i=3);var s=ze();s.open("POST","https://uplog.qbox.me/log/3"),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.setRequestHeader("Authorization",Vt(c).Authorization),s.onreadystatechange=function(){s.readyState===4&&s.status!==200&&i>0&&$e(c,l,i-1)};var e=[l.code||"",l.reqId||"",l.host||"",l.remoteIp||"",l.port||"",l.duration||"",l.time||"",l.bytesSent||"",l.upType||"",l.size||""].join(",");s.send(e)}var Yr=globalThis&&globalThis.__read||function(c,l){var i=typeof Symbol=="function"&&c[Symbol.iterator];if(!i)return c;var s=i.call(c),e,t=[],o;try{for(;(l===void 0||l-- >0)&&!(e=s.next()).done;)t.push(e.value)}catch(u){o={error:u}}finally{try{e&&!e.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}return t},ne=globalThis&&globalThis.__spread||function(){for(var c=[],l=0;l<arguments.length;l++)c=c.concat(Yr(arguments[l]));return c},Jr=function(){function c(l,i,s,e){i===void 0&&(i=!0),s===void 0&&(s="OFF"),e===void 0&&(e="UPLOAD"),this.token=l,this.disableReport=i,this.level=s,this.prefix=e,this.id=++c.id}return c.prototype.getPrintPrefix=function(l){return"Qiniu-JS-SDK ["+l+"]["+this.prefix+"#"+this.id+"]:"},c.prototype.report=function(l,i){if(!this.disableReport)try{$e(this.token,l,i)}catch(s){this.warn(s)}},c.prototype.info=function(){for(var l=[],i=0;i<arguments.length;i++)l[i]=arguments[i];var s=["INFO"];s.includes(this.level)&&console.log.apply(console,ne([this.getPrintPrefix("INFO")],l))},c.prototype.warn=function(){for(var l=[],i=0;i<arguments.length;i++)l[i]=arguments[i];var s=["INFO","WARN"];s.includes(this.level)&&console.warn.apply(console,ne([this.getPrintPrefix("WARN")],l))},c.prototype.error=function(){for(var l=[],i=0;i<arguments.length;i++)l[i]=arguments[i];var s=["INFO","WARN","ERROR"];s.includes(this.level)&&console.error.apply(console,ne([this.getPrintPrefix("ERROR")],l))},c.id=0,c}(),Me=globalThis&&globalThis.__awaiter||function(c,l,i,s){function e(t){return t instanceof i?t:new i(function(o){o(t)})}return new(i||(i=Promise))(function(t,o){function u(n){try{a(s.next(n))}catch(b){o(b)}}function r(n){try{a(s.throw(n))}catch(b){o(b)}}function a(n){n.done?t(n.value):e(n.value).then(u,r)}a((s=s.apply(c,l||[])).next())})},Ie=globalThis&&globalThis.__generator||function(c,l){var i={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},s,e,t,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(a){return function(n){return r([a,n])}}function r(a){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,e&&(t=a[0]&2?e.return:a[0]?e.throw||((t=e.return)&&t.call(e),0):e.next)&&!(t=t.call(e,a[1])).done)return t;switch(e=0,t&&(a=[a[0]&2,t.value]),a[0]){case 0:case 1:t=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,e=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(t=i.trys,!(t=t.length>0&&t[t.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!t||a[1]>t[0]&&a[1]<t[3])){i.label=a[1];break}if(a[0]===6&&i.label<t[1]){i.label=t[1],t=a;break}if(t&&i.label<t[2]){i.label=t[2],i.ops.push(a);break}t[2]&&i.ops.pop(),i.trys.pop();continue}a=l.call(c,i)}catch(n){a=[6,n],e=0}finally{s=t=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Zr=globalThis&&globalThis.__read||function(c,l){var i=typeof Symbol=="function"&&c[Symbol.iterator];if(!i)return c;var s=i.call(c),e,t=[],o;try{for(;(l===void 0||l-- >0)&&!(e=s.next()).done;)t.push(e.value)}catch(u){o={error:u}}finally{try{e&&!e.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}return t},Qr=globalThis&&globalThis.__spread||function(){for(var c=[],l=0;l<arguments.length;l++)c=c.concat(Zr(arguments[l]));return c},Ht=new Map,qr=function(){function c(l,i){this.host=l,this.protocol=i}return c.prototype.isFrozen=function(){var l=new Date().getTime(),i=Ht.get(this.host);return i!=null&&i>=l},c.prototype.freeze=function(l){l===void 0&&(l=20);var i=new Date().getTime()+l*1e3;Ht.set(this.host,i)},c.prototype.unfreeze=function(){Ht.delete(this.host)},c.prototype.getUrl=function(){return this.protocol+"://"+this.host},c.prototype.getUnfreezeTime=function(){return Ht.get(this.host)},c}(),ti=function(){function c(l){l===void 0&&(l=[]),this.initHosts=l,this.cachedHostsMap=new Map}return c.prototype.register=function(l,i,s,e){this.cachedHostsMap.set(l+"@"+i,s.map(function(t){return new qr(t,e)}))},c.prototype.refresh=function(l,i,s){var e,t,o,u;return Me(this,void 0,void 0,function(){var r,a,n;return Ie(this,function(b){switch(b.label){case 0:return r=this.cachedHostsMap.get(l+"@"+i)||[],r.length>0?[2]:this.initHosts.length>0?(this.register(l,i,this.initHosts,s),[2]):[4,Lr(l,i,s)];case 1:return a=b.sent(),(a==null?void 0:a.data)!=null&&(n=Qr(((t=(e=a.data.up)===null||e===void 0?void 0:e.acc)===null||t===void 0?void 0:t.main)||[],((u=(o=a.data.up)===null||o===void 0?void 0:o.acc)===null||u===void 0?void 0:u.backup)||[]),this.register(l,i,n,s)),[2]}})})},c.prototype.getUp=function(l,i,s){return Me(this,void 0,void 0,function(){var e,t,o;return Ie(this,function(u){switch(u.label){case 0:return[4,this.refresh(l,i,s)];case 1:return u.sent(),e=this.cachedHostsMap.get(l+"@"+i)||[],e.length===0?[2,null]:(t=e.filter(function(r){return!r.isFrozen()}),t.length>0?[2,t[0]]:(o=e.slice().sort(function(r,a){return(r.getUnfreezeTime()||0)-(a.getUnfreezeTime()||0)}),[2,o[0]]))}})})},c}();function ei(c,l,i,s){return c.config&&c.config.forceDirect?(s.info("ues forceDirect mode."),new je(c,l,i,s)):c.file.size>4*St?(s.info("file size over 4M, use Resume."),new Vr(c,l,i,s)):(s.info("file size less or equal than 4M, use Direct."),new je(c,l,i,s))}function ni(c,l,i,s,e){var t=new Jr(i,e==null?void 0:e.disableStatisticsReport,e==null?void 0:e.debugLogLevel,c.name),o={file:c,key:l,token:i,putExtra:s,config:oi(e,t)},u=new ti(o.config.uphost);return new ar(function(r){var a=ei(o,{onData:function(n){return r.next(n)},onError:function(n){return r.error(n)},onComplete:function(n){return r.complete(n)}},u,t);return a.putFile(),a.stop.bind(a)})}var xt=globalThis&&globalThis.__assign||function(){return xt=Object.assign||function(c){for(var l,i=1,s=arguments.length;i<s;i++){l=arguments[i];for(var e in l)Object.prototype.hasOwnProperty.call(l,e)&&(c[e]=l[e])}return c},xt.apply(this,arguments)},ri=globalThis&&globalThis.__rest||function(c,l){var i={};for(var s in c)Object.prototype.hasOwnProperty.call(c,s)&&l.indexOf(s)<0&&(i[s]=c[s]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,s=Object.getOwnPropertySymbols(c);e<s.length;e++)l.indexOf(s[e])<0&&Object.prototype.propertyIsEnumerable.call(c,s[e])&&(i[s[e]]=c[s[e]]);return i},ii=globalThis&&globalThis.__read||function(c,l){var i=typeof Symbol=="function"&&c[Symbol.iterator];if(!i)return c;var s=i.call(c),e,t=[],o;try{for(;(l===void 0||l-- >0)&&!(e=s.next()).done;)t.push(e.value)}catch(u){o={error:u}}finally{try{e&&!e.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}return t},re=globalThis&&globalThis.__spread||function(){for(var c=[],l=0;l<arguments.length;l++)c=c.concat(ii(arguments[l]));return c};function oi(c,l){var i=xt({},c),s=i.upprotocol,e=i.uphost,t=ri(i,["upprotocol","uphost"]),o=xt({uphost:[],retryCount:3,checkByMD5:!1,forceDirect:!1,useCdnDomain:!0,checkByServer:!1,concurrentRequestLimit:3,chunkSize:Ur,upprotocol:"https",debugLogLevel:"OFF",disableStatisticsReport:!1},t);s&&(o.upprotocol=s.replace(/:$/,""));var u=[];if(l&&(c==null?void 0:c.uphost)!=null&&(c==null?void 0:c.region)!=null&&l.warn("do not use both the uphost and region config."),e)Array.isArray(e)?u.push.apply(u,re(e)):u.push(e);else if(o!=null&&o.region){var r=Ar[o==null?void 0:o.region];o.useCdnDomain?u.push.apply(u,re(r.cdnUphost)):u.push.apply(u,re(r.srcUphost))}return xt(xt({},o),{uphost:u.filter(Boolean)})}var Le=globalThis&&globalThis.__assign||function(){return Le=Object.assign||function(c){for(var l,i=1,s=arguments.length;i<s;i++){l=arguments[i];for(var e in l)Object.prototype.hasOwnProperty.call(l,e)&&(c[e]=l[e])}return c},Le.apply(this,arguments)};globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;var oe={PNG:"image/png",JPEG:"image/jpeg",WEBP:"image/webp",BMP:"image/bmp"};Object.keys(oe).map(function(c){return oe[c]});oe.JPEG;const ai={class:"editor-wrapper"},si={class:"editor-container"},li=ae({components:{"v-md-editor":se},data(){return{article:{title:"",text:"",category_id:"",tag:[],selectedTag:[],fields:[]}}},activated(){this.$route.query.cid?Oe.getDetail({cid:this.$route.query.cid}).then(c=>{this.article={...this.article,...c},this.article.selectedTag=this.article.tag.map(i=>i.tid),De().setArticle(this.article)}):this.data={}},methods:{saveArticle(){const c=this.$route.query.cid?"update":"add";if(!this.article.category_id)return this.$message.error("\u8BF7\u9009\u62E9\u6587\u7AE0\u5206\u7C7B");if(!this.article.fields.length)return this.$message.error("\u8BF7\u9009\u62E9\u6587\u7AE0\u6807\u7B7E");Oe[c](this.article).then(()=>{this.$message.success("\u4FDD\u5B58\u6210\u529F"),location.href="/admin/post-list"}).catch(l=>{this.$message.error("\u4FDD\u5B58\u5931\u8D25"),console.error(l)})},handleUploadImage(c,l,i){console.log(arguments),tr.getUploadToken().then(s=>{const e=zn().format("YYYY-MM-DD/HH-mm-ss");ni(i[0],e,s).subscribe(null,null,o=>{l({url:`https://blog.cdn.thinkmoon.cn/${o.key}`})})})}}}),yi=ae({...li,__name:"article-editor",setup(c){return(l,i)=>{const s=Ct("el-input");return yt(),_t("div",ai,[ht("div",si,[ft(s,{modelValue:l.article.title,"onUpdate:modelValue":i[0]||(i[0]=e=>l.article.title=e),class:"title-input"},null,8,["modelValue"]),ft(ct(se),{modelValue:l.article.text,"onUpdate:modelValue":i[1]||(i[1]=e=>l.article.text=e),mode:"editable",height:"620px","disabled-menus":[],onSave:l.saveArticle,onUploadImage:l.handleUploadImage},null,8,["modelValue","onSave","onUploadImage"])]),ft(qn,{article:l.article,"category-list":l.categoryList,"tag-list":l.tagList},null,8,["article","category-list","tag-list"])])}}});export{yi as default};
