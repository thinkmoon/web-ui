import{a as Y,q as B,s as D,v as y,A,r,o as f,b as m,f as t,w as o,F as H,h as M,c as N,m as g,t as s,e as _,u as h}from"./entry.5cfcb20e.js";import{f as w}from"./TimeUtils.e439e4c7.js";const $=Y({__name:"post-list",setup(P){const x=B(),d=D([]),a=y({total:0,index:0,size:10});c();function c(){A.getList({current:a.index,size:a.size}).then(l=>{d.value=l.records,d.value.forEach(i=>{if(i.fields instanceof Array){const n={};i.fields.forEach(u=>{n[u.name]=u.value}),i.fields=n}}),a.index=l.current,a.total=l.total})}function b(l){a.size=l,c()}function F(l){a.index=l,c()}function v(l,i){x.push(`/admin/editor?cid=${i.cid}`)}return(l,i)=>{const n=r("el-table-column"),u=r("el-image"),z=r("el-tag"),C=r("el-link"),k=r("el-table"),E=r("el-pagination");return f(),m("div",null,[t(k,{data:d.value,height:"960",stripe:""},{default:o(()=>[t(n,{prop:"cid",label:"\u5E8F\u53F7",width:"80",align:"center"}),t(n,{label:"\u7F29\u7565\u56FE",prop:"title",width:"100"},{default:o(e=>[t(u,{src:e.row.fields.thumb,fit:"cover",style:{width:"180px",height:"60px"}},null,8,["src"])]),_:1}),t(n,{label:"\u6807\u7B7E",prop:"title",width:"160"},{default:o(e=>[(f(!0),m(H,null,M(e.row.tag,p=>(f(),N(z,{key:p.tid,class:"margin-xs"},{default:o(()=>[g(s(p.name),1)]),_:2},1024))),128))]),_:1}),t(n,{prop:"title",label:"\u6807\u9898",width:"320"},{default:o(e=>[t(C,{onClick:p=>v(e.$index,e.row)},{default:o(()=>[_("strong",null,s(e.row.title),1)]),_:2},1032,["onClick"])]),_:1}),t(n,{prop:"desc",label:"\u6458\u8981",width:"600"},{default:o(e=>[g(s(e.row.fields.desc),1)]),_:1}),t(n,{prop:"created",label:"\u521B\u5EFA\u65F6\u95F4",width:"110"},{default:o(e=>[_("span",null,s(h(w)(e.row.created*1e3,"YYYY/MM/DD HH:mm:ss")),1)]),_:1}),t(n,{prop:"modified",label:"\u66F4\u65B0\u65F6\u95F4",width:"110"},{default:o(e=>[_("span",null,s(h(w)(e.row.modified*1e3,"YYYY/MM/DD HH:mm:ss")),1)]),_:1})]),_:1},8,["data"]),t(E,{currentPage:a.index,"onUpdate:currentPage":i[0]||(i[0]=e=>a.index=e),"page-sizes":[10,20,30,40],"page-size":a.size,layout:"total, sizes, prev, pager, next, jumper",total:a.total,onSizeChange:b,onCurrentChange:F},null,8,["currentPage","page-size","total"])])}}});export{$ as default};
