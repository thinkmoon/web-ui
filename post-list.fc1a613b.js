import{A as E}from"./ArticleApi.b5312855.js";import{f as g}from"./TimeUtils.dee93a10.js";import{a as Y,B as D,f as y,r as A,b as h,k as t,w as o,u as m,i as r,o as f,j as _,t as s,F as H,l as M,c as N,m as w}from"./entry.a4e2a0a3.js";import"./RequestAdapter.9216c8df.js";import"./cookie.bb3576d1.js";import"./config.62c248f9.js";const R=Y({__name:"post-list",setup(P){const x=D(),d=y([]),a=A({total:0,index:0,size:10});c();function c(){E.getList({current:a.index,size:a.size}).then(l=>{d.value=l.records,d.value.forEach(i=>{if(i.fields instanceof Array){const n={};i.fields.forEach(u=>{n[u.name]=u.value}),i.fields=n}}),a.index=l.current,a.total=l.total})}function b(l){a.size=l,c()}function z(l){a.index=l,c()}function F(l,i){x.push(`/admin/article-editor?cid=${i.cid}`)}return(l,i)=>{const n=r("el-table-column"),u=r("el-image"),C=r("el-link"),k=r("el-tag"),v=r("el-table"),B=r("el-pagination");return f(),h("div",null,[t(v,{data:m(d),height:"640",size:"small",stripe:""},{default:o(()=>[t(n,{prop:"cid",label:"\u5E8F\u53F7",width:"80",align:"center"}),t(n,{align:"center",label:"\u7F29\u7565\u56FE",prop:"title",width:"100"},{default:o(e=>[t(u,{src:e.row.fields.thumb,fit:"cover",style:{width:"180px",height:"60px"}},null,8,["src"])]),_:1}),t(n,{prop:"title",label:"\u6807\u9898",width:"320"},{default:o(e=>[t(C,{onClick:p=>F(e.$index,e.row)},{default:o(()=>[_("strong",null,s(e.row.title),1)]),_:2},1032,["onClick"])]),_:1}),t(n,{label:"\u6807\u7B7E",prop:"title",width:"160"},{default:o(e=>[(f(!0),h(H,null,M(e.row.tag,p=>(f(),N(k,{key:p.tid,class:"margin-xs",size:"small"},{default:o(()=>[w(s(p.name),1)]),_:2},1024))),128))]),_:1}),t(n,{prop:"desc",label:"\u6458\u8981"},{default:o(e=>[w(s(e.row.fields.desc),1)]),_:1}),t(n,{prop:"created",label:"\u521B\u5EFA\u65F6\u95F4",width:"110"},{default:o(e=>[_("span",null,s(m(g)(e.row.created*1e3,"YYYY/MM/DD HH:mm:ss")),1)]),_:1}),t(n,{prop:"modified",label:"\u66F4\u65B0\u65F6\u95F4",width:"110"},{default:o(e=>[_("span",null,s(m(g)(e.row.modified*1e3,"YYYY/MM/DD HH:mm:ss")),1)]),_:1})]),_:1},8,["data"]),t(B,{currentPage:a.index,"onUpdate:currentPage":i[0]||(i[0]=e=>a.index=e),"page-sizes":[10,20,30,40],"page-size":a.size,layout:"total, sizes, prev, pager, next, jumper",total:a.total,onSizeChange:b,onCurrentChange:z},null,8,["currentPage","page-size","total"])])}}});export{R as default};
